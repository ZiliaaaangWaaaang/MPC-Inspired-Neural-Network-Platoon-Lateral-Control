function [Y,Xf,Af] = nnmove_24(X,~,~)
%NNMOVE_24 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:45.
% 
% [Y] = nnmove_24(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6547757827768441174;2.7012986316444904666;2.3158621143865030234;-2.5178827702102055675;-1.7044862939179161732;1.4344745903956948041;0.97521916515950646254;1.0255773919763673252;-0.45711058809124982538;0.58998560775037978132;0.38266365438584742931;0.23054989899915892537;0.33418440854207881463;-1.1152676682398201535;1.3475820537091893758;1.5618995631755145936;2.4336691862542969567;-2.4815513670724116402;-2.8725731376980299103;2.7828371880116362647];
IW1_1 = [-0.47694717081602228115 2.364215891574687145 2.1250575176005779277 0.55148239637737417329;0.1280922294426934116 -0.93740276716318571282 1.2205969318686122893 2.5480598790948474353;-0.89793702187545598736 2.1026605793348287499 0.17855760710295870419 1.8089742854981532005;0.88569610117658648107 1.6242760079407962959 1.6531471667304820095 -1.3036042326002339475;0.46779014221963860498 -1.4728274097505651419 -2.5158118621302056894 0.081139658200239744845;-1.6345058403646941514 0.64617511056773568878 -1.0242350742908339356 1.9762510951158633876;-1.6681697190676290088 -1.7807909293314905241 0.13144426236747469572 1.302077304541122249;-0.80133866265942721441 1.6187836518241423001 0.060652179238989877008 -2.360887129811099161;2.3889131067018172239 0.60484405561646092941 1.3905877408162472531 -0.47887875236547539082;-1.5386092836019242824 1.7281206324205964364 -0.13609901450990469218 -1.7210049095298283195;-1.628557574057323265 1.3979878302063730722 1.5798067250601655065 -0.41690563274599184984;0.73938660847302817292 -0.55400400164706420369 2.6714036790808100008 -0.9164832030610046143;0.89654833549174894891 2.2852648779200657181 0.71843112498382488695 0.8387355228827040321;-2.0291337900256798399 1.899825484454925828 0.33235927706483969768 -0.75375542394227468268;1.745490701242318865 -1.7604379893228918608 1.0684382871654389824 1.3117791519215173945;0.9077593538757957603 -0.17679151384587987739 -2.6931554241348210077 0.23794323569221401127;0.55072372960396842601 -1.2980411742806452491 2.1979829312483705195 1.0856255392993696685;-1.0085073544372757937 0.9894661481585617091 2.4892826449138891753 0.17969841238764364122;-1.6417329364435908623 0.14422185312019039638 1.2993386955730501509 -1.7427452336604147831;1.2365870651999824048 -1.7005251844145090612 -2.1633676460433570732 -1.0008910962328914085];

% Layer 2
b2 = [1.3487645400661663064;1.2369154652285554441;-0.82738090994625457242;0.35856441653360215938;-0.19121571391500127857;-0.11638740945614568789;-0.62714384172614667801;-0.69612263203638713449;1.3148840529172096669;-1.5426273626519093618];
LW2_1 = [-0.52580452940794952799 0.099999778382828224954 -0.10609359674995855194 -0.48635919563968788015 0.32047677146237346646 0.26591802034205241911 -0.50338501822181169754 -0.33514443077216982125 0.047498413664441581361 -0.28327072279200843363 0.38415412458588482636 -0.00017238715553053590712 0.18708860529049767263 0.64449157186798511354 0.16599433204352900817 0.35354041211141040701 0.043261836495035399519 0.69747378511379654054 0.47984041182390446689 0.53567615468571627702;-0.55600197596938671918 -0.061396997077626504213 0.16739804809937114394 0.37629359283142882475 -0.25557594411275291746 0.45687733993341983485 -0.42627675029373340854 -0.496263514310433973 0.13053594966589560089 0.37387079379854792904 -0.39055324698479909618 -0.17534338087906631287 -0.086236222957182084858 0.52557090195489053475 0.71168323886501261288 -0.29077944112542797317 -0.28763783970879530649 0.063826985922996667955 0.16683494279011684691 -0.60144611405162751172;0.37210247005435687084 0.17350996491529574461 -0.2689407332234647896 1.1440052715198807398 0.43802318911574800175 -0.28220178449214122773 -0.32512369115876621484 -0.25505044887668770759 0.15969654711866385077 0.00040400752429964239404 -0.61766128859321156597 -0.4991167411120509545 -0.22167099705604176307 0.32276022262348735836 -0.33028983712151993579 0.72005181388058947523 -0.04400699897096095603 -0.082793987364089063896 0.082702697992521390091 0.39819256472797692759;-0.501530126407593424 0.79261591221617788694 -0.13588319269631449204 0.38033151314797553066 -0.60171789337626002681 -0.26009658628314802353 0.33568511504832060366 0.15075538303051108646 -0.02947116473019028432 0.21415473788605474126 0.068773431869034673536 0.12453908548276766688 1.0372337787529875008 -0.19199697598086298833 -0.12775478445716162423 -0.14747893522646754461 -0.015501633468981514119 0.67446814100759122645 0.60087829416500238011 0.1713948175246098049;0.58726985700056211215 -0.53588818497759704851 -0.1175963931819803826 -0.2047104322242231933 -0.076783875638068196934 -0.22097948770986769462 -0.16204279896584175558 0.5504098998329578496 -0.16693572516578175646 0.56494658088110882854 -0.57412874537404590125 0.20756346061991717833 0.87956591492313529468 0.24683494106934816825 0.155505012477196225 0.56853443922910651409 0.15108301096869508617 -0.48296159219771117588 0.56879865367697102219 0.25379811173431399141;-0.58015962284124955595 0.49588326397992649186 0.46300789257667068766 0.4090419397888849784 -0.24936702485833475706 -0.017018392562964453074 0.15688539000912843369 0.33377257373542379426 -0.35630137480400408956 -0.10172681195777549812 0.38325511921434651796 -0.79632049733992227303 0.10186873269601610936 0.24478346209367823905 0.33974537555832445834 0.1310507324016216002 0.32140563716310044384 0.28653066349104666655 -0.69707732370179098513 0.45754187768706477968;-0.63916359198635852579 -0.17275007033538292145 -0.098912194682918411215 -0.0068838928302743388268 0.6873633914773727982 0.52224528663470382028 -0.2294929334810617283 -0.011229861122758293818 -0.16902284226576272386 -0.34265882580817569325 0.22734169530666459291 -0.10802840863311719 -0.24725051914635856609 0.27002154603302264135 0.35675150901422447713 -0.1591900085074062221 -0.16948633987341504836 0.40012172352534314257 0.33911702372909602321 0.32172069755562077153;-0.45159611885617212401 0.076267103481508530249 -0.15587192116908415995 -0.14371265651092399174 0.12240626357101277999 0.2573878023578457519 -0.2505875739300595928 -0.14480624354141058419 0.3007940920335454571 -0.23221199537035688842 0.53850387794200293978 -0.32398149315945712345 1.7518685667897082592 0.067234022481065705557 0.17148451064037456559 -0.54168348816376399313 0.60229024395471975062 0.18183197791379193675 0.0067386241316746003926 -0.83388962349602580026;0.47867801054948122541 0.3014509980934065303 -0.40923869437565207896 -0.14239849282567743072 -0.37152399955202602966 0.47985353376208988996 -0.021847477530594308637 -0.12771847655798176935 0.26342158845188073935 0.29812747783216342334 -0.0032231400186066255613 -0.4903590353405680724 -0.37583840626394943163 -0.66797040700839582783 0.38943883610703011744 -0.18937627931415479399 0.43299172149582465519 0.12977739501636342823 -0.3908906359560304633 0.38320060654935106381;-0.028776631058481730308 -0.41910226453545029734 -0.11391722419367558694 0.32078053034003733979 0.27046825783538402943 -0.64511200787108435861 0.39418609565878398593 -0.072337664406985593968 -0.041626901368653775048 -0.5389051351498257425 -0.031819791921112332289 -0.11628076378155227655 0.090697313490769690403 -0.061853556491523235816 -0.13467298123584900416 -0.17304205544736797617 -0.56368656971015029811 0.23646686662443031079 -0.65078595467106969963 0.63571353060956448111];

% Layer 3
b3 = [1.9885476683843890111;-1.685173307039873114;1.4318886219484738831;1.2620288870847884422;-1.2253820684312279887;-0.92376699194015399197;-0.8114774615510488287;0.38962191443628291232;0.38603966265773270727;-0.11174368538517095995;0.07473910207502916514;0.47667348395808584183;-0.44121486654303632147;0.66539160979830558329;0.86475550952216539979;1.0429409681228556384;-1.2957202968846754931;-1.5478974891268284519;-1.6925017610534929258;-1.9275169128434332944];
LW3_2 = [-0.68218400782708499275 0.72889301536964901107 -0.62905565731299828425 0.52813565717292498825 0.52371173678775162497 -0.38185638931690124576 0.5199553031759936994 0.51485044512149658047 0.86329423770214119838 0.025605259343556625862;0.74211019939831834868 -0.52076997538697056278 -0.47143642880105246507 -0.47264522582367107795 1.0205582094255363224 -0.87503144512188013593 -0.1169180313069227567 -0.45351141772275693764 -0.56376933070221568745 0.06864343457570966367;-0.68848429100196595343 0.18530270294511944074 0.51021038503052384971 0.50259724206313227679 -0.14471984373589116823 -0.25823794242007913624 0.10226843197429068277 1.3617890972178481324 0.73837494912018430959 0.063800465127185179703;-0.74309330670875872737 0.31531441296777212857 0.58177580748603086036 0.40919271621322611532 -0.89360095249495752334 0.018990159381117817372 0.50278694171829052539 -0.67749238229514874288 -0.64341082451189157698 -0.74998621455747394027;0.072314522650041165863 -0.12739075582369607798 -0.82586445084033099917 0.87309089750993318368 0.81128209836693598866 -0.37135386911459178361 0.60394800302078921472 -0.3397030231071284101 0.20427360030606722674 0.8851405920404105121;0.58701924431305052554 0.60692113312026396699 -1.1070187117916312491 0.15245383143748203469 1.0460233380352272903 0.22000120568593539705 -0.87401623916668669256 -0.28490351286747744863 -0.28179222830985589665 0.63290887473130053031;-0.25027623256829661935 -0.71272153093364387644 0.19468150737807918271 0.85418768415589196863 -0.69082297565554429131 -0.3206740510418761847 -0.038441290237134863317 0.53400016534361249843 0.76129372815987328416 -0.72719930067727156509;-0.66273628650501203996 -0.11012372670927028651 0.96956777594221599248 0.16660686710369745911 -0.59849498639346709883 -0.56367976108505479793 0.83589973108154247416 -0.057053718785499002442 -0.37805256286790828169 0.98169346859474815314;-0.35713657465638792843 -0.30165294797501718271 -0.94190027537406717517 1.1662353099735642825 0.48907793321443360224 0.76793390276875439504 0.12110197107616924028 1.1878163326310644532 0.25673486525436051142 0.49587455584738154846;0.26113550018802828001 -0.79035278921586626932 -0.029820282829019866683 -0.0035348795643302252309 -0.038153997373582888841 -1.1747934207234627113 -0.24536999471546014351 0.2827423211286583804 -0.21203946622078739814 1.1161156378453498395;0.38623737901993376864 0.60317752110961608825 -0.15340587358989088429 -0.40863736395578315053 0.28600833323058932889 0.47376725180641632296 0.91077318215737723683 0.24158175214730290281 -0.89494845829091462797 -0.83264823450007630079;0.36128672786904952874 0.8551116091437488409 0.63103805579977279017 -0.65344129849286292089 -1.0454037178057127289 1.0345715992387496396 0.39643973439623919619 0.014951118290034082908 -0.29115534193849235134 -0.14491324964741200687;-0.37541255293090064482 0.62162896293592329044 0.48735972577622349577 -0.51292758373905511515 0.53986499936738585603 -0.417129502499468785 0.97368004177675970823 0.95815424875447152697 -0.30428604521399044147 0.17282979727553782201;0.84987542750672306902 0.62254481695266816743 -0.42620155853869046148 0.1797847291452607521 -0.16295396079589860583 0.81591903055098302655 0.25884324997024293902 -0.20662096462876633485 0.68642347323638186474 -0.97762306908664109439;0.58262411243977618724 0.68433700682157971862 -1.0389819535377946558 -0.85322137923319585351 -0.43989310851660540225 -0.42204330794243860581 -0.42212359292128204258 0.31249796364745413557 -0.23904064288052048748 -0.73770630912204060436;0.76965745984143651981 0.44394434042501285109 -0.68309005693855029406 -0.096574236381813047259 0.53046464863091336017 -0.45557412226423615875 0.1718874431724744245 -0.86518579842649567802 0.70757052909120454753 0.88265217811155172178;-0.49014200672758212463 0.52417651832189737782 0.8668079676838137404 0.79556036363586135618 0.97682460101246471051 -0.54348723768466555839 0.41732277206771156708 0.65620765942486913858 0.076695022050565553329 -0.34986712423483773415;-0.91453633986828208879 0.30767454720819598091 0.9376693946555462178 -0.63823658924498405387 0.15395590228107350339 -0.42628536615956419409 0.17336316262313744563 -0.82558559893495608861 0.48335952090608175213 0.25028766984290284903;-0.6509409294780945654 -1.4009041653832654539 -0.34182880153204464602 -0.18575676873232976893 -0.084297761121822065156 -0.77837184531220371397 -0.26722128142613438273 -0.029315064378129106204 -0.18586035507745651829 -0.85526297564525632922;-0.084433527905806188274 -0.38505683293668224731 -1.3906705027220922499 0.014844115375977511018 -0.49522856276843840728 0.15843203731619198704 0.58094311529153808138 -0.51318869982113590744 -0.067113563232425524352 0.70410373510533574848];

% Layer 4
b4 = 0.64305361861498955278;
LW4_3 = [-0.9497385544493472942 -0.40683590524742951899 -0.24039650940559217918 0.69925571035367761752 -0.28408168182857251871 0.8712233188498519354 -0.25841440145197053235 0.98247505761152997827 -0.84985055370044915168 -0.27186073907745850198 0.48628341770775113106 -0.45939820179431462011 0.82462355086723404529 0.90372097211643687142 0.90832962575798004146 -0.44642889114175271503 -0.42597965025375333914 -0.089689429218241537023 0.81209747154511058298 0.22437951161763095009];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
