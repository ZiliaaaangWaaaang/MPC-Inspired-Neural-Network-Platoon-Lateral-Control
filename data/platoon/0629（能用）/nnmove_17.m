function [Y,Xf,Af] = nnmove_17(X,~,~)
%NNMOVE_17 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:37.
% 
% [Y] = nnmove_17(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.581224840168548;-2.08798180279202;-0.533403245818273;-1.89546903030855];
x1_step1.gain = [1.49735732495204;0.473316379586819;1.97939958841911;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [-3.1972197000258333333;-2.9762191688570291959;-2.3818050942305486473;1.9198019895051188222;-1.9322751548135235211;-1.4914278106408673796;1.0428421555443514457;-1.1406040517255664479;0.29995229698575126553;0.48985785756335514796;0.23316883795984863492;-0.0043212080989019699406;-0.39181311189850354104;-1.0652605477774466092;-1.3789651020932780501;-1.7747159190287837838;2.0116698268240029712;-2.1388778960617211844;2.4116505177819491657;3.0176878979635084477];
IW1_1 = [1.1869311693171324951 -1.7839913929954989147 -1.3255995525323629458 0.97127144838040824215;1.0039829214805964241 -2.4798352143644186718 -0.36721428205166084524 -0.46194848473125776911;1.6597765679309894882 1.1930789502250169765 -1.4344985097728422119 1.4371931822133550138;-1.6353939994793247337 1.0035501281823369091 2.2752530047258727741 -0.48208161783086606045;0.076780975336125711905 1.1098428030436635616 -0.90303822887647655637 2.44257324742043469;0.80377315131537785398 2.2676930344563861475 -1.0435095316978917346 -1.2754293745409392979;-1.7763077524723460687 -1.653556561491168253 0.26063173014459406485 0.97858768502648096899;0.36370857806750089836 2.4673173362042608581 -0.43873941908733443684 0.98903414460632022021;-1.2381368945903243883 -1.5746690886189547154 1.6551093405444634588 1.012287679372912752;-0.90915880866679865679 -2.4823006183998996832 -1.6791760758539413523 -1.0685788968241745067;0.626999846958891216 -2.0475123751260939642 -0.17143252098916042514 -1.9613680314229218205;-0.12031345288961084461 1.9707266333521429313 1.7456446665010387775 0.26626548424724633124;-1.864288237990703978 -1.1933456776189921289 -1.0724664995799106926 1.642057819556007825;-1.4722708629798260116 0.99691228121749386748 -0.98322851446440029388 -2.0845659032031287339;-2.5242795603928631643 0.30265230838430751126 -0.43636402692114684143 -1.3364065392567154866;-1.1560471470898951996 -1.8868884497151268143 -1.4001037798074860152 1.1915018278383076034;1.2944653425895951138 0.97531318315337356406 -0.18236498938793652136 2.5526094532730119191;-1.1265305265107949939 1.592591823179524857 0.73802293062178092597 -2.2067685580109261956;0.9880698455152172599 2.1012867299723536618 -1.2610145169627460238 -1.5968125814771283455;1.2429902199781577288 -2.0148043728414211095 1.594134661124090302 -0.70435090265366784301];

% Layer 2
b2 = [1.650992333140738344;1.3197381468319058229;-1.029913236598158921;0.40047233841298912616;-0.37671266293896532584;-0.080173959569806274583;-0.49934141824500744011;-0.94583725732525969487;1.1654476854148843046;1.4778275477996520859];
LW2_1 = [-0.35749326057163766102 -0.5139092300859697815 0.41151643760116163318 -0.0078881618279952672723 -0.19986281050679149951 -0.24960164923827629635 0.14960593363681984336 0.4471336531826484717 -0.44011118017565797889 0.16841864659055133524 -0.025504933644356828776 0.51128992730509326137 -0.40882310199425053732 0.28013308436397399426 -0.18295969435174647133 -0.083284696001099195461 0.18495452526763955792 -0.38190309367746005931 -0.38462366678003240272 0.5651391153813882795;-0.24168072630689199642 -0.13507357201942318814 0.38562042896194170805 0.23528047998009937736 0.15650266074082805345 0.52945608264580934499 -0.048745304823516605319 -0.2582606049381079294 -0.049410368898315570885 -0.084937172339934377541 0.66297386520026047041 0.29127488823814073893 0.20167130834321173039 0.80799536585695974633 -0.33491715550480705144 0.17672839572850240764 -0.52444715115415785345 -0.15486312918896005808 -0.40852107535105042224 0.48109001876691087629;0.062706780722251470594 0.38527648291747601528 -0.42175492111821166752 -0.019379258260429743643 0.65167050871867304718 0.30884688181839714538 -0.13671052142333339763 -0.11398730927543498925 0.13087387182732768132 1.0605787751573634292 0.53864954935538222891 -0.62748353487078356583 0.1091187566215303939 0.12910874677804634603 -0.38529605554463136619 -0.011904140279036081254 -0.39755439040312251509 -0.23728528848528374073 0.20157411823486712232 -0.65873652219384148943;0.084407695390048081974 0.31027668932920887679 0.35127027450373810025 0.29247226304158757682 0.18679526456496339804 -0.36030695556896807918 -0.086877615658821072397 0.04675382166239459153 0.41011549206354019903 1.3727529155353006551 0.038269677079461286717 -0.88817939099610243581 -0.79133844052422164239 0.57190923929576198415 -0.28089497406335983687 -0.38347832024684136432 -0.243352913089401518 -0.64013392682756542484 -0.43587130999574591472 -0.35920499635887276346;0.64005021881802237615 -0.28201133931122374099 -0.022380352366147722443 0.55759781544716202628 -0.1195828886106832939 0.4852221420364883353 0.12031432357444331316 0.13717752834120730543 -0.016822725727821688513 -0.52724146570435548309 0.10692943133173696268 -0.20515152961721100366 0.1154897106327899825 0.19876042571997154518 0.083624202995707830333 -0.44339685495196889953 -0.16470452303183583109 0.26830262160356327383 -0.034263520343993783546 -0.66936866096980929264;-0.47256493557141243667 -0.64839520728313693176 -0.39523433235638505412 0.15862394301517845907 0.41256879673140778308 -0.46351769653576813113 0.015144225690239375079 0.11280193598093277152 0.21720224871422055823 -0.0035635013894139144774 0.38856182971029834539 0.40249671715173940267 -0.12698078181632682648 -0.4880417026406232428 -0.58141383706000604459 -0.32564374422117586816 0.29200225562896908738 -0.31575153057495974895 -0.25107277331922972508 0.35336649751912241335;-0.33452018476195610752 0.52881697510771041859 0.048797401519743863196 -0.351222752069647981 -0.35348987482001975602 -0.98607058120127943912 -0.5249237128875194891 -0.12243087559182380675 0.20744407645347645586 -0.0075302066461245230344 -0.057339991087406443071 0.20838259352631610666 0.24563955718713315068 -0.29574046963852057557 -0.20118305139559961026 0.54030756058199369551 -0.42771901957537733496 -0.25287732267103224526 0.15165083244516278094 -0.024431739213693168256;-0.050051486382043389178 0.037130575421875963715 0.40325816354924393092 0.34019076012650351082 -0.15659721159302969484 -0.21590573228771997583 0.42269964458113390426 -0.19669280021118326629 0.050425728729155273877 0.28974073808823352927 -0.4425915434729138509 -0.29209996728127757271 0.42625104861173668258 0.3290375290169364475 0.31444116378595532435 0.016487230346835923117 0.50350104215056845636 0.091810815905726941843 0.2723999418547853324 -0.2913743496026424129;0.26949380574161752033 -0.59636323324041862204 -0.10125669744095608382 -0.34701317054089286795 -0.35333870701751179944 0.011869252969564314526 0.12099199797900574149 0.02360927434205497763 -0.50795118530215099817 0.19317004611967911187 0.66340314368792208111 -0.67511440692742719083 0.39835863710001834237 -0.049678359783761991131 0.43608526851165319016 -0.11399143384553711567 -0.56927402391051762365 0.18594959816974049316 0.39082127528813193074 0.3105753713524744275;0.28513199459390436985 -0.024284954846970456532 0.60254178194313223749 0.29744983335065261487 0.11728451164111920735 0.54161416474079793204 -0.19997512168499681495 0.15904742986784700665 0.040939893442838964921 0.65715120198337428903 0.078671762582551749143 -0.056215216286115872457 0.29716501536329931188 -0.69163624225122488642 0.37887251588917747469 0.14683756372508705024 -0.40460706000293616968 -0.40270231076805762527 -0.07080359980553788124 -0.54611013338623470847];

% Layer 3
b3 = [1.8317877402899700456;1.6710162301790938422;-1.5122352889507526541;1.1913045968268001218;1.0529757563791226627;0.98755626915787164677;0.63064907091763922065;0.38449645984627828232;0.34453247170134759791;-0.12812153798663367121;0.065945079236512105236;-0.1942337743899256175;-0.49959146416638144927;-0.61751202222613121862;-0.94065709504252137396;1.0673402632086754771;-1.4378325135536456081;1.3527397389539970174;-1.5455659227636409092;-1.874512744302736289];
LW3_2 = [-0.62898171919024326026 0.43766120986661649628 0.99434646394199865949 0.35437961459349320847 -0.1419839693948228565 0.46900065953930281104 -1.0508875133077264508 -0.60521374362296231908 -0.4714524367480282252 0.29435036885414939123;-0.48084057985410050273 0.73834963131882991316 -0.70061209615964148423 -0.80115640431311296865 -0.023512519645059844903 0.21087222807269709324 -0.78253590433772146628 -0.14479205603898304133 0.33439366884626742227 -1.0001108543766035197;0.59471704952954518308 0.45886756158608071887 -0.19099327050490644275 -0.67756238019107473125 -0.39936802728343867575 0.78170988265810648077 0.83778433483118941449 0.48622169371765172619 0.74936539730856077668 -0.16037942855498510397;-0.26896468000340567617 -0.85067246494203341278 0.20993380153970797597 0.69020899584734685117 -0.73697151638525060235 0.29982910317215694107 -0.68395967108540289825 0.64034889220286150824 0.72753746212457537368 0.18264886017769932369;-0.38689398896541776773 0.79367991626484613032 0.40239177759943972612 0.19280169621444676054 0.22965335656333080161 0.75598538187313968351 0.79751259897147896982 0.53429188547591921488 0.8699949309259977781 -0.86033937404958638062;-0.02992334519279383348 -0.066884811559811685466 0.6109899829215335032 -0.49915505887096756066 -0.67618133445117878377 1.0223360981547193749 0.74541444583740079644 -0.63312357787528372732 -0.57025335079062255961 -0.53438847723615601204;-0.24092056550149007488 0.031128995536396773802 0.92421110487416791024 0.45989743323500009708 -0.63708478860706119207 -0.86029447357956256859 0.79911854248397984346 0.24263754408364546222 0.59287291398950214827 -0.19597504726045800183;-0.1903755234062999846 -0.15933813734813867535 -0.73601247223623522675 0.27931092759314984919 0.030252352690059890888 -0.97266622130524360568 -0.79828870002877994061 0.64085456863582290765 -0.83908652020533258664 -0.64201581550071329385;-0.19571291641997354271 -1.1486221305896913147 0.34654602243112347937 0.69905956018462345192 0.10871844869254899957 0.6350542109976270444 0.76266040926074740725 0.67466581709980433246 0.025648343927097822653 -0.085981889804634170638;0.82155862661517231604 -0.46079251068362908628 0.029983436989236125769 0.68499930398965280798 0.95087451959746360775 0.2391290605740369335 -0.44692030006328925529 -0.4158314819538639906 0.11776914221850229292 0.78794332394536059638;0.85205659038378545045 -0.30697080055394132536 -0.39795994326675732111 0.34409880319626612311 0.14186951711649631314 -0.098811530566761701655 -0.93363584512671304871 -0.26149002719683434037 0.85724428855833412211 -0.86574924470064995585;-0.069018072674493627372 0.95123584912241487821 0.76429931271943452042 0.1197933211994540309 -0.9404065949513312761 0.2411077793879273512 -0.74930412636418053385 0.53211530620742519826 0.4681801429039550988 -0.5712265930092974564;-0.30383947811327421951 -1.0107228399892180803 0.069186300027171784843 -0.39204780982043746507 -0.20258249532617345068 -0.93958756205970961339 0.087408418933486151103 -0.56224835084488811177 -0.1474197670471515953 0.77398826189113101304;-0.28786305593656646984 -0.20165009754696369693 0.26650225444693154131 0.38113417561286150326 -0.91627909179182842614 0.71520005358583982336 0.43095928576184788783 -0.46382276082055201583 -0.65246289464118290002 0.59707807311202343303;-0.018833580885096897622 0.53072330116851251791 0.63497198853371783489 0.88636701054028854685 -0.056627581254165441915 -0.35330090964981619717 0.65881293681458674705 0.80706670555539261613 -0.59044908323335354439 0.65708988920140010137;0.55277938057919973058 -0.75711815637770529808 0.33528403683474766739 -0.051788080516633742956 0.7764811704361872513 0.65429406127145472993 -0.21064565771541329808 0.81836774917807619811 0.43883698078475036342 -0.77276024435748258412;-0.84147355272590529385 0.35376290753987055249 -0.60669790649879984379 0.57277218986034450499 0.80905239727409350436 0.40434010750583004867 0.42437066082032681713 0.24380873725781646022 0.45949514539240171596 -0.65044507730320055838;-0.042606729649039123964 0.67265688351497099351 0.70279271811059362829 -1.0128538451697579603 -0.68369133557744554697 0.007959136181629151291 -0.55540734934929980593 -0.3205725747108857937 -0.78237565720954460602 0.6564247357565013985;-0.33135388190695552746 0.72810073010561260354 -0.32243488410314696813 -0.098169391782455678319 -0.69606219379520195556 -0.77522051471263597744 0.26489909953264723086 -1.0711784213701032176 0.857194300022268596 -0.18730055975923898259;-0.29448435203776091029 0.016061793194999136186 -0.36687306799430985382 0.80079715785566274455 0.92923663755725816049 -0.5108835501203687901 -0.093234732612047413469 0.35305501472679529096 0.81842251581284497508 -0.9102826418573312095];

% Layer 4
b4 = 0.38005246086664334904;
LW4_3 = [0.068458789956973756241 0.35272468690720248929 -0.70204191938835691644 0.34802195089749454748 0.28120877770873781154 -0.42824865422892066658 1.0345039242323044171 -0.66252954179217582453 0.015213840108126652773 -0.19519067069154008576 0.1764667581486706327 -0.24218949196362116183 -0.255350044600799575 -0.21207136144292909608 0.45501571359634546132 0.29135859707965200416 0.84266598429432937323 0.38402525155386457723 -0.32686485137180076865 0.41350486154046761644];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
