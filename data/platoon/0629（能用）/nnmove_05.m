function [Y,Xf,Af] = nnmove_05(X,~,~)
%NNMOVE_05 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:27.
% 
% [Y] = nnmove_05(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.2432837396787;-1.77671183213846;-0.522218457189092;-1.87191152625995];
x1_step1.gain = [2.00451934292179;0.567049054539722;2.07268153958104;0.53194555728415];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0458915582654211285;-2.7162054637720469685;-2.2540227921392337329;1.8199478727762026242;1.3305553440656185948;-1.5669158926065087645;0.9266072946020604828;-0.74440444780928627377;-0.47593859620851813874;0.17350226817248259881;0.56828644427217800406;-0.74532331229132753325;0.75637637709017591092;-1.4095358364497077019;1.0850281044048875057;-1.6033826490847544743;2.253828146882827177;2.2598293959345330251;2.8942148750291414316;3.0111935288253364185];
IW1_1 = [-1.7870190867057897943 1.0483678985995243949 -1.1119971331619533661 -1.7034558805128541259;1.6542147835183997895 -0.91526998093546874102 1.8940456884343654931 1.0795385093574105806;-0.00067022194154666683754 -2.0089861700593383276 1.2288913599037920577 1.8442990722889189836;-1.9979505934063672701 -2.0641873405232331606 0.29245562316944451187 -0.95501873092180578073;-0.28663816520030743762 1.7468713542067744182 2.3186823177000404073 1.0984453152468838244;1.1499855582336928617 -0.71539762212915802841 0.64545630043235824314 -2.5925635191463074491;-2.1318163496762019271 -0.89037442143929412808 -1.9715179884814229005 0.61636322673977483877;1.9003497318615703016 0.11058829544205457662 1.4111195415251496232 -1.7682196924444006925;0.52816386323091124577 2.0886840079894417599 1.3291874561512733166 1.3536562860010992182;-0.37426564754729291229 -1.1896204308626809887 -1.9902815304166121546 1.0809953359777830784;2.4345251112647647851 0.54060456975229220777 -0.96549955259581832223 -0.77394456363849128966;-0.69197797679232486701 -1.4708588194810221506 1.3703200862754618683 -2.1100417351803835153;1.9345081388639935316 -0.93046210202397439115 -0.16245905454385728417 1.7878365569165126647;-0.91943660184839548499 -1.7570501254298813709 -1.8776443520843024704 0.16492390274673762729;1.9471938054012285502 -1.0269674352340742995 1.2101376419809533047 1.6057546399025339756;-2.3311324155989434637 -1.3900943751572010232 -0.84439699199744866487 -0.18666277085160198901;1.7000056962704570562 -0.80873187931700674103 -0.60478988303352332334 -1.9907639906752372383;-0.012403079209278532885 -1.4726630893531211797 -0.60748095517539368871 2.5735900766704102871;0.6859773699340838693 1.8260908765485901473 -1.6297581670541305687 -1.1896921877230361986;2.0252000332087578549 1.2688299423087916473 1.2566523695448263975 1.1007260435471644122];

% Layer 2
b2 = [1.5536812765490430888;-1.2628807447813230613;-0.78590456287135479485;-0.44107188983922374081;-0.18817127585056178662;-0.06570177093092015308;0.58678922184155146713;0.89356344901899575905;1.272347718579216469;-1.6094385786888973922];
LW2_1 = [-0.44278455924268189658 0.23907259332126179485 0.17279566129601464652 -0.16629902330514390041 0.4385526873350537036 -0.83377386252513363551 -0.699287316098422429 -0.38339470528769759028 -0.5835174706973070835 0.59647737390240263 0.11700569100641070031 -0.40676587024505139745 0.0042381535913556421177 -0.19083885792456209418 0.12602559469577798157 -0.51298273646440195606 -0.068932413748588813873 0.15809741639631075261 0.19211570604334399226 0.3085498355899769507;0.28146236344149905273 -0.29227309321466604652 0.75955668081624527765 0.50483544526483814519 -0.80741952486047718907 0.083068763673059334285 0.33682002151611689644 -0.32842572138828218797 0.20020047729612119869 0.75908747830575629134 0.38218147707589239515 0.19146679843140110289 0.057743832332209310554 0.31873595646100483236 -0.39513271477991618319 -0.16874399505871234828 0.27054798853320100038 0.27041346057869014574 0.16255361026726955487 -0.28907423911203877775;0.52678740509278787485 -0.58768439670029593014 -0.45832273706251941414 0.014200928279844740945 -0.02511917871348311182 0.75491357079648679917 0.2993169986868038368 0.33000215011032818513 -0.42933920026081090482 0.24133834912350857205 -0.19696830431891196311 0.1414777910055199095 -0.061511286640900178502 0.008702574778806464878 -0.43282747498532592179 0.28498205277130672641 0.49524239046237455986 0.083364393676989181903 0.26451550137561369302 0.21351758911528009865;0.37348685232235956377 0.080697030865797783616 -0.074906133955502940402 0.35301622851874148168 -0.1446008095488412748 -0.30293418486271450618 0.39446719302138844032 0.63821924534689722375 -0.42648751332611462006 -0.42881473977179779267 0.31593280595084588525 -0.59133488160835023795 -0.3316380729676975947 0.053718384708465606592 0.6488777842244652927 0.11754267826256858953 -0.5529337115788341972 0.71944789330492853185 -0.21835769579185015932 0.046469818582172382759;0.31185258317149194829 0.059486003343628433837 -0.46631882799358309599 0.14340656467900469995 0.11387924228062769327 -0.11816367776065031525 0.26153385306321880188 0.26908003170095118328 0.40234063968802108446 -0.22938787029097532089 0.70854145344221974856 -0.35267147284841049437 -0.24652716104207342274 0.28735452297890978768 0.044180548272927444575 -0.19667492968221986227 0.044571873377037135588 0.64625084226462203851 -0.048276387673911284881 -0.51304666646327878876;0.01660770426339936226 -0.079412330800318953195 -0.027257936174024808423 0.61951313232318716562 0.4731644456272377508 -0.8362077632494937518 0.0069959706277278859571 0.32064781554129778707 -0.2533785623676967913 -0.43809440406017530201 0.21835343005348170631 -0.45195805862890281457 0.078596309699481461952 -0.17522410628184545422 0.15633159727951667639 -0.26892680433617643931 -0.53830085469742472437 0.26946006989233101114 0.35399191619069425574 0.20261255133475786216;0.35163840739826784931 0.15130779030613428215 0.18071821215613290135 -0.74452089473398042063 0.6046681699197904436 0.17085203579582103339 -0.033222801013710140383 0.15084106364263111244 1.0065980581236637637 -0.13162873754460022169 0.20200560889801172371 -0.03577850082960590955 -0.080859653340251150255 -0.12147040462675197381 0.37978466906473484777 0.16429342607192629067 -0.21991362415833176636 0.18920568372864823847 0.051863610679960613081 0.57249113030595588647;0.11339800302654448605 0.50199522455572009871 -0.39329823486022869039 -0.41395056166760924032 -0.71526424226609519597 -0.30564090050913400587 -0.46617426602843203831 0.37048046842836396264 0.20302226392550690171 -0.13682660195049997642 0.48914807347621086508 0.2319071490692395654 -0.087081352218543378596 0.71466783438778491711 0.078081256391651573945 0.16498039351757892712 -0.78681583591398041033 0.22248526734580065245 0.55404636543694185669 -0.053022815482424184852;0.15109150721784880833 0.43387823964124733189 0.041119768151842546466 -0.11513394495916147442 0.11792813896827558651 0.48909077337144279962 -0.16247862339785265617 0.21597029040476523054 0.48985817108512896834 -0.2193688711335163577 -0.31273252627677078364 0.056586141958968293186 0.12298515060534602472 -0.31350899230298412412 -0.48601663455589977358 -0.066716020338572004644 -0.24070560853001748969 -0.03856933418987616019 -0.34655131708357989062 0.15883848556671847918;-0.19088042978171795849 0.46270684802605727137 -0.39406653767430754876 0.2397686201816521534 0.12017882795493428638 -0.45863974088663439499 -0.47434207245523518637 0.024749251503137947861 -0.093865483058928500526 0.41335262182462889635 -0.10176682682315657535 -0.50299159498193179996 -0.41548482325072855215 0.41246350243126583823 -0.29731157890253934184 0.24209906169023046041 0.18360782278667006628 0.20242573344377617905 0.4004786967519448071 -0.44454801515249348087];

% Layer 3
b3 = [1.8343304975068583929;1.5102915067610211963;1.4982074095592408103;1.3202126825650974951;1.2657547071686978679;0.91243611141724711988;0.53321094455926520972;-0.49225571651399607775;-0.23945211203522984156;0.13594042948473628041;-0.11713472881027445216;-0.10518053634310488287;-0.49599030483328476748;0.77348296350434164736;-0.90951888549176496124;0.98547709762090884844;-1.2914431950229092738;1.4336890037137297593;1.6483284392244927918;1.9085325927927585532];
LW3_2 = [-0.66374037651982564778 0.12774882074961294021 -0.036747100514374998748 0.69843861267393969605 0.8453140212723966318 -0.84736892082648729296 0.73606824444274099317 -0.55769089703471752539 -0.028523782642125114495 0.58463644701250971902;-1.0556261367048858091 0.9091578514449644155 0.72785142353573339946 0.84411825239245086294 0.26961490161182555259 -0.1700062316438520349 -0.19844827283616398028 -0.052413577554616543053 0.0067579316715198492829 0.36357285836065444951;-0.92849269392618194452 1.0253597175539359565 0.04960093535242061924 -0.8902545336313965052 -0.45613751353065584704 -0.2932596534661953136 -0.16753426124340756176 0.34283669347747841583 -0.8082571500328167291 0.063429660727480366433;-0.49925975033589237162 -0.43315280835701658324 0.20045613926365937751 0.97890616508845862409 -0.26765475941094718504 0.7593294021147208861 -0.46941320375598893921 -0.14222826074997757528 -0.82418815060557137908 -0.65256820599256804005;-0.55754913382244952746 0.75083394969798877838 0.16611878227327306345 -0.044978835438210650055 -0.25404881858223221647 0.26932676625089463363 1.3785802672334239727 0.68617145651167121834 -0.35777687145028430615 0.093014739027142842587;-0.27727065288364610707 -0.44137789583086384226 0.71681409746649238368 0.77789152530443539391 -0.46756969627153333047 0.66894394602648499237 0.26117889346663769601 -0.75094388123334132601 0.66980486763135493877 -0.66735647250863561197;-0.86018481560862747326 -0.84047276136661508428 -0.37691813862786660572 0.67039149870019421051 -0.30834074091756186187 -0.14094473137101842797 -0.65003994144461596516 0.96128553780065195689 -0.54711515168241509066 -0.46426227885242765669;0.83952869139734331849 -0.6956688370751216155 0.27087354543476405144 -0.24600428705364113524 -0.68469025591880094961 -0.78770753664469161937 -0.60338974597558758806 0.56516063040974195975 0.00088241286924035076695 0.59420629005035940917;0.078440947859492085592 -0.47503395105134338383 0.34653546923769157351 0.22527552706341877342 -0.11062418805533819066 -1.1100222853243928434 0.14730833551959984784 -0.19736498432109678136 -0.97052134288687375019 -0.97246049292797109853;-0.32144051701324982684 -0.51970988195498402096 0.49552429478450715772 0.85611017496160590756 -0.09663748053977411212 -0.81921981129649834585 -0.67643178186806951491 0.48500824068592757188 0.72185937418157075651 0.32675296121787045234;-0.42392855456784006574 -0.81683120527250474563 -0.30564530582943144621 -0.97077904258957503636 -0.73463117698639424091 -0.26010067491219063252 -0.8292540541666618692 -0.36040368548520657077 0.43560430963315238673 -0.16683245536116866892;-0.17174285918478013335 -0.97206007666438787318 -0.34383501596855037263 -0.93826335118707215877 0.34572128329773671451 0.64402272429598883541 -0.69542575438248033226 -0.94053218156634621483 0.089739473435584291017 0.11082254813373693114;-0.22586722598885608515 -0.12653391058153898308 -0.69933789634348531017 -0.27825822147233714166 -0.99014124690155225217 -0.76517914031618372572 -1.0103171134898398797 0.047862100971352149192 -0.24790114945498994969 0.53189369687253207353;0.89995254716876049716 0.60304201433610793437 -0.6113200838430680184 -0.68153009628780425455 -0.64284105859844065112 -0.24968689508345873196 0.42910235044127864601 0.87075490323275228643 -0.13441110274907808186 -0.53170842238838667004;-0.039967972995486072962 0.36855581801878828374 -0.58216175601977926402 -1.0813848179541891703 0.49534735658858547458 0.19709064495846118081 0.58993005492299588344 0.40349893200524367121 0.87607142967257223276 -0.90801623095032490962;0.11415973447050521694 0.7708076102106566907 -0.42445375017466718814 0.58022163345464650153 0.019175062852849228401 -0.68706000840980818722 0.44543257926258533752 0.89230163854028909931 0.64175964825461995211 0.81801445188591381807;-1.1561638746056990268 -0.093822919984705238639 0.084500569125911612067 -0.40372924801406556705 -1.1546899346245336204 -0.41571722694489227079 -0.54923618215857694658 -0.38859024229380567661 -0.0042004348044326405773 -0.3062778683003729574;0.19457980357666287974 0.7639211676447346111 0.6710173421267624505 0.78453464362536595722 -0.52780941515731449876 -0.72001662453559345245 0.84709510841291402183 -0.32496904533814863214 -0.05173423785490053467 0.44843732142077530334;0.411413648792080755 0.84732383266185773429 -0.81802280443844321844 -0.54870394908749131613 -0.31216737691546064815 -0.18857907514040983532 0.056072962041567080138 -0.77339686564895926413 0.59427023685141111553 0.73058778915232813755;0.35149120338034151034 0.85525825206513439447 0.36342873504915146343 0.41849564311930859128 -0.67374511392805080945 0.82829615808349699169 -0.95305180736293027 -0.31639623607100270108 0.12781955036439468509 -0.4657087396127635448];

% Layer 4
b4 = 0.34033549116465122708;
LW4_3 = [0.81472851735025642039 0.89912352304895770683 0.62199120466178992039 0.15359089705120429481 0.3177816013119231231 -0.22151499815853301079 0.8486758422105751265 -0.051362911207823429283 0.48490978999866257704 0.76473748339386538042 0.46474086550863558109 0.758886974436695394 -0.011982608272045065789 0.63734210868598517585 -0.3334476659920609376 -0.46118772419537906737 -0.008294760837349380786 -0.84567615149318386969 0.36956548574423991882 -0.45866158724542027691];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
