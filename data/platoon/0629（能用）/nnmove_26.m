function [Y,Xf,Af] = nnmove_26(X,~,~)
%NNMOVE_26 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:47.
% 
% [Y] = nnmove_26(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.1177613793697642741;2.7176028985401581295;-1.9392438928947317578;1.8661394195528031581;1.7938395453460551643;1.4087093487188595553;-1.0824380039811456466;-0.70023957536297676274;1.3326066389854835936;0.89124115210810705978;0.045980518695193622891;0.20425541029064447907;1.0976607670885902834;-0.57314544219371754696;1.7582499554683790333;1.9324515639681725254;1.7941200793671958635;-2.0910633343044504606;2.5637278522733084607;3.0060601924524674722];
IW1_1 = [-0.38715879279101012012 1.5706092901321970778 -1.7194929078416143486 -1.564498047612848719;-1.3037295180188197552 -0.05108084495427692856 2.2208401129691530684 -1.6917653862863337721;1.9901379217809345157 0.097575181894048679254 1.9545288509494618268 -0.80208232765902121031;-0.74295773518515961786 0.2009309255587500842 -2.4069507300223267343 -1.7025962261720342106;-0.16705095475540429617 2.2045810301941757281 -0.21222970350830536179 -2.3650407412788436723;-1.5832130846916900868 1.5774965100654891881 -1.0909772787178033671 -1.3455520855441218675;1.5925604478694843635 1.7870716933200310184 -0.11370851639765093555 1.4292866176446590298;2.4262067936865006068 -0.49276379899952238439 0.40340136271596310769 -1.5440000678676710777;-0.65035838653658795128 1.866578551640402317 1.7012837820345594331 0.78974931073951437632;-0.4486074285430866615 1.5895624962948382564 0.74158450603844017213 -1.6758439977448758018;0.15873721095616194487 -2.4278270569910214149 0.67907586570874323151 0.055631518118607198309;-0.43405210999556859131 2.2230261738622054679 0.96798026928576819117 0.87693107215003862631;1.3963570034978762813 -1.0917041199454118328 1.1868297114263963721 -1.3400612620424781074;-2.1264102408698311031 1.7547287128516009247 -1.4936721584732053358 -0.41165278125274246124;2.4305422407403529661 -0.66274606498576627001 -0.51106498450542303669 2.1106935811226934518;0.084654309151778725506 -1.3948392408455567715 -2.1124814808769749597 -1.1834828867741904457;0.28175951186997699738 -2.1838108398906421748 -1.8941516788543630856 -0.61477107419456022974;-2.0384293796250965158 -1.6821466090874592769 0.034479602773014011996 -0.71706477660607104152;0.85643774257235294467 2.1515143225984401099 0.85278969876209886891 -2.0590508459395513441;1.9560432225766948289 -1.017050410245534886 1.8731959818536720874 -0.67870722862531795982];

% Layer 2
b2 = [-1.3331990250973735357;1.2058694991771941041;-0.66896147706902975294;-0.19886921132640422716;0.13554651920207339;0.15380992737981780127;0.62906643497603642601;0.8376915249215353132;1.2413910906947192014;-1.7768589290162817296];
LW2_1 = [0.27673027137302003142 -0.52758892117968958502 1.1939423178772776701 -0.3368987854056067488 0.2744588685664042238 0.37853245475876412529 -0.61256967134026252264 0.46826802261706051977 -0.77180813351191734917 0.084935635468598447151 0.9255970749318106483 -0.20576303763996681151 0.22680398117189079499 0.12686759255751067776 0.72252617203095648168 -0.6267138518598496244 -0.19250175909157082876 0.30840642389604189244 0.36708111570957518976 0.71891060686476071506;-0.55215613529674101301 0.16873612940909679669 0.41387994237604075476 -0.16371661227659670135 -0.37461373469987951923 -0.60533447655783212404 -0.11841161846800138391 -0.064757213863954735111 -0.19513124698590317285 0.37043739984776152818 0.5810685396998102048 0.19875438010357437957 -0.99265768309690427529 -0.50530190992274603978 -0.37991184274477157734 -0.2399371078005709812 -0.17252651590602469112 -0.33648622613570261519 -0.12561932809116960197 0.32404411485716388963;0.16962516049603862389 0.6242011955672619461 0.098763130886879907377 0.044951261375716797253 -0.46375902633935278674 0.21585676837450235022 0.25722716234674053437 -0.051245860507721618937 0.25198197148070500262 -0.34474110795846846234 -0.19425273888870503436 0.60529619536515433253 0.19880639793017590433 0.28881881414729654312 -0.040143389829307027372 -0.32296855421166015265 -0.42844321671031831977 -0.23261547329937393158 0.36446826457735315152 -0.35059261047965017966;0.28973254809771437079 0.086254195729423097094 -0.30668871905225680852 0.54599794882214602865 -0.38191913653979292498 -0.3702870442990524591 -0.42090600049982762609 0.68519073696006871366 -0.58188533673087361464 0.26819162242043886879 -0.42026538689609599375 -0.70341848131838558 -0.19103079466760797267 -0.27571265780379194954 -0.36084940126696768425 -0.51128436090964257676 0.33365488842505852674 0.1061193024812930874 0.49572138010574973155 0.5762919511473029166;-0.50933479253864355485 -0.085612268140967187624 0.56056841803014789694 0.35539064431181688342 -0.095042490433827259144 0.32521077377507578987 1.2122955284851637536 0.091135871817006344764 0.74959354333977779028 0.6642702312493953265 -0.23945389050142873444 -0.12254755356230928598 -0.26440949632444732398 -0.47809338769623688226 -0.14657754327229335911 0.066544198587356523378 0.59010971286550817361 -0.29494340155540804682 -1.2131758119593520906 0.46986209810905182893;0.23788087193077006587 0.0076077461117432989418 0.32829862503647599947 0.19905619035792795901 0.42078003501268806952 -0.14533338436184636833 -0.55927494552381684656 0.73565109776253057028 -0.12690304119479006717 -0.21600788314228222542 0.38020700091021519818 -0.16311050363331289215 0.62198554937320882363 -0.17721406733355499208 0.35448840223263056171 -0.2687078557983879068 -0.27188863748642405627 0.12402028671209242017 0.2167193626200193679 -0.24911599135497439206;0.41619404237501944621 -0.0051381844426745728466 -0.073052595847216114655 0.97201443875727966404 -0.14589903297146156191 -0.49650974302296746465 -0.036905145684095801151 -0.18966774491165630523 -0.26557206163658048093 0.099202532117603367534 0.46305339964837760602 0.79455865081034326991 0.17514657872613320633 -0.6639525009722652138 0.36012642447143466962 -0.092562507224946119488 -0.73775301204033127966 0.035935026009484005716 0.18285212211053036846 -0.10765278112892724682;-0.077561476569535131587 -0.80387741370083654058 -0.21272333047063698985 -0.13328319369224259083 0.22281884829059264708 -0.24312069582839909709 -0.055255363997348205807 -0.30430847840694696949 0.56918831535436020808 0.14828732094418445309 0.024403571547062824498 0.57166671716340333731 -0.39696706751099364308 -0.1957667425645383541 -0.40427083885301656752 -0.67694857894905835494 -0.33105724522778728902 -0.23553535754249319001 0.4327517001434060262 0.090634686424107671621;0.3935233837996084949 0.15138716986675113119 -0.64731504583008081521 0.15166622610040006447 -0.3508589819584990166 -0.26762470695280404787 -0.16561448170465972729 0.075058094589203067093 -1.3714349763633268964 0.21801933272112353213 0.22448432425650852173 0.20104244083590641634 -0.25211778617813113135 -0.18364625179931237664 -0.25384700275691290949 -0.24881786014999238144 0.020847781986703003282 0.22917134003624212157 -0.33861163655246112603 0.64951159176597328404;-0.84048418927319490379 0.21425208083507135681 -0.56963723671887478428 0.1905732767164886321 -0.46824183697436505547 -0.1724942111346408069 0.28679228800232792196 0.38163622814537068173 0.58685463071556676073 0.48030118857959658296 0.41546973513425583535 0.57327229056136730367 0.26912354553814821223 0.049330002198951117265 0.23376869776673800394 0.0070907118220043703627 -0.28579956227664665702 0.21004444905248673137 0.40600657012872098939 0.20648382826785915967];

% Layer 3
b3 = [2.0169047546958327466;-1.6292942513762889156;-1.2466818803881143385;1.4040158685915853365;-1.0069982681786044942;-0.87418488899002133596;-0.77936479823168436365;0.44849461336383078525;-0.23313860333093153199;-0.029368555841950579749;0.071550478025474137378;-0.10561462232224751168;-0.5441869550088905827;-0.86118587417246772464;0.78690265271203463371;-1.1598398721852767324;1.328974634223237361;1.6774691689640282011;1.7152113323833602099;-1.9053511868452130962];
LW3_2 = [-0.61239874663359672446 -0.66471459625408635397 -0.63512650084195865219 0.87837900179694650138 -0.069606052212446575811 0.27008820178760728492 -0.96515680660535552171 0.41970340480249096471 0.429781477773038878 0.70508059123080735198;0.85104787813554794162 -0.35713631732203482416 0.18838327240928184891 -0.60539217626351948809 -0.71945338181011975198 1.0190018883828246832 0.36679934174064154906 -0.3167670635110904076 -0.010264142762199380404 0.85740993834992651479;0.43385512541291032518 0.91250671025889518173 0.78225174669635233471 0.60554911898524954594 -0.1359022910609092305 -0.89177518339842898332 -0.015421240109702413074 0.30044252842949220605 0.97887218249423701977 0.37757459626212092063;-0.9893762785272240956 -0.4764469706083401257 -0.48253378709897692955 -0.0041723542463207412279 0.31581996427780828496 0.61962506631539171487 0.86599164191061805962 0.75506613546546397231 -0.046475474671345412547 -0.62820263463275138882;0.95248141722348345084 -0.31762377788086948449 -0.3129501045819498839 0.54994605540663044074 -1.5425899375373881561 -0.33037863936972317047 -0.80097163381810443372 0.582696934676913747 0.82790912375815373103 -0.5419801010600470148;0.33196348401328285016 -0.22925887539673134308 -1.1939792211282687084 -0.48082917104321365454 0.2510551007212367125 -0.51539158969507026242 -0.00060672729538073684463 -0.4159735369293467433 1.1981251346058914287 -0.49712206755873200592;-0.043922243480788311643 0.31760367930476057774 0.64064156813743122765 0.94529835225048086667 -0.18996144403206483009 -0.63087672515337633872 0.7575578996465013315 -0.8341797975926400488 -0.60766033045369038934 -0.089352061230849308404;0.049938226069401694951 -0.82893428391867152172 0.74590652856854555708 0.27295029608139864674 -0.78454904154276894346 -0.59301315306947632866 0.57824223636192062514 0.15923055621766912804 0.60486866109206660624 0.21589730694611700135;0.72193303346094539474 -1.3348200251172421815 -0.38615165461266237612 0.50724670624646694961 0.72665840747336474248 0.6268448251406936178 -0.34665963180334113947 -0.20917220110443537906 0.538242887748002663 -0.47846692423711012498;-0.24838451301873887278 0.63594704365545495772 0.27957097300131394935 -0.701424547484758798 0.087687236717222477589 -0.60113261356382485801 0.072211583707230200813 -0.84368338872893500202 -0.628607170187965969 1.0649847321800092192;-0.86367896194639637297 0.10637574478038730463 -0.053444980033617306425 1.0738702647083477881 -1.0493669072387985519 -0.36553162279922779554 0.090643915025989549306 0.8565446123169655479 0.52796739312812013267 -0.44488028238782767465;-0.69827869000909004171 -0.60487546293239868866 -0.31071221803435916664 0.89356731783283538384 -0.28546948653386783334 0.43287220426741668255 0.23918264530155983194 -0.68253035651270232975 -0.9093034128434887009 -0.06595858724436942655;-0.86219891351807576019 0.33815548344233514744 0.320181995579186085 -0.77553732909668382511 0.052670061288543248978 1.0684311254417959702 -0.17568056907054926952 -0.49195791974717772987 0.4397870656891013641 -0.5218709171972159;-0.18627686709954077715 -0.27247466291424971008 0.36603769927467721956 -0.77003109627580501595 -0.66357903294465803157 0.90854192294625635284 -0.71144346695114524248 -1.3785879052829954627 -0.026491322826609053215 0.36273193923414026596;0.72419454658122051072 0.46806344688216644512 0.43661595988845885996 -0.63326838469507606977 -1.3367435996225829342 -0.21744429607162454876 -0.31269773921224253144 0.15508513581869493025 0.41110592514766658434 0.17930694506451380632;-0.36029518385272107928 0.90951462589097553657 0.27047491041784776922 0.0033296436732333407893 -0.071158983562802549661 -1.0763921293486606867 0.093068893554081030817 0.74430105535629453861 0.12647772000132787018 -0.30741907434445958636;0.47713075706005303456 0.074129872185568490561 0.18897503730454839888 -0.041549964532309816012 0.23476438920967351853 0.83890162898467246499 0.9298689640529993472 -0.34479486590819757863 0.75116839242966326751 -0.99132059523213866825;1.3756188135812272844 -0.28681049869288410825 -0.48092101203150472433 -0.48598771786094963065 0.7566261092026886903 -0.42904836029547199772 -1.224506704995287576 0.043091299278830270947 -0.98980558723038991609 0.43496316264006468222;0.057532488898798299359 0.35647343235878087286 -0.25936954276201296121 1.0024378318723761172 -0.29293136152133680827 -0.83672994404871448015 -0.63938441904245413294 -0.35374634662680798369 -1.1612794836939894783 -0.321845915705879837;-0.067374371510573086153 -0.96440994458936069034 0.19362983586502111044 -0.39299572869195514846 0.54064206392499936094 -0.60274406755254339441 -0.65157400937161868981 -1.0012353310784847249 -0.68682298139079644983 -0.12441057529797923398];

% Layer 4
b4 = 0.7316120728165815823;
LW4_3 = [-0.74909374480903034854 0.96025860414917407759 -0.55334405384661466965 -0.97599845506329074851 0.71640291684821333362 0.82981352553451559473 -0.20476176101329379708 0.37321821764782053821 -0.47000039149256261917 0.16998480157866435736 0.65075036469643077197 0.39658124117295706634 1.2201658723161772357 -0.67247216095002337877 -0.3040282942844414471 0.10141412572208477472 -0.17513772816896036599 1.0585439091950989976 0.62849455708652102182 -0.35215891960330081289];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
