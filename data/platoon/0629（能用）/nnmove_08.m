function [Y,Xf,Af] = nnmove_08(X,~,~)
%NNMOVE_08 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:29.
% 
% [Y] = nnmove_08(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.43837835362387;-1.77671183213846;-0.522218457189092;-1.87191152625995];
x1_step1.gain = [1.67667075032433;0.567049054539722;2.07268153958104;0.53194555728415];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.8833239402420054454;-2.8768165937541767541;-2.2985590578459551558;-2.2777934737367253604;-1.5317038431597578274;1.5767756395089358445;1.0253252477119698671;-0.81377917754179884824;0.12713877443745688622;-0.28442972409174360759;0.091775168146646324274;-0.41155796346237588645;-1.1864896320577613675;1.2075879603288233177;1.720708623764116707;1.7443613510033491032;2.1398798444614541836;-2.5242016260305186748;-2.6483138129027334884;-3.0094694494193694467];
IW1_1 = [0.68320016502903546662 -2.8524557662565763749 0.24113831969820662127 0.62492158688668675293;1.7956374873568916595 -0.93785521049643083558 0.79308003673796800825 -1.826715171590397091;0.67114671590935803813 2.0619002142380757903 2.0687424966899348178 -1.0537494955483182046;1.1971351100759637376 1.8159690728378217184 0.48210217309421327103 -1.4717568290273568277;1.7812224916072789682 1.3974248616705069459 -1.1900934313144793109 1.6995367687972533499;-0.90238768542612435297 -1.6887082602931797748 1.9359350023903003635 -1.4062584013945045314;-1.8002049583569543767 0.30086312668147580096 1.3996013408558112268 1.8564498431494664832;1.5117314321111230413 -1.9043338187706289055 -0.40760778258850488553 1.278438731283213059;-0.2491198438031811957 1.3209035567418101476 0.97247215367125783292 2.0768064904529950354;0.83062705233302669416 2.7738537095949533651 0.35534509600225477888 -0.53251734996445121428;1.669430392292502674 1.3670285455109632 1.289293009671715895 -1.0001501526986404933;-0.8192958955959828149 -2.5147787899295193093 -0.70600544636285700317 0.61337924980043878609;-0.77473831459733488725 -0.30554159018408544313 1.4576530149552702209 0.88798611600508914332;0.32478080931333014325 1.366293027811238403 1.8707507591690859527 1.6690369662853050681;0.26729582443965432814 0.046028534686557869005 -0.70504857285003563749 2.5884457150425546068;0.79365316262704743711 0.23891057885716004971 1.7681328436189338582 2.3265292918456244031;0.24625139029974060789 2.2892539613387046238 1.9304476372921592908 -0.045972528501427342706;-1.2282606171083398916 1.9624189328091816709 1.7698742049238673779 -0.021326258581040893197;-0.36117722352551229203 -1.7896907887565574047 -1.48539722818439901 -1.7168979169919873495;-0.78060304997631513313 -0.78283580717604683841 -2.692789564865956109 -0.26739064350193719743];

% Layer 2
b2 = [-1.5470750977565346229;1.1900396744699976992;0.94591639934613624963;0.60805994422830811352;-0.20409771747394861441;-0.18802938798992527292;-0.533528047592931709;-0.8057101470088681161;-1.1654503435939536082;-1.549794098695366884];
LW2_1 = [0.084756544066490274725 0.33487658334310521635 -0.67879827925553781753 0.19348674048583833218 0.36681993773364490741 0.39765558317781513065 -0.34537434123049021162 -0.020478786945592936108 -0.41650479447536858935 0.45950888701822750759 0.23847321865333814817 0.12802487907392229305 0.1232339294513133815 -0.26136235636322463494 0.27941568314213222068 -0.66599988956749456293 0.55896906541127877599 -0.2595092347135987132 -0.16405007917631678205 0.48221169923219814324;-0.43429482325979296142 0.16382560072462487577 0.3275122739333470312 -0.32537580100488200374 0.17823345705440002407 -0.19823743333403268108 0.6614118079663566796 0.57196726172381795461 -0.02195956734489386622 -0.68522400975469954787 -0.2275584454048788785 0.6348346149777367442 0.72042916853724081605 -0.21165502546829875752 -0.15708517963753418356 -0.52030525415712780557 -0.34433934534439647468 0.33629385384269550041 0.27520269438855698985 0.2773550682528544975;-0.25736406421298740899 -0.58777556597424474027 -0.22363399267655503788 0.13215456203819600511 -0.76612092898806904984 -0.039260698997071949434 0.32724043935547825201 0.0043560824547924873601 -0.43533770603973725999 -0.49445681815865383246 0.37987603159844013367 0.12406736285646662032 -0.72652338683190320623 0.21184858632602221462 0.16871510140093295971 -0.012335889265762711373 0.26172092478887787337 0.3675350527323157368 0.38389619445286382593 -0.11796434787918481935;-0.37019361488026714113 -0.6673549252120564157 0.1119992960561432549 0.11443244033229560408 0.51462210523056417522 -0.087868117173805687647 0.1223629754805997949 0.39007138942674246529 0.33222396058114600503 -0.13461344484706161406 -0.52997233483244499119 -0.1912992441194056592 -0.33360748954013480505 0.37990104931034746061 -0.0018671843495927792356 0.30490560690461698812 -0.35530940407936650871 -0.37474162797038035322 -0.64459359781088765295 -0.59166087845958803548;0.16263778867147318796 -0.28184081017172329942 -0.23286575566927200653 -0.020381855820663499768 0.52134330156260166866 0.20584032582556102686 0.21858882665894191488 -0.071147487889288957286 -0.46650559567574678699 0.3944189676701238545 -0.43292144133342524981 0.6030901070189000901 -0.30345636191217650879 0.13796769537146180706 0.55691274216868846825 -0.30055370622186372564 0.51148556427075486663 -0.29651804675001702805 -0.44482287141697207655 0.030269146564882852546;-0.27479229775345070941 0.34372733887531931041 0.29647156879988456613 0.68600609614789265223 -0.015809477735898962159 -0.84692564224417632435 0.46731847908232182487 0.16814290599838385698 0.58143516234187397895 0.89767107018482517056 0.31667580426811303695 -0.23182776432329846306 0.75270750510450734616 0.047970225568696747698 0.48068880671988045705 -0.076585235498831519263 0.24517689356477162521 -0.49719278253712312354 -0.83768070423189888718 0.33720031733831673515;-0.37559194949691376841 0.16566005435498670773 -0.8792207736514742189 -0.34957419038286363655 0.25751167008429592942 -0.076687371073736076976 0.050856844013187310627 -0.56220900109236660036 -0.027734097124302414805 -0.035924594981096485968 -0.071908549512230537926 -0.38573859131795479316 0.59500891575438619174 0.4538893945464971269 -0.28729394526068763316 -0.63136142155803032239 0.74388660714819354602 0.22626601326159778704 -0.30895073173925452492 0.14314876961120348575;-0.5003888030946690435 0.38508378574654589244 -0.55725193358023838996 -0.43222855378359659184 0.22076799153526860398 0.056888508096273181225 0.17485163490387242713 0.037243209356318661418 0.28358218789511602242 0.28687901907372759247 0.48113578602221840352 -0.57811194735691384672 -0.53737484681984393209 -0.36715731915595628543 0.12878313449215986197 0.057445147866277412874 0.36761529255485186907 -0.4565288332881459743 -0.60423561977533524203 -0.1257252677704086552;-0.47426662444256073581 -0.54263367038522392072 0.1012717576096965888 0.40631566781886857553 -0.23284122451085370598 0.51581374797346968286 -0.29338385286532409069 0.41826861313328456138 -0.46931840679476799494 0.41000847997026346192 -0.4853084636541829533 0.7116320069012749272 -0.27727034758910007461 0.41336187685775249712 -0.17463578924706235629 -0.12090411711172641129 -0.01009435219688938068 -0.29630783804484539523 -0.12181849132586348994 -0.58467191630112691492;-0.24938880222725925973 -0.20899210390744213384 0.31033539530532783246 0.64639552996145921426 -0.44840002447007321074 -0.0058624701864669892526 0.074526561003396440963 -0.37395038481879899761 -0.5797219025196248543 -0.16235641054325389288 -0.2354126743568256408 0.51420768962419172166 -0.10313275510282807201 0.0032466392884165466703 0.057920576580707025527 -0.50431000729946773298 0.35951963778319762088 -0.4698679446088948608 -0.3689905306545711583 0.35979708780883945529];

% Layer 3
b3 = [1.9659298559849480714;-1.7210184238955605895;-1.5071656373233492943;-1.4649877673648310505;1.217259066681055879;-0.84550240192562942099;0.79353571238644127206;-0.34633206110013081691;-0.3272804130668068856;0.095637938867253288744;-0.10176061026341962079;-0.29223902683638747213;0.48822099277481251223;0.69034087602031068975;-0.79929093484670810099;-1.0411898543841144882;-1.2535018416456531476;1.4299062961747561751;-1.7256926714878380036;-1.7916439937082817568];
LW3_2 = [-0.59911572398756607338 -0.22562850438727177771 -0.75040509019216383724 -0.11781140576862673963 -0.28168823360383915544 0.42105514076600958351 -0.86790909405715299663 -0.039996315684453699613 -0.22239108459830472797 0.97886691728339814134;0.039828941603474880828 -0.81002571292416414295 -0.86529162805327453079 -0.69162770225576830629 0.24904229563283764026 0.63153678454922823615 -0.037912491434024545023 -0.80861331297125960127 0.73886957194596714071 -0.086458902203391294061;0.53943504885256343684 -0.82436070236617797757 -0.43012729576414715504 0.52084598464025944065 0.72302670923559664296 -0.21902771883556385046 0.70537856688002598116 0.75247572359223557914 -0.83404476504147273541 -0.35855922106606558097;0.21603010591791421691 0.54580887393820698428 -0.30007530700443357796 0.38574898871914636844 0.82350453554734703854 0.62355865818842237669 0.52308587992454513849 -0.75651251404203989637 -0.6727425313714472388 -0.46688830335365683055;-0.55405354053221855803 0.078485551993024024742 -0.340223425733464091 -0.63799269545629222478 0.82933936150212339555 0.23884972548541591464 -0.62698937754107320064 -0.13239348885140195256 0.84643597030820005855 0.80009018467098402816;0.72445231940008303351 -0.34067931793361572179 0.41047983729390180585 0.71021691480199278246 -0.88591253185633078715 -0.43236298612804108243 0.19138154676564708701 0.3715703444454875326 -0.88655111150306842305 -0.60490103992317845183;-1.0158874855458046582 -0.34998510768138085814 1.0169584035860592675 -0.43692985721614940875 -0.66381715131467167179 -0.39984853018731203456 0.43678772039548902084 0.35699071095765699813 -0.091915371433704165516 -0.3260761615384664136;0.15713936104710490849 -0.25673868184009684956 0.64388641575004801343 -0.533228884218420629 1.1163114429213087941 0.67865311439579878439 -0.50567526221746428305 -0.64393094118382476765 -0.40381031651835813667 -0.77162841065455467504;0.82279861498996187397 -0.599268794332947774 0.26613230739068016728 0.29654652733134012621 -0.82772704698335286544 -0.86281988475400051009 0.24233497586563720883 0.01157054806769867647 -0.81737550890068466636 -0.43069799380015838519;-0.082974699276178009999 -0.16204891634987267368 0.51494960445437976126 0.89759669277438836055 0.36214557525876461819 0.65053107579605051747 0.91873631005760558743 0.64889273825910320781 -0.65521540480844830956 -0.42929801243533893818;-0.11180277706973090757 -0.97535223658024539084 0.52688101398077880066 0.6957969715192724447 0.71482479816229926861 -0.73213951632876583808 0.07071132816906505747 0.2932782723609811959 0.0090738118242381440859 1.1004073559687237438;-0.73078427418723923559 0.70589876074568380648 0.1661394324589725302 0.27399097838345265465 -0.67440517337827865507 0.5521852514426026648 -0.59640422766121203857 -0.87642457614264146493 -0.14206404279358511578 0.66867977277076395826;0.95617595203383654034 0.26219294997658626478 0.62988401266158311476 -0.41144673717107416167 0.62981525889538025886 -0.86149236020141550796 -0.51308776118125987153 -0.96979288243098449307 0.23303169000729426208 0.2983597116686487194;0.79636813690179653058 -0.48516599964257911548 -0.27478285330022317323 -0.61541185625273298054 -1.1089324690273492102 -1.001484271115978153 0.18384997468598099357 0.037167555391648302021 -0.50638853200185052206 0.35400776002040174051;-0.030656100168278552914 0.14905057025079593291 0.30121798233737795414 -0.061591183847953714925 -0.3554751715362561848 0.25696965744441041535 -1.1947541247693040933 -0.1333033751123900712 1.211778237762229482 -0.98245756286647079047;-0.31793123657116856284 -0.68183178268421495982 -0.69772583278471411727 -0.40782857550990125883 -0.75321560071446980178 -1.1721849554040812968 -0.27852203954430909683 0.0088548830284575011373 -0.54444920423900589057 0.17468617522694560029;-0.72777948027184768964 -0.46328963267583039842 -0.33705080499093581503 0.70510856235383723156 0.86769134725075081072 0.5297767826306613026 -0.43490501067860026785 -0.57019788863116716016 -0.61021500501454306598 0.6231801247973953739;0.82028071792033041554 -0.26540663055163532524 -0.90242793643281726812 -0.93785741491033536299 0.64425131403578861367 1.0874899954295178528 0.20111190658381564167 -0.25226015796705281158 0.42622969245102482194 -0.15955336140339970719;-0.98153358598892659348 0.45101125802224162342 -0.34367566489879958214 0.37500412485917355987 0.61538390959583078033 -0.36095008439843695447 0.59148131027368966439 0.80756571071359994907 0.65159556351087122295 -0.13481284810653454409;-0.91132148195226692078 0.28015632073927576595 -0.68178306061060256482 -0.24275126465670482379 0.98754701135133959866 -0.55549322696764680263 -0.27612767249419267745 0.51458758541216120808 -0.12054548779501669808 -1.0592751913560560784];

% Layer 4
b4 = -0.29825406235220164319;
LW4_3 = [0.20352689797347292555 0.71666811547984565767 0.13953633112962168794 -0.31628923112909335114 0.34629519884612630642 -0.12189575007053117528 0.50815207905440029634 0.39083552757804140843 -0.018532572989835523203 0.86933203085950161437 0.49247064950936864092 0.31555990613090961761 0.9367676458871556644 0.84739529299705829146 -0.27319680041558053185 0.29046018385936905881 0.17125988588993687478 -0.82563367474877202845 -0.2142763297540261902 0.28465547017363335147];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
