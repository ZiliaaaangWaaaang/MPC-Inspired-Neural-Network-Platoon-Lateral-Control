function [Y,Xf,Af] = nnmove_25(X,~,~)
%NNMOVE_25 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:46.
% 
% [Y] = nnmove_25(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.9323440758330381328;-2.3097778354125853006;-2.4025667162352837281;-2.2573767253888918916;1.8871059783139620958;-1.0562255774393376484;0.71988822990032308446;-0.66413851415645064336;0.19801061481394627295;0.24182329883340930587;0.10166422834378925633;-1.0480461404782399626;0.72063736646578957501;-1.2422455350129097962;-1.6595960344528335462;-1.8985108783025637091;1.8324487758566752049;1.997184781543333898;-2.7235906170710206808;2.8655698699263023599];
IW1_1 = [0.18560224554905666028 -1.3055359527662011576 -1.8411378848838351185 -1.9939816092725988206;1.7857808269400743395 -1.2017666831213040801 1.1470358190504563733 1.9485985277088049283;1.076198939178708569 1.3961764013278843422 2.3409953443100404158 0.13152242245838732804;1.6257583641699742127 2.0210682075684451853 -0.45713056489090625467 -1.495492454803771798;-2.3883627858627218821 0.32324981502309757531 0.8745445032243931438 1.3058772944912775404;1.585226610187779217 -2.1318423291954609056 0.95434277129108580073 -0.56305956131019796462;-1.4591090629105436527 -2.3251388613244108328 -1.2400862817418150108 -0.96488987790091829133;0.59958690211797915914 -1.0755042034009363316 2.0906318165359341066 -1.6515840404033168554;-1.7409369653100903452 -1.0109877817969656899 -1.0747403706058429318 1.6304936322056651221;0.59222360558053643853 2.0029015877748066465 -0.088072821019424846201 1.9853000267685660951;-0.40498816900168299604 1.7629827947919025632 1.3093952729734854579 -0.90607083637951157939;-0.29025976277698778416 -2.3282226180489513645 1.3870529772115234302 -1.4132667131744778288;2.4719688254750189493 -1.5120806390447698586 0.12398505213380629775 0.45498857002011267037;-1.3517210501739906903 -2.1616897990045438327 -0.48912353163861371774 -1.6596171355146700499;-0.31077062132769195379 -1.0882017113181048362 -1.8344317949355128938 1.8557717072218691268;-1.5738762096245459965 0.65984207730433053207 -0.43475708661633050145 2.1145324261872855409;1.4954262609452007027 2.2432743180070788824 1.1268093541541783775 0.84811366171928359581;0.66349903970137436016 -2.0712617463432740905 -0.14806893274183260956 1.9079332262192219005;-1.9160571473859364655 0.85409577285761162369 -1.3114191007125048927 -1.6855215068125324329;1.8432283315226662967 -1.0584413449003469143 1.2146874318981859542 1.6405907796073091465];

% Layer 2
b2 = [-1.5708053563324684276;-1.2342378080260310025;-0.8761024052120580663;0.59905370650248646047;-0.095701283657182778519;-0.19641045671131340811;-0.38286976964775032428;0.95021679165940842182;1.17621528506314732;-1.382099840317068562];
LW2_1 = [0.37615020738168658543 -0.09042027301953427243 0.74437312049802206726 0.39747910705006234133 0.069897618607719980144 -0.13175820156462358934 0.0056154109576511939544 -0.2467375801742198449 0.14234674640161781856 -0.091454953699004082335 0.46076965440598516288 -0.43386136160579591436 0.48154463766646310452 0.71387056588016228886 -0.12018858004055200939 -0.19131263631730513475 0.51948934570213212147 -0.23989708987282767905 -0.305993173259792417 -0.56099115674335064963;0.23517366690806790208 -0.25218910318536108539 -0.45489225659931115109 -0.75346784800687360839 0.71284199118745061874 -0.18866780002406316474 -0.2685903974807762884 -0.082594121049687427294 -0.10064619859776227639 0.054567019000987336541 -0.12575199573005041431 0.28870309202981209173 -0.51447499471269819704 0.40864087034808288523 -0.53793995058068988513 -0.79473725103854941931 -0.51659625307964018859 0.34842409344970648455 -0.14412817655027024277 0.090652619569639741881;0.56573460904429928586 -0.32393061929554584077 0.033577896747677769829 0.37317397406168340002 0.41945107836115180788 -0.30390637733965519818 -0.37133174328878532089 0.49889434579032987394 -0.36033434738575903511 -0.30629997996762114987 0.14868178501680320847 -0.32842300344628222453 0.28251128460829361133 0.50767505232091614253 0.045208139607057259979 0.34648222007918533238 -0.181241446624289676 -0.071095988713215443888 -0.48558324140479125486 -0.53470568944350616025;-0.43770628980044401501 0.32371204921206742089 -0.41922948072878518655 -0.04190960395722090337 -0.27845442768123807031 -0.31866885774341191517 0.37060610811448108093 -0.012956109795244740227 0.14116402656921528402 -0.3247122149680279346 0.064067890387571463373 -0.58769106456175479458 -0.46939931189496819641 0.052608262754316376109 -0.0047970383785539364579 -0.6926711154029560058 0.58639770177775230042 0.14368937350992505575 -0.23557867793927761424 0.25537452199068844116;0.51022417997823610314 0.19650329357513285355 0.15879968647057957076 -0.072706100858378128193 -0.17067828620222441627 -0.340146958867885707 0.75895017607071824095 0.58768654098206407621 -0.11403399087664368994 0.43403965218307921647 -0.028928526502089890043 -0.063324060475823465421 0.58441287122526364151 0.69287982321211161185 0.18061921726016721967 -0.619600836487614548 -0.093121121859198144333 0.24109534962226419896 -0.01152069356241714089 -0.056001058125472943927;-0.42556589871154931748 -0.23723516145973161384 0.10041944703466776367 -0.32206430661066820509 0.40629944875465445753 0.25018758453659473151 -0.13884461285315771728 -0.52130191168683670533 0.041134336343877739295 -0.14559416466416030822 -0.22933673355669614846 -0.34678790567084455398 -0.69164191838296784631 0.41293415730164917399 -0.72619861319177403391 0.59516423325062151051 0.23696040050061459303 -0.780676853567047635 -0.22446809942300574581 0.030125339392201924693;-0.12991828189844312202 -0.54429956769770670988 0.20081596396168815977 0.51472814725224036447 -0.35630714747043523705 -0.16323048939844814198 -0.013584143623650735133 0.095981876034521407259 0.17710694841443333503 -0.13180850477405300913 0.024351391294636190454 -0.40679030033049562443 0.32884610530776453574 0.96376762156331585718 -0.1359848185912041485 -0.50909529523363816761 0.2251269336176250635 0.23088295252405716118 0.41158344750622649633 -0.39961675842031629813;0.0044214090715766953682 -0.38795444479309948438 -0.067034418423387920338 -0.51065279637831062498 -0.27947339769301765555 -0.015351212644090129686 -0.44171707274577476365 -0.38774830966780049479 -0.56239013528927739305 0.10300133667333855048 -0.27948666900122987045 -0.13234327118334937579 0.48653638511429292413 0.16523200921694305987 -0.52752304230301805266 -0.8003499028208469479 -0.077536170098726736599 -0.45051687086765868084 -0.58412544150961964728 -0.36314154173558432781;0.12551952355653894777 -0.21124678920930858861 0.10560255496706481837 0.37983984818554850094 -0.34758722930106067395 0.4787261840848840988 0.4567098309708718662 -0.17081491285878688813 -0.15084269658318891216 -0.067280465469886197027 -0.27327096421621455136 -0.16892959523289896584 0.061229314280041621799 0.29835779078377899776 0.51643810815548729654 -0.23152560272558950216 -0.67609983467996326301 0.50574283784443074818 0.19732645889605629486 0.49183340195388824956;-0.15378162186627930552 0.64236757956628420807 -0.31429866976614601048 0.14010893528676132691 -0.194326329484931698 0.17110778076118929314 0.75050235108505192194 -0.10005501364399443931 0.65168076924065287958 -0.10904735642453761146 0.079446775644022568641 -0.71048224089231137857 0.0048109838930890623521 0.57780122933239186356 -0.57840318241088017892 -0.42886444877388996133 0.58201177249807534153 -0.19958191800196745103 0.23033933797294373069 0.37060019711843478207];

% Layer 3
b3 = [1.8636444371773897011;1.6837500392617743561;1.5189366590971915549;1.2606782798186768613;1.1933033492943097009;0.89470441264871636289;-0.60085729501353402071;-0.46019192829636956787;-0.1399972910948526772;0.12296368912355416791;-0.05811536590879932962;-0.18959348673744758074;-0.41779712964620113747;-0.81114586148034251156;0.89525111799778622768;-1.1040174051931199717;1.3421642879743183041;1.5635656141153984056;-1.6461308326434762606;-1.9253458667160823214];
LW3_2 = [-1.0198701340955529382 0.42891306439173748632 0.64668460285708373458 0.19673559382272165497 -0.071407341425352641173 0.79399919644095684479 0.81995815786686931936 0.65159804398782394941 0.02303890175542594454 -0.44347224577513677524;-0.43709617430590408382 0.26620469731255841372 1.100143159418497607 1.126010794786856728 0.1605531176335353305 -0.44984962788330967731 0.15808606743832753772 -0.13405950568767086017 -0.72803424298998697939 -0.30009784303838699104;-0.19439804693896844956 0.94495305643233273862 0.67198035804591105258 -0.51258079083717134061 -0.82346815441010534631 0.23920957961436262185 0.59772337932715724484 -1.0031350068805238163 -0.29118611866631749496 -0.087421974162255583485;-0.47172461671904464264 -0.56104015255782402338 -0.26472163143338500735 -0.51858943276099322972 -0.020476526527020547097 -0.78573616347269148452 0.94249313635271569911 -0.50416107597757542358 -0.70616893875677910763 0.89329811499545930253;-0.10506357700811659595 -0.68947942808699391737 0.47428194778801324727 -0.38764723886794255625 1.285310287187461098 0.47109495941298140664 0.6231455585466069147 -0.24537958180202892877 0.14145676331755818733 1.1867390018810279884;-0.923303052829800186 -0.065045747595323333279 -0.091168476878014687026 -0.19895372362061755633 0.25343734021676994628 0.78184888794952533964 -0.62821530663233826619 1.1938548010126364129 -0.0014790016423272865989 0.43059719382851158187;0.56234380156014074359 -0.53547782465592530521 -0.79453876477445184445 0.34733858463796379867 0.83352581813588799697 -0.37304514305478703173 -0.80161742708372796251 -0.62446036633387358439 0.76178097904475250424 0.40241608059377032003;0.011249587602459528574 0.10298035670273598952 0.79348350772282116861 -0.72470945085757676463 0.29350235845228339615 -0.79289306852602292608 0.92012778157884289598 -0.27946990074598532239 -0.25061718028666579716 -0.85958761451050158531;0.027916539492356309132 0.07236828929396234289 -0.03604639308961210542 0.9957638229189413881 -0.78825044487751194655 -0.48900230891042484327 0.3166308423246499415 0.15757186203893069898 -0.61722351819740883805 -0.82111813936554534088;-0.35077118473751367489 0.7527758094204390904 0.67622435897368382562 -0.48750012897762018405 -0.71220872947720270663 0.33946411184509045489 -0.60010803514869237585 -0.58530992548026783417 0.50976424813251886015 -0.65038976469405618275;-0.36391490884040517129 0.12759421832374354122 -0.59034371895204673653 1.036016485373785434 0.77380805268709540456 -0.31631253381153112691 0.27421561365415064726 0.72728981803176395715 0.16027361845872389878 -0.98742923479013067212;-0.18757517110472163302 -0.12009769846199236376 -0.48124923466541530415 -0.19740172538732281282 1.0175931011327263853 0.48602762430697293849 -0.62201680168076922683 0.74125711409689143405 0.78306208618215789041 0.76486310307314397949;-0.84562588425824547489 0.10203773666926735375 0.14711438126384840386 0.93701069908649692319 -0.48710148204248349124 -0.78701606346424168859 0.84044752032961378418 0.65646530603485608868 -0.72238231645880990328 -0.48311161344096714698;-0.30953437156696400612 0.30075114320715262695 -0.040586282452708670465 -0.71913429630719649666 -0.60154573400876831801 0.41051658911820487763 -0.30747152995188203883 -0.3596243098498482782 -0.58318991065447589595 -0.97384254060635089267;0.32968402657609879869 0.68899929984640950753 -0.78776287975118919338 -0.43261902720657652299 -0.44624331791234322919 0.34902417936227214668 -0.60852501023309302219 0.86846737081945535319 0.59651083033698659719 -0.61092984507400260874;-0.62342940994127526988 -0.38827184041569501316 0.52317330863803102048 -0.57767843567691301576 0.78887137011248820162 0.34740881259447420337 0.85995554314485589398 0.65168678073456198785 0.52805303336011266691 0.47445362627645215614;0.8573321487467362445 0.4396248724656434681 0.26286550166472244516 -0.13700669831387923825 -0.22278468459196909546 -0.75075146593708685927 0.85019040024538916622 0.63673444882623708718 0.88287610593671239645 -0.24958029084660063313;1.0695601584145861818 0.32689773484555706418 0.18350450912370533385 0.027847887567975088824 -0.38456613377717974167 -0.34989182323982126466 0.66049148180961780863 0.056215557283130795918 -1.0880776026595875283 0.24292704496443745521;-0.7890983198200332005 -0.68683296827109852067 -0.89742495448617121134 0.58653947999197719732 0.47530910406743259733 0.5230563293403173164 -0.32521332573276806599 0.061367164361614531809 0.53003518018287221203 -0.92762749348281725581;-0.13317704762838925014 0.9237259703224934837 -0.48241769750429075447 0.13743904713170720933 -0.73339225517749306871 -0.89030849818666191187 -0.006966119079430193109 -0.66738706882633258566 -0.69223630309002748273 0.54154224726092847764];

% Layer 4
b4 = -0.4703839797189128813;
LW4_3 = [0.7829014253737301976 -0.52975912907173439148 0.85818877547717442589 -0.72174766860591210715 0.87332913583399141011 0.3514808493144984114 1.1353795996131927915 -0.27404484913269122615 0.65781194599902992337 0.021661065747862289638 -0.9168385434428603098 0.11904796206402841474 -0.76505121551928467749 -0.97061846821510266992 0.13095375041144124983 -0.025636994223051462471 0.23162857925213278798 0.63946126532645441998 0.67688102160984242595 -0.29148358613958175178];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
