function [Y,Xf,Af] = nnmove_12(X,~,~)
%NNMOVE_12 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:33.
% 
% [Y] = nnmove_12(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.581224840168548;-2.08798180279202;-0.533403245818273;-1.89546903030855];
x1_step1.gain = [1.49735732495204;0.473316379586819;2.00103198696217;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.7645411704957405519;2.4884242265382692239;-2.6315019405595863056;-1.5757356674338538483;-1.8918128053727618632;-1.6035640631734386918;-1.0532401371888957531;-0.7701164578031551855;0.38167760812481010824;-0.5050538957489502101;-1.013432033596813886;0.51996016707233994047;-0.80602723532088194069;1.9860745722337154184;1.8489790472847196234;-1.6988119316726972841;2.1709831716035279392;2.3067569311120501574;3.0759022383691552172;-3.0610812136909113512];
IW1_1 = [0.16790105778042513363 2.3252143020860613909 -1.9033418601052627395 0.79859283854186291496;-2.6336373274379138998 -1.3650224002748034824 1.1169543671376680471 0.65582630124102314628;0.6463581874289231477 -1.3928616110175844334 2.019641593676127389 -0.20893596098857400434;0.93960040462619109913 -2.1197699889905265991 -1.5913784347203507874 1.0580435538573067511;0.48306464796541032092 -2.5251903881657185025 1.0590303674796426314 -1.1940416772023692005;1.1791166687655132428 1.6228813880118433399 0.39054838273936326454 -1.9133889411831399574;1.1801910277287668283 2.3096933568519530944 1.2719975761082251697 -0.37805345593231531875;0.33494949282767166876 -1.3881122777925036793 1.9256644813108871883 1.0461758650479531241;-1.9139064450484661872 1.2263651741781780302 0.083296041781019486416 1.641664681908012513;-0.35370396674781118262 -2.5908857819843742476 -1.0585055075229889976 -0.62326730171507205291;-0.42902242429526588063 -1.6855624389613024228 -0.257373393537680073 -2.1086479616463251752;0.51558031986317376383 -1.5134543369695216963 -1.4147681329900427816 -1.5784735902519437811;-0.54114150791303772259 2.2231032272966886332 -0.63800384073522065087 1.7485467156243277298;0.64326977877055724342 -0.14178497966797631857 2.579247025458454079 2.2084001986565198195;0.50147707217942072422 -2.4969615454333129456 -1.0401293014947619042 1.2209644457965036501;-0.13911113046354270373 1.5587303961066314439 1.1312824034990032196 2.1993831925754365741;1.7100701160087961039 2.1811784288709392676 0.63494753809495907415 -0.040333452389931655213;0.11808276214241651692 0.20136021342340493234 3.0572992205599103244 0.44782275061574916553;1.8627855497056078349 -0.49965924843557174562 0.29907208785601785417 1.4733660085454420852;-1.0661131626182160925 0.67865030415986415946 -0.59290949385435676167 2.5303622609234968088];

% Layer 2
b2 = [-1.5676660879825436989;1.0958630292833182462;-0.83574275977618694977;-0.61843578706755486518;-0.23130295832045461024;0.037511379969459891781;0.34246531715932226891;-0.83295235236619458163;-1.2480399703836562164;-1.637486546612789251];
LW2_1 = [0.48848540970410936346 0.0033948430314937943705 -0.38290301071914578657 0.29193876530972723282 0.25305532335538338806 0.29191446722968938943 0.14910298443381153621 -0.4124508709179924848 -0.45869092986286347235 0.18113362267858887367 0.24194898511553314391 -0.29780493960946369247 -0.41690990312416026375 0.0046018188159086762662 0.57493795241895628845 0.098527126994226471579 -0.47099907812390939821 0.16036457126784109395 -0.60419004765610151431 -0.33409369040640696236;-0.4941264410715495714 0.3756205341256697583 -0.30996337431832521325 0.49030419535901081929 0.60366841734857812352 -0.31961901671464493235 0.87140297171136704701 -0.11245463335392949511 -0.071237413165137972171 -0.38508740297749255443 -0.26811832148350533966 0.37555671582478700188 -0.39472557831935045636 0.74687490468603667804 -0.15000667183719706976 0.39075568622658757301 -0.37517206757398974259 -0.81041304653795187551 0.2964469770614507893 -0.31483908528757087453;0.090743029944372763373 -0.6741178005617648461 0.3328307433843243901 0.51912825345429514101 0.60124105646995029684 -0.56691897352129583254 -0.089949778628777413148 -0.34770692438181388662 -0.41275604693591300132 -0.22554013282135734753 0.007785931491245743144 0.32001726236391236924 0.12966082084942853747 0.24191656906498501534 -0.27054986552794113575 0.35760081862823228649 -0.26862165626978923294 -0.14437540368619852793 -0.43145661225368653335 -0.37158007549178484474;0.30528372757560795492 0.76771579304532555632 0.23939121561871673505 -0.10861857087496532004 0.024415270044920230064 -0.88236589895480355139 -0.34002848619623771143 0.11029793871251172832 -0.42119748696199338367 -0.62301482301695987331 0.57442591088201333527 -0.2294358018004118982 0.091857432766789912093 -0.092380567064614407813 0.48893466973845989276 0.27327385649595653527 0.048073886832057599605 0.52390637767749748122 -0.43544047544600350541 0.09013408477683736153;-0.3541446192091731171 -0.80043539142263553376 0.23181697228755537843 0.26951060554524269852 -0.24705857743088216472 0.30026625086101355055 0.40187461265264806665 -0.27354535735176221944 0.040730453592203182123 -0.49881076087108533468 -0.3780341716537236052 -0.52479848689181685106 -0.49406441378237769824 0.87485026920834452202 0.080779906143084639902 0.73398955159031775697 0.066554861878104429329 0.089957514634928820163 -0.48981551713147569727 0.34617835925427975496;-0.60337936682353299211 -0.22185699324580898661 -0.16693793554515493072 0.49937148100386902216 -0.090794011456242343372 0.19234671013417567464 -0.35326308948614926209 -0.032452454984727936715 -0.13283249517618231361 0.43283197187710170661 -0.37049393905916572223 -0.23449647439469259447 -0.31740172725648879704 -0.52882809126694307889 0.25776832018592121809 0.22818485241125377461 0.034334899598977675073 0.45349741904725410224 0.10243582093779091124 -0.33605236947729544283;0.32295353591596559495 -0.40010117521741078717 0.02824585139179722898 0.15635000027565415515 -0.97232137359256720632 0.26303060900340508033 0.7821041731249539497 -0.20310627840134817812 0.28865672616143278617 -0.70849663221313075034 -0.2493847641744196264 0.17953178976197625705 -0.014178295556746873043 0.25188954930374463093 0.022497035578091052754 0.24172614379674864371 -0.26413637858307043027 0.48781521930040866453 -0.59298773543868710245 -0.054199248466334080943;-0.58331878475173792875 -0.25699258532125046628 -0.011559780801227556926 0.57559222270082421868 -0.7357122942328244708 0.68433766242351168341 1.2466410655798993989 1.0551031643553840933 0.51529207570632729052 0.54499577077814354009 -0.21696135701269345097 -0.39418929708680872093 0.18450095624654608284 0.4858952174673045743 -0.57526009008430956104 0.81226314903956675639 0.41730588375523952616 0.46706029111085212158 0.50922030764847669992 -0.13943573007959025878;0.025928183576097049018 0.41504321854049880391 0.07029864883751693605 0.31961927319875194087 0.20328209835728447419 -0.35188819988657177307 0.35297654361524005706 -0.37112069133434266721 -0.07468999827520085566 1.1191400027806228668 0.11491886456076610967 -0.14046254075396732985 -0.18015398964264409121 1.2809154244749523244 -0.3124393561009439213 -0.11472317867768846988 0.088582339432424897496 0.070613483472859547851 -0.20734361561766870286 0.28839294143689486738;-0.33120163831836163526 -0.49195384218819260269 -0.19283038977325847596 -0.35226783566433794714 0.12540798764633248608 0.53771079445887848269 -0.32070876212544724426 -0.0056003831684287679049 0.49430897427693881729 0.11922500813163439126 -0.065120440050110889318 0.15413258165582877091 0.030905951608122001623 -0.079758741908041136393 -0.39595815022614350154 0.39271787750341180523 0.063982948860853067208 0.4151921003696526502 -0.51102636340186702313 0.74166235045690576122];

% Layer 3
b3 = [-1.895673390779202494;1.5784852173287218235;-1.5463606162372751651;1.3076794540416387669;1.0533817835287844211;0.84938642903734717926;-0.75554275773171830632;0.51808643646592611454;-0.19528178138947518971;-0.13280466928569065188;-0.039890003771406085109;-0.17792459014319558785;0.55033268717960626137;0.70434300892389078985;-0.91458986494865757155;-1.1765616683559163569;1.3508854302279182935;1.3800139111998157571;-1.5599721317225669903;-1.9279624327483493307];
LW3_2 = [0.58660404771513463551 -0.61435918810509637655 -0.056593016634684217836 0.65729974052393247419 0.33677871074777704363 0.42541317966399971873 0.45032617958135201519 0.69619791793824659099 0.68440625331068805082 -0.97299542209464362497;-0.21559701783825066523 -0.41327181917053390503 -0.49601161750454797472 -0.4542896344028274358 0.93571532739671892109 -0.44061852996063272103 -0.091108994463381290374 1.1112803669994701927 0.22830664402752653963 1.0225710787682915637;0.18794330172197776241 1.1102484355743085231 -0.80776980833104650159 -0.66874369772605413154 0.44016319940408210609 0.33439428990309122414 0.90976311949621291308 -0.98424192048512393338 0.3922611919406520653 -0.074674806233677587519;-0.22023454538409376058 -0.68120660520974696261 -0.62634768570621812689 -0.88429151164574382182 0.36375485084636460797 0.47659350069168748831 -0.29726662845913165434 0.37862329522226434442 0.79982153007550382817 -0.24391622491234390968;-0.23601530996372083182 0.36029408151688724349 0.80415964092869085533 0.14572279043072022819 0.3185424698632028373 -0.16180980722004639771 -0.26324045861196010421 -1.069159015490762199 -0.99594998477110929791 -0.69040092312916456763;-0.15568338382842861201 -0.028388153850076713186 -0.39556295125511009569 -0.15946027174946980631 1.1547484580428231116 0.32183098756170930299 -1.2113138093985200694 -0.36271894911908353354 -0.43012858197152953332 0.044251348589553332613;0.75717326954856001286 -1.1927373684964546197 0.55656657646636154002 -0.82844502702110989212 0.31227724101547282842 -0.14558039607064757193 0.18686761651234187753 0.75181579276998866668 0.060826807568114170388 -0.072999177322873989859;-0.3361889455184463027 -0.059327981802359541774 -0.91828895687358147448 0.46749951149013102558 0.51314093655925441251 0.81737674020646122752 0.14744904298785005414 -0.0092827640303228733248 -0.68946874802632884816 -1.0019678760228485359;0.18051296338778410888 0.67709075163470144876 0.07257487846431519285 0.14229271840590076992 0.3222567565988048166 0.4741988463211267435 -1.0642423730383259173 0.36838024897625271104 -0.50457789563906552122 0.84694163256022492181;0.70405911418788336142 0.88279536817433101881 -0.72260109635757041602 -0.61497979941639657753 0.37547979905028350256 -0.0090037727259972503285 -0.074951334174800918198 -0.5214657574678519536 0.98449762662852524642 0.80109884556514598941;-0.79813436678622784459 0.16079915614819006997 -0.58387038722737605312 -0.26682899456101949465 0.70357358874199060761 0.25560033899069933838 -0.21541911130930280205 -1.2023935947850048489 -0.80005320544514746395 0.52445325630699268782;-0.71364954662871538105 0.94874080310883202038 -0.27842120585569662961 -0.53559997578820894848 0.74460812353425542831 0.36961747712568049362 -0.93694483778725601297 -0.13368837631095198404 -0.73785256280207522916 -0.17188867417736028442;0.71905475500465976246 0.88263574239076347805 0.29333267842771187928 0.29926272106234275139 -0.26414138385880053805 0.68928657984989294416 0.8635046372035126705 0.58170955228866694231 -0.73707808561866394736 0.45484759811206304514;0.80507136606571527704 -0.34916017749303002171 0.59170385991394391922 -1.2373001701990211654 -0.83428376802675940915 0.71656174423160778897 -1.2535494668391822248 0.46941856026593281603 0.56277572054195001972 0.61708536598802032902;-0.72955128463138263495 -0.42931928127256202554 0.99275394249036308381 0.0035953825923007269594 0.53925859531921449541 0.77004524096135495981 0.098353927918984271339 -0.031977798089917235103 -0.77261899564868030676 0.51648023384160723914;-0.32002917457209950625 -0.83560952893153817023 -0.37329432737546769383 -0.55136608954446120201 0.41429259646336663581 -0.12993664208761648848 0.47726342151495404487 -0.52550135536195963226 0.65133580574812688369 -0.72600067819115110535;0.56338695651919268315 0.67749284142595223024 -0.34540907593149805521 0.69801037332385562628 -0.56743270006489054946 -0.76719130855068862207 0.34378143072410000114 -0.57808768418125289212 -0.34267844971944949606 -0.7402082016777125073;0.69159697613532078453 -0.20071898006619059984 0.98285644569713337404 -0.68480625466843692006 0.039355462330807278182 -0.87164834530620149966 -0.42974922820098970799 0.78513697279530447748 0.48369009475193702752 -0.024488653692254939986;-0.37407576133422998366 0.56510337396558574241 -0.45302512643841308382 -1.1349642236702848219 0.78738527431904870024 0.64429876839543209766 0.021547648945615182486 1.0906073452176834326 -0.59677964306535458139 0.41742283314735278976;-0.38115924586161303855 0.2991881811831412219 -0.79369332585245966349 -0.2050668180693670517 -1.0043903594219518727 1.1297845088989029172 -0.12957762538921016593 -0.29043632204458103008 0.93023914697429233023 0.28223684826141898219];

% Layer 4
b4 = -0.58960396700426132011;
LW4_3 = [0.046856211314405663004 -0.50953453463854703198 -0.50923018900271388443 0.56734319764793639251 0.19352321902003497001 -0.19202656497886927411 -0.37714458953151702714 0.69806073910166499541 -0.71156316286297716101 -0.29157732617242010376 0.4996108104101747438 0.22505633609450598209 -0.16199966964229195465 0.47647773231356549406 1.0296737728250697774 -0.084142897972699984277 -0.52192475949804906232 0.3357271935965857601 0.4062614339098824523 0.90545518222977661171];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
