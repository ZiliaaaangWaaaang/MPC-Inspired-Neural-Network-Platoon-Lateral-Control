function [Y,Xf,Af] = nnmove_11(X,~,~)
%NNMOVE_11 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:32.
% 
% [Y] = nnmove_11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.581224840168548;-2.08798180279202;-0.533403245818273;-1.89546903030855];
x1_step1.gain = [1.49735732495204;0.473316379586819;2.00103198696217;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0236797133194723841;-2.5235526934693313095;-2.3660525138642602982;-1.3777646865666399734;2.0682312494907542089;0.72714910485588990507;-1.0664095968184013064;-1.0065796918426144213;-0.15129406053205357585;0.58559328550879496955;0.20693581358744991827;-0.23361598429005009381;0.40770473586276079203;-1.6074423199836949117;0.98808176248108059436;-1.946390993340934239;-1.8009327605119027638;-2.1040554223501022335;-2.8317170028576552632;-2.6969190018707678291];
IW1_1 = [-2.317734744250885548 0.62801836481876149865 -0.99518378379772565179 0.95877550599729288727;1.3261247838243312991 -0.87891492090633793755 -2.1159237918432141079 -1.5901382449778007633;1.5389262368512166557 1.4570317775070587007 0.63113280856705233912 -1.901216157895404546;0.51704262447027515837 2.5576507073289338479 0.76849407805293312723 1.9117803278600529193;-1.3231439004194849307 -1.207634941445541843 0.9004431816807041411 2.0005681681090616841;-0.76995239261839343303 -0.83143911825733729515 2.3222187691008562282 1.2065717186478692735;1.1957443853054277039 -1.8214313031603981408 -1.4040884220701252971 0.78597357001965673096;2.0681261250637184013 1.2648644032413218774 0.47585987191156892129 0.68964460426881313282;2.0546797990200400541 2.0493951769076046432 -0.86820650805082466572 0.18940364344418250675;-1.7785664168352652847 0.93769876271944707646 1.3271114280777354111 -1.9229972245080657611;1.122591093459497813 -1.3295510995909520791 -1.764406295735845509 0.6834722992927949603;-2.597427691242183645 0.77202368285470712728 0.75142359038976058727 0.78815732591860776513;0.79538694313854674256 0.15140094822675448372 -1.3081952098352442881 2.3933522246540483991;-0.056649974183390523763 1.4105352559505814902 2.1749377543352439446 -0.86401675014005774322;1.2976229262684710886 2.3556581752776390992 -0.41977061224401945871 1.6962036297196281254;-0.37892044189202106486 -1.6457013670477991241 1.5809779641870944644 1.5511915083882543698;-1.9358169912320208894 0.22920247057473969177 1.3048820965068377298 1.8569751387519142227;-0.26763574163131181871 -2.8270463146138387067 -2.0350596290122102694 -0.65237104119806921254;-0.12606350062219143227 -1.4854416812685173888 0.89385033615315512279 -2.2593765725803525157;-2.3769756295688067027 1.6806110235209328341 1.5364802976231430875 -0.71997164542632796636];

% Layer 2
b2 = [1.6198919841772441153;1.0161420484617231796;1.0171170500877764198;0.49810934394462019759;0.55910604050157397538;0.11012226566557699325;0.71310569714735816405;0.68927591381243491497;-1.4137565123886470797;-1.675391737653032953];
LW2_1 = [-0.25736806330975081636 -0.56273241193336065447 0.53053857004502813499 0.23363558878587498135 -0.41845188552734358112 -0.1008618278938120949 0.35507632331006611093 -0.13658835346943520861 -0.44759853744385524887 0.69181082352095302213 0.12654846178322118333 0.3506520551827676524 0.32091717160014182619 -0.13403154422401764023 0.1192669466328847433 -0.14057264675273190013 0.092914596531580406769 0.031191540900857985669 -0.27460249614534776308 -0.27451826804616835664;-0.21000462850811896232 0.57076223433602268909 -0.39357725432240664443 -1.2123086076940681188 -0.44995792403837586715 0.07381411584344670096 -0.35631456972204200717 0.18863881018235384435 0.86637119266481465996 -0.43162088181646268703 -0.2814293454822748286 -0.13981895368368132959 -0.21057173014896488072 0.77618417705899944714 0.46928033072802322057 -0.18432238593678368366 -0.0037631068533910141082 -0.41106044885586695559 -0.29912789007743395553 0.57673230529485086659;-0.28284134113422959578 -0.64129729039522387346 -0.57070361778315081835 0.1545177345138867564 0.73960942033550503005 -0.04707754557155785502 -0.1596843509493126867 -0.41863034883781641282 0.43141672007027120905 0.31386844595762053434 0.35672521578767607542 -0.092521743634193701067 0.18156812242515357747 0.097178677519347750335 0.036584106903484375772 -0.5185172843775330831 0.24067604746120566106 0.057279259351438328862 -0.43830612546499303495 0.14270347274308536889;-0.22053147046719942526 0.61746261571536542601 0.66120402846748749237 0.27050149116443028552 -0.59025644542214183996 -0.22308589889785951366 -0.053487072693002908619 0.37205948731420485087 -0.17779994427651502065 0.35594825534136165235 -0.22729224087527905018 -0.33923042696726907197 -0.35503850440637096941 -0.12908078846546044982 -0.16794719559620091553 -0.28240050895753043836 -0.30699343520755983938 0.11122049461990550501 -0.10596662935642224557 0.042087584522839810441;-0.19099233174021282289 -0.46177111569678619407 0.4687733624563720225 0.30171718681185899502 0.64713405779275789964 0.66346390802471033599 -0.18636851183366731632 0.73299434907156402197 -0.32763894128270437678 0.3146039439252621972 0.11414385925801384669 -0.74928213435097035244 -0.31394946471231788276 0.73388262662920478174 0.28620381693246205179 0.5031263090149415973 -0.42183484284623501415 0.20108740716471842913 -0.18322195266876992181 0.0088644969414589346035;-0.0074952297730123641425 0.17371931524877429198 0.24255732592043471874 -0.32092380795593788978 -0.67993581155788562764 0.55971121567446280309 -0.35401829015717301008 0.092059277503404063348 0.67877835151793408652 -0.18372166974501444314 -0.72866624226754173055 0.41152630235755904842 0.4581668449500033713 1.056744469669191 0.63565767599945910415 0.39916944151965216836 0.095855420632573573592 0.29413483788653321804 -0.12514177828290609651 -0.745304129356332834;0.064106488499615060794 -0.22702635168857823733 -0.021930448752262809292 0.02060727524907710051 -0.12235190628912576138 -0.30271683665506582406 0.53542318283777501353 0.072002956551877050906 0.094756073844068172685 -0.40824749706467577948 0.25279341871061200564 0.77954672066612917813 0.1517804016117518251 0.66247599196707462887 0.72511777040910130321 -0.20310304831675315973 -0.36003903838971035301 -0.57182189894223633964 0.16864726239175573119 0.15063174263090406413;0.020256235545239958257 0.70114653091515000138 0.58579317223897497957 -0.49171003283853725874 -0.096709207565595284306 0.81752667199672457432 -0.22098420203664864703 -0.39925432183464654168 0.5067895910423285688 0.78775636999796538884 0.13169069744456740612 -0.22046031496018070328 -0.16212768023650078741 0.59972976390528187629 0.37969539963679582728 -0.27045203649653182243 -0.27901969018867223138 -0.20698385878663119741 0.65150395450879783343 -0.72514885047698596221;-0.23312134170325524152 0.43716573938856628789 0.62462847988078862294 -0.32149407457529882715 0.21387676419783638315 0.36745203032062567772 0.60966991558316452338 0.47063115954318607281 0.78249423985883048704 0.11714339030710743672 0.57821354822686532593 -0.33412838817859813467 0.12897394581666815627 0.06048428723074661395 -0.21263114850031344938 -0.062540730077998041292 -0.068847694077858997974 0.11117401527226193625 0.68880558937065616831 -0.16986821435830809501;-0.35894612609503456779 -0.023672230686476496142 0.13024671559627640227 -0.51117758647626732049 0.50029985909013741097 -0.28296998750969554193 0.76375064397499370372 -0.29842307906103621162 -0.34402736859411287007 0.099734839997212040852 0.43191448261982684498 -0.081252433712009908273 -0.18169526162053800666 -0.93228541329406500182 0.32132852360520558488 0.66935133450500838848 0.36620730282977637104 -0.31021281727681054852 0.10270525398752475277 -0.23227299057517464265];

% Layer 3
b3 = [1.8584609188029752591;1.6945638341025233142;1.3960742996770314495;-1.2994887348342589739;1.2084925605225680378;0.78746501310353245184;-0.82818155798313441984;0.65134419592878312066;-0.26101402552938729462;0.1799703707478692849;-0.18104920775672553312;-0.40234873917156349643;0.49759988997380205644;0.70043634790396636092;0.83023120914890879973;-1.1569435994658066047;1.1418682433282758559;-1.6417241982850974136;1.9679972083899568425;-1.8890227335363292127];
LW3_2 = [-0.49816751703050266009 0.98236685559178005267 -0.53377593198984041312 -0.64370343869336776876 0.75157584927603626745 -0.11033388048307093965 0.65444089704156183096 -0.63416418322222989357 0.83060072344140412071 -0.22375025090214736845;-0.30819300973944085964 -0.35987045519354060596 0.28857175809661966825 -0.44738157019218005583 -0.73890529589768416674 -0.93455353023088338915 0.47740705453426202087 0.71946490861049450238 0.58389581195745343667 0.67268802893348755845;-0.73349296392751850426 -0.8297136864628351649 0.11490896546032337844 -0.60523218819032686966 0.69966084426756747217 -0.29944850412884554958 0.64342672687497792783 0.65708597505718946419 0.44084073777311499898 0.72186175546274511383;0.397796462958687147 -0.26672441782881306516 0.66421517221852355295 0.97496298864053609901 0.69988062797395966808 -0.1194876717346989442 0.57755984461187903634 1.0565211077424350172 -0.02332076680472293384 0.16560940067070367698;-0.34197640659294165077 1.1126991520100715238 -0.42383194934479007099 0.4130525129861863376 -0.52521648292029399219 0.86493755034211705635 -0.081609764822829999886 0.48888416868603601362 -0.30473713783700095981 0.53255064887315406441;-0.95382179329196425943 -0.34909019903479604485 -0.7502902087183519475 0.38450811720063360344 0.38855131413144722297 -0.22030213923400859821 -0.74099279855553656926 0.4763545692097036488 -0.9160409379827377796 0.33399538838280590225;0.022165062511417733815 -0.65219155220141555862 -1.0677709215069326465 -0.26718678211489138574 -0.22964488378280728531 -0.66124634994786701814 -0.8375714395364868281 0.53331999422493647778 0.060286282879358638054 0.77625367703674763575;-0.61478025054300800001 0.19768881335603016858 -0.2106451399805464586 -0.58452083466902293729 0.92352698966217894316 0.69089879788556263218 -0.54964218563089295433 0.67698640728671988231 -0.52295504908663636989 -1.1612023813639822389;0.60610946177501046073 0.47030468286710347403 -0.34382551195634147856 -0.81594796830212512617 -0.38619799345157102 -0.5429510330665571205 -0.046094077382911026464 -1.0351859358940707079 -0.39129089333492012015 1.0379231934907888757;-0.90709334069029323722 -0.37325818514466069242 0.40954742263451143769 -0.42849745538937489275 0.1683587040570737603 0.91861181920362910969 0.70157627446056702869 0.1796746738096113849 -0.36354839731172000628 -1.1261698422103556538;-0.55069478726081955156 0.53429536966305957169 0.17962543941734390729 0.39647489018813064643 -0.66149729621663233559 -0.25828391507559828044 -0.69496271499616746326 -0.50550589887843222492 0.93437826039587867921 -0.88500053428427638558;-0.49266924683718454903 -1.0339634465476097436 0.48282589850059970393 0.25322752118838581792 -0.56244350155611144704 0.40515902401469994221 0.69869211351278392996 -0.33070228036583187992 -0.71115224944549360053 0.42625272217816534415;0.16390074468395887664 -0.69193413998878361415 0.6532070259673918855 0.13209560569767719862 -0.42820240008839022261 -1.4740823172870323177 -0.84875595641700285476 0.57469387922283543535 0.38529530065427225471 -0.45104953307160644549;0.089595294421511290084 -1.048573419852987465 0.84362618948580203604 -1.1216812758918552895 -0.43324329549946111184 -0.23921842497945289274 -0.00091562229149088594955 0.21113975847162272381 -0.48968093686512387253 0.58496712875540601839;0.62510839487189573394 -0.0018209378362306141708 -0.98648391732333295945 0.10074638283801849725 0.54030428481033943022 0.34034611518523255613 -0.5584994645509532285 -0.74931281041707109569 -0.85021189100400673677 0.72417994484272729672;-0.36201662109596960404 1.0318378194078954291 0.093785067215664083551 -0.33169947514917608178 -1.0002313309878909653 0.20800664797671719608 -0.74222646627537181008 0.36897086320978528251 -0.70479314790802527479 -0.38655424230979323896;0.71635543669806678313 0.057003180605677002124 -0.96177069836095618882 0.7444440267554082169 0.33497976050198469133 0.70285676704946276061 0.34828840951220252364 0.60725095631237757665 0.70379435876773344116 0.5622349927038067241;-0.68588856104728035401 -0.090896990178896103219 0.63352481299835738948 1.0182746379907059442 -0.93743324179223974646 0.30547755008981331004 -0.54344962628354420708 0.80702384289279738283 -0.58846280636940051512 0.32053631366270479708;0.27718489579883637264 0.2030855198067974543 -0.13817415967353854911 0.49737627715795468264 0.5361175438088674472 0.073677793162829186002 1.0759715231105091426 0.78749983195362149857 0.25319982283619807406 -0.052490264593922870973;-0.84573699115494216372 -0.21212220052089408862 -0.608412942793026712 -0.19101485401258386232 0.10631357760812690239 0.5824022283935063049 -0.46570831756734587525 -0.82127280277497405336 0.20860565025477276202 1.0559667841584254866];

% Layer 4
b4 = 0.78936574891624611272;
LW4_3 = [-0.76908338596142689081 -0.77852152797097196046 0.2369959704548258439 0.16132948232860455651 0.14640166509462126943 0.72567309880367891761 -0.71449710189413662142 -0.45859889440131546001 0.64978325920562174378 -0.77778957591325548204 -0.71858001064735577135 -0.20220677396784655921 0.31755723172539485066 0.66308879074893867234 -1.0451115416586918005 -0.57168299518060528008 0.065296045281328735088 1.1371516522995606113 0.49538369310015312186 0.34558925510823507166];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
