function [Y,Xf,Af] = nnmove_06(X,~,~)
%NNMOVE_06 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:28.
% 
% [Y] = nnmove_06(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.2432837396787;-1.77671183213846;-0.522218457189092;-1.87191152625995];
x1_step1.gain = [2.00451934292179;0.567049054539722;2.07268153958104;0.53194555728415];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.9245430575278423824;-2.7100267147408771962;2.1305338117029162248;-2.0171652563293185345;1.3475930218230387503;-1.5265196874797819504;-0.92543808755966061597;1.1216503060969611472;0.96464980363718511036;0.16019835174204011263;0.13566679498644154678;-0.46154112648571404831;0.65214962216891969593;-0.85123496472147208713;-1.0138574034859322293;1.9798125299496454055;1.8538677436103856433;2.4461001180699804003;2.3671233004414995449;-2.9309549472631051259];
IW1_1 = [0.39019756288067591887 -0.44295433692926738933 -1.4798318748927878907 -2.6044348530527292596;1.3385427839261845318 1.4349727120507604905 -0.049838242734577958837 -2.2484659259166290823;-1.2478895752731011815 -1.8206926347086196394 2.0017230881620693417 -0.4948060519537037516;0.74403463126361868429 1.1207346658531900374 2.0639381575235868915 -1.5542434517693226592;-1.0411155462625643064 -0.86344387764437890986 -1.306524757572525397 -1.9500273189379246919;0.69250458600474562587 1.4156717272322385526 -1.8016181276597484917 1.5337634945478215709;0.92235435796142706266 2.4439305456778543935 1.1691323713765464642 -0.2085715099787303628;-0.31998531466644464238 -0.50108668629854258292 -0.35064988872339825088 2.2496648619485930531;-2.7451828364067303312 -0.73274033179033493113 0.24980170854237537803 0.46650065499230114474;-0.36681935621787198354 1.5887067771888472301 -0.94425002310388572724 -2.0942252220308632538;0.17694816655157361018 -2.6002325910762031924 -0.77948291715299000693 0.50943771994920694635;-0.82505646619798400643 -0.41633775875139422684 2.4564449375319861169 -1.0040565875053333311;2.661905116871893906 -0.01695267503493481584 -0.53921536555425864101 -1.8018370109178944993;-2.1167150880510385846 1.101777412693556002 1.5916877754468639061 0.19046692983351559691;-0.65134291058296855947 -2.5189340252261627207 -1.7436090781627009427 -0.0051115105426556006751;1.1922272258682944379 -1.6225932139383820729 -1.5766759224513990922 0.91659789954238357623;0.94560012486869027271 1.2632033848008101806 -2.6953719462752783187 0.39589839622579942047;1.1887578307845638736 -1.3517388627073574359 0.24503433936009436089 -2.2287970841154027823;1.5928886478856205677 -1.8810672439716191739 1.000340864827431675 1.6306357753530773547;-1.5757864851373175608 -1.6928363253255138687 1.5675871811453667704 -0.9492892845904207233];

% Layer 2
b2 = [-1.6298155474797038078;-1.1003979636640901507;-0.79599494301438789012;0.61075896207417745831;0.14030946508758335156;0.24884595432587092168;0.51249527528079763528;-0.96909028414222542214;-1.2080693846817276427;-1.5232134894314410811];
LW2_1 = [0.5759772719956397502 0.72501154580087312507 -0.10366792699890514662 0.21429920512492167672 -0.23755642401816004505 0.25545633683364515898 0.059550337910365971905 -0.35514061888953429857 0.060772564740237566827 -0.088020502310294901349 0.52649125795166862307 0.088529590749727507526 0.4024457133530950359 0.25057625554426715686 -0.36238190155985550156 -0.30900407595514434167 0.57707215319829752165 0.085079822684450467918 -0.62908011088917259457 -0.32491207221513990211;0.15973777128481650434 -0.48099330704378517876 0.32929953519515486882 -0.59012276412082997901 0.49059563324601218604 -0.30800569273002209592 -0.39749711492628980736 0.15396288995221873996 -0.16964398145962758524 -0.16939409060937965501 -0.14530669257562706109 -0.056507078625067590216 0.41998133699520240336 0.17509203344095078392 -0.42144018861031778966 -0.44333497024243134765 -0.036725701133076021909 0.46721786139580678832 -0.26827964399929993267 0.27092402305427121245;0.32346853518070728395 0.44854234241332019417 0.17484633203337754392 -0.027708563288280890768 -0.030736137914066610777 0.11840233152818899209 -0.80237284838110123353 -0.13248715067915464716 0.24100652141643008619 0.23384406878545282993 -0.097046137666649462394 -0.18649051046269773946 -0.025407534349122018469 -0.27720181505955693302 0.38224134280088167825 0.46336526931197702384 0.22696525341851522817 -0.18792591586875351251 0.17681226600276031546 -0.080010536872017118393;-0.19791434615412531461 0.49512620470791635086 -0.035473813067167681012 -0.73810774510145837901 -0.41918812455075593615 -0.45006814334342426509 -0.2751037888151171007 0.39187284937927235884 0.14331638615161018668 0.27580703680718859916 0.46267488831898928581 -0.13395459786284841242 0.075205556139788534709 0.50675119726742834381 -0.33668688415657382906 0.037383984319272381414 -0.083903841347031521414 0.13519705318413113848 0.22170707671465822441 -0.63308021099912903384;-0.52028660323430342416 -0.23546024855035740941 -0.26980248815742124968 -0.37420288242139598811 0.51767149932766531872 -0.11700667670245590291 0.1450907570593800433 -0.75451523052054902951 -0.46728439752601619306 0.21708732238796987768 0.17527678311329059069 -0.1613946383232369719 0.37351063503864190274 0.27154430659650480306 0.24836125210642190364 0.58475479784941153394 -0.050314472934797835335 0.38039924620393589239 -0.27011691115733993396 -0.2860181504553655496;0.51646304886086891184 0.27741983056841823529 0.19928269647629673345 0.70783172850565778678 -0.0098721066765884851746 -0.51057044310950672195 0.36857208906314126162 0.61080468606457050118 -0.61140255612444871502 -0.032781235731257678256 -0.15184910647761920566 -0.0011796646253065812271 0.15495840200765584327 0.61034237357482468145 0.61685442524746292303 -0.17059108874055167737 0.67046483396650269349 -0.34463667331485586809 0.1446675711798088293 -0.37599493387938381916;-0.068898369387116159546 0.098523802740175692172 -0.28586914869120833016 0.52786614994519887034 -0.33186953149437264932 0.13585348414860895505 0.72708125461193795491 0.39732612333946598637 0.3763041173676755502 -0.066761158783436497233 -0.7542797250062220904 -0.39004325449554727578 0.008194096677618032537 -0.15281797217572373748 -0.33934735085813766409 -0.0062132355504938285851 0.58617051392156271916 -0.41598468991066139822 0.69315311114371358503 -0.41817626159347165427;-0.3096250445976142518 0.18825366354729750062 -0.38602030924777941401 0.0027139035362686789177 -0.054542044540640495509 -0.48374517173799153058 0.82812674921244200377 -0.29352163514956203239 0.78300036252284310745 0.022946176843394786721 0.17471247977275161656 0.15220310024617025868 -0.9221928572202888752 -0.3134787005466034282 0.26334622222800208036 -0.44924257474365286713 -0.48317442151342548939 0.19961945635872446747 0.044030490718062503808 -0.45653460369804987895;-0.48017479033292342905 0.18660221333009832656 -0.51371364745729608536 -0.46425421084972284813 0.058038249056465811282 0.59659213541163957917 0.34769167256913269259 0.39182172412638710535 0.31158021457188589398 -0.0824472184993462337 -0.17392436287121493255 0.048818294301969003546 -0.30668377520930450997 0.038742075183220522905 -0.092223483560741517651 0.51813955008026146842 -0.47929238896603626463 -0.42304393713082238948 -0.11954147157946884428 0.32081554000591760989;-0.52884036807406520353 -0.33946335056823523368 -0.15580606409273820012 -0.4943534304635500698 -0.2692104735742829047 -0.046441297385072438653 0.2066571083492561578 0.33089478180733244983 -0.15935379553657808005 -0.17115893038791890612 -0.41463355473327973 0.20676280185397244438 -0.94365638812161034554 -0.040781015670464951239 -0.78314329225398082723 -0.055635436688570551189 -0.0860881463015696069 0.46923993104579120317 0.20226967668611756102 0.15076033801165003578];

% Layer 3
b3 = [-1.9092501041691061214;1.7730074652381964118;-1.409083166567497214;1.1855795279437739698;-0.96781639816929454501;0.92960115552360311764;0.87405326331744426227;-0.40364305677238837555;0.20357623861556611855;-0.052850383097097546059;0.11190940806188626189;0.41946702282578368637;-0.4608418058473961465;-0.72668342686604914249;-0.98725557149764253673;1.186329239047704931;1.2937206673413037539;1.4535343127684021702;1.7486564688132881784;1.9142777802194088643];
LW3_2 = [0.56679675672288043486 0.70804830189313594513 -0.36050535713489234579 -0.52820294609709417255 0.75936037361749597618 -0.15830291867027959651 -0.72167959050613228467 -0.34878822392819536224 -0.74108795248065340022 0.52523918567085781106;-0.65827850499186235655 0.52537050961037312646 -0.045754238716182955848 -0.81294237526461587962 0.55196632070871831655 -0.62692896611736703694 -0.67634955063494084371 0.66811144113865028604 -0.35542664439128962561 0.42370200322678874816;0.60284442142334626613 -0.72865922794427706588 0.80137917051529972134 0.59976836216625251108 -0.2245500366525667868 -0.93993871103881843077 -0.4006134741627559448 -0.69707687718927380249 -0.87388832294722884608 0.5742179970066485506;-0.58278775932613879895 0.23052779058519937139 -0.34090896439790141503 -1.1363861442327642948 0.19961421739672230435 -0.71865281640412370656 1.0000982701880725134 0.59653359985408471733 0.49857764214100130928 -0.022154188174854823334;0.93088737081028227749 0.3024612231339803281 0.21052281765731478691 0.34929923543179347556 0.99453139119070910201 0.72407336543562395015 0.75683766233102722776 -0.73607896754926749328 -0.045548094728660962205 0.05596314433957953749;-0.17606367207010498177 0.63541699754909131137 0.68229822718640009693 0.56824115582876999486 0.67089311893210790139 -0.16955038257562418669 0.29635554112603829102 -0.6652376310763264966 -0.75750897981166565032 0.8221163732000984492;-0.6037050475278017414 0.33157098390034145385 -0.40777894608582332392 -0.74540147055256278374 0.25938142849161160974 -0.014480150117230403128 0.86038271927695986196 0.34439115767906303134 -0.4112218656186080179 0.77512360228947474461;0.60699836859416633761 0.81520823121074448281 0.52316269853857344518 0.0037129279452282398441 0.69049853754176637732 1.0364937533884790444 -0.087548975749829879844 0.51765087495735961909 -0.23248802353470415794 -0.45704126575670256383;-0.20534437088344092981 -0.66566682205484395407 -0.59691409426902442004 -0.32418218374331786436 0.77166574252262820632 -0.071618670757989597031 0.40116151838397873242 0.89370259514405048229 0.36592566788391683863 -0.77994500004168876295;-0.028785706594133285419 -0.41508066355362982502 0.92522499553318726662 0.7519236850891465318 0.23065287728177119586 0.14501385929213378434 0.002918178131339543846 1.0070450056457092014 -0.75716757731545847321 -0.19837096844765836345;0.50789210239539150926 0.050715823328803928682 -0.50143647561832016546 -0.56319449538247179365 -0.88397021847490775404 1.0963747068188509637 0.72718402543849236519 -0.022678857945431493692 -0.82775651136491967819 0.10725402483349082139;0.51807096468695723601 -0.66814465536960909731 0.63921139363676970913 0.74437621522358210502 -0.42834337998434091066 -0.35180906241257925426 0.021758984693602469174 0.7057557913256696791 -0.1593697584291152991 -0.69533658258188024703;-0.2508754626396960119 -0.67991536862535462138 0.87815171030893335313 -0.82785322132351668589 -0.050730613408665699293 0.59049089369082885526 0.85833430424638124112 -0.05851184545741767995 0.52491745345408347134 0.73963825997979237847;-0.71733209951654652858 -0.2461917723405135372 -0.56378506285746077253 0.48779516736718958603 0.019418226563084284297 -0.32137670974186322015 -1.0328402499442494999 1.0272845987457974726 0.28996061318273957941 0.46300443329399237902;-0.27439766813444904647 0.08862418352031253832 0.69941108304117860506 0.70736507062379738731 0.55252656680088174657 0.5161459769704437317 0.53745976226088021388 -0.68060131757488184778 0.68950230760301300936 -0.10987739137608820705;0.5252948238376050627 -0.25656954583691699012 -0.76375468022107084742 -0.59275415976624135084 -0.83745398214072641618 -0.4194706731814406564 -0.31250757253911509714 -0.80381652932100866593 -0.58005651803140201306 -0.34683271353477584942;0.80836449172098912008 0.60700092249474923989 0.49188043251548724255 -0.83738085558912600526 -0.38314388401628268754 -0.32319080612887013393 -0.88648045179727064102 0.5180552168171177474 -0.5151324581564948879 0.36580714485570819949;0.19376928465121071032 -0.28553595079991272998 0.91893182068861456457 0.27540684051776181951 -0.88650315903628629233 1.0064060831307217736 -0.66729589504661368515 -0.29234053531230835832 -0.57372831155768266864 0.32915500783055073875;0.91034324165202340495 -0.62329133903228317592 -0.1712137874592415121 -1.0225857204322896798 -0.6473494939121413605 -0.09211296033519844606 0.11059134369381479202 -0.088936120419093461775 0.65695512872942374294 0.0027525319100133310846;0.18258229642631484957 0.43737162736175616562 0.85883962825922621764 0.72816656471008689433 0.46933543995340776256 -0.62764500215086871382 0.8127933626089094421 0.25670660697484709578 0.41876204264353145135 -0.69937428662644252064];

% Layer 4
b4 = -0.067074834644857583843;
LW4_3 = [0.77550190099441140834 0.34991555353451286869 -0.65228529216442476812 0.63497210969393880209 -0.69980484780255280963 -0.42065705433053224294 -0.89378298023913749226 -0.040665326586968114642 0.17078813744211046588 0.13973123132966613902 -0.84207786194133671387 -0.049567089322135764184 -0.64062201910555927054 -0.72646809853544713764 0.46330059150144387026 -0.34153449363617549572 0.21078684549510409707 0.76241700347819207906 0.49347509909973552578 -0.32385401922751477777];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
