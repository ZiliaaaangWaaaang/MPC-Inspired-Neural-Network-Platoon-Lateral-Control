function [Y,Xf,Af] = nnmove_15(X,~,~)
%NNMOVE_15 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:35.
% 
% [Y] = nnmove_15(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.581224840168548;-2.08798180279202;-0.533403245818273;-1.89546903030855];
x1_step1.gain = [1.49735732495204;0.473316379586819;1.97939958841911;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.1515875219092754911;-2.5953661291538772105;2.2256293600130834243;-2.0442183729351341981;-1.1985530390694032477;-0.32897200897537925979;-1.1557591590784883628;0.95905471657551122355;-0.79117699281753961493;-0.12381117417767403821;0.13698255912067389128;-0.82913108111798972111;-0.65801507820395999104;1.254097717834639969;-1.4895164128614033494;2.1286449113668926003;-2.0988589620850155448;2.2733071184586499669;2.6044325166294415297;-3.1289082847779376984];
IW1_1 = [-2.1054259380332869256 1.5384028842032615447 -0.80599269442509902106 0.42663912303359241562;0.97025764858718821504 1.7883089258599877969 1.4596910448287039319 -1.40379804453440582;-0.29090974195156965587 0.7361977409731211841 -2.944009414601412189 0.31517990756546948594;1.5481798104895501123 -1.4407315803214586492 -1.6944941032837919082 0.11829421877135841423;1.7145684001393912688 -2.4372415250943424425 0.2364020337288700313 0.25954263963807944204;0.92010884860704922339 2.7463122313260606155 0.47330604233844741913 0.66878158233317253067;1.8159811717412241983 1.2107141765165632119 -1.3005019596390878789 -1.3904811934899405923;-0.92323573122349467113 -0.99000780188230663725 1.9336703171241687027 1.1397141154274119668;1.5634919132592728364 -1.701505507892181468 1.1851650490084670864 1.0001628559501991589;1.4825185437070289574 1.9165531544343161752 -1.2135405436132562507 -1.1474603051531770959;0.68873951054328308441 -1.8660275947923139483 -0.77836126122896021062 1.7970129266366570153;-0.52312853301818851293 1.7177020238757381154 1.3542607369740551349 -1.6296053320045498225;-1.531117089699290057 1.4145284783695033504 1.5544551960980876881 -0.50846480165179808175;1.2725644054213813838 -0.6855305815424527216 -0.73800704843393094556 2.3453590900597136581;-0.17909144064928894657 1.3122745751044220253 -2.3559740217185773936 1.3208010056718137992;1.9718595401319896077 1.6351436624065012193 0.036982782814153000728 -1.1252924475794685577;-1.565106001375075051 -1.2434590849673639035 -0.26247445561203874842 2.3444109318407169162;1.8108152925413079082 1.0792525408216617766 -1.1122849448907892178 1.7875908442494818917;2.4677295102064658039 0.88516142969447608735 -0.29217251086018242168 1.4438725434606174414;-0.89615012379117919838 2.7243686439628271856 -0.049299807212648295851 -0.30526216169368758369];

% Layer 2
b2 = [-1.4136935464945015184;-1.0591380956590861206;-0.80869905550317344733;-0.50979764634126623069;-0.055958306186085472744;0.23946174413233051181;0.51804103901285103451;0.92458271704887451392;1.2858988215865954086;1.7877933301118964504];
LW2_1 = [0.041601947652571080738 -0.27422463800477298035 0.71024828032167930392 0.55125514544943454709 -0.22225506396025704325 0.32199898415343403135 -0.20412380400275276227 -0.60422750790732404624 -0.55431170469554325031 -0.10275937309683941256 -0.51419560421433541109 -0.0059025896137907003097 -0.59158208552011226633 0.23868818477357334196 -0.11418359839580850823 0.62967217354389459771 0.54920299352301571449 0.61727811716290881261 0.49174432036636750443 -0.17751163482971030194;0.5962754238693982467 -0.48381209995258150913 0.59686979742876755672 -0.27443465218667312255 0.43425277199931211491 -0.92989197891285801933 -0.18583776537943424989 -0.3171805206082846107 -0.37159824977333105744 0.16650453280460827954 0.38621411113184844766 -0.44606373337458443684 0.26130922517395394067 -0.34978819535649141592 0.53099481661635838936 0.14472939783976151995 0.13303059641312653394 -0.55301977980996319673 -0.31670562686663239482 0.11268752422335326369;0.37372918270936089646 -0.25630306635913463476 0.08163658899483228204 0.57976201208875810522 0.087739597679459088719 -0.38311592863081112004 0.67884570150813117184 -0.5026261118458101862 -0.23540408350459990361 -0.4386439404666287456 0.3966457605086944338 0.32010878525904751246 -0.28551989817889333878 -0.48380899263244547814 -0.12644676989069644768 0.18440442623217187523 0.037982381821350816309 -0.1641457156745662338 -0.53809170283284846192 0.027101159493253389188;0.14172195905172813024 0.20993708313903541862 -0.21081921279420676174 -0.18831071595045500988 0.024146763125317070864 0.68043107816757975037 0.30801765532407721082 0.13865730791501768016 -0.1108532715254869766 -0.087332128715625123583 0.12544738309453826175 -0.21928915024270051459 0.47825196927888052878 0.36751401746631551237 0.20503939267750642683 -0.47114002313413366752 0.41842972456873017695 -0.0074098162926851882104 -0.30047203618873474795 -0.66054178716284206452;0.10540966474484290971 -0.20048327996447001809 -0.032146347602999093829 -0.38432213089460215416 0.4431392644445380502 0.0063752722194528321786 -0.30772195208307395742 0.020003860920048674443 -0.51976261111478905264 0.12882227483087183018 -0.49853680571694192203 0.13850994345202785607 -0.94463820230413131362 -0.080066748766892070766 -0.48991090091588818112 -0.21841816486737086755 0.70611261778165412828 -0.15305384037239638806 -0.21562200966844710659 0.38959758354505896749;0.44951805602192373978 0.11893361537140173523 -0.093010454354805732757 0.46398091620710685268 0.36395947685304536057 -0.50348970027154538176 -0.087349637119789907969 -0.19095841024939091968 -0.62148939880310649642 -0.059093332814461170532 -0.32745663180414896765 -0.51395558465221169442 -0.39775047836893656639 0.090995347130152226534 0.53337850195533542674 0.51211871359649208113 0.28214971647973507984 -0.1915749027696385387 0.5025598518182362584 0.20184249244842278337;0.32176061944922229596 -0.42407522713824169491 -0.27355907618038904916 0.22569077895778116849 -0.13373030947281147607 -0.21300519428446715309 -0.28047741723025876315 -0.38225723479589535092 0.41190517016476307921 0.57053579581014202127 0.34843227504469298506 -0.11076563389529368864 -0.23429086097501575225 0.4336234636863084968 -0.4017748904127431131 0.59205763451211057546 0.00015588433969403875379 0.37051643699253083986 0.44038798003786555624 -0.032505361669704774252;0.061077576797912487561 -0.41694898453693368667 0.52827529172850296035 0.071964406433250097117 0.086536713583644161996 -0.10924379381504074893 0.069563592867527931918 0.60483508177663347638 -0.4067717063788779952 0.098789022598366804662 -0.46195156481779564572 0.26372352921306985163 -0.32910852604422358159 0.33709709668830584173 -0.57066220513370424783 -0.14031783327600266809 0.55082376300586388673 -0.19564131877327869957 -0.26806791691872711159 -0.47864637263439813175;0.17968596462577332562 0.2693154357068695548 0.69736943329128864288 0.35284452402667870752 0.09431020165206928374 0.3117189390662192805 0.13374548806850217186 0.48338566072524441486 -0.24927291524680753043 -0.50369841301361484298 0.26105421533386929944 -0.62319963737698436113 0.23295214236332445479 -0.5503393165747586524 -0.44071428221769526345 -0.35365329520139110464 0.32126596554052211374 0.38476335191784705181 0.17406309504785213993 -0.12672328113133035643;0.094593555123945835539 0.098819484246853148135 0.22737594336907418491 -0.21706995019678446135 -0.66158352847312151823 -0.082600753665286866245 -0.5367965829476728512 -0.6230611622377411063 0.47614332331067449333 -0.25476387943433831396 -0.17517078872251307109 -0.011812371996917337205 -0.050880389734852704553 0.36837136238103129759 -0.38430907915128204033 -0.0038546276018060323179 -0.1841041912534629732 -0.1792267794919515933 -0.050306553576537370309 -0.76920833748425154752];

% Layer 3
b3 = [-1.898519713450045332;-1.7170367478959014385;1.531114394579128124;1.2447144299310601845;-0.97318969477360062204;-0.95094944905666523027;-0.95555777034782796164;-0.46501496732890307273;-0.22730553769131148223;-0.16143487435934233964;0.022950566315142938156;0.41104936185527130021;-0.50201996442130925047;-0.7284887108341560058;0.80904310087386277495;-1.104895208543167584;1.3336230571480425233;1.4442550155243456533;-1.7182149865900482322;1.8685550431476944944];
LW3_2 = [0.37871897314498292886 -0.61705373457889933775 -0.58540757212756877603 -0.50568074410925967221 0.62512814192289978266 -0.96635295445525215552 -0.47387644707651183085 0.47719208790459538561 -0.78000602471841606889 -0.19891463981998727673;0.52779047558562608433 -0.46971859673137267288 -0.2670610059565339256 0.9034004311612788829 0.42434980166376440325 0.2966834949988845227 -0.51076331758334192479 0.86512665652715459164 0.82876663035554509751 -0.44987166119797861175;-0.98768271387705819375 -0.064202060539210015211 -0.1627898742356746753 -0.77063794139859043142 0.97858428806614949913 0.57471242600164162972 0.2458145110858328819 0.33756849522106596728 0.68069043177187849025 -0.42522227109349486351;-0.033637633059916162426 -0.50202483397496555639 1.1172015291702086515 -0.4677186263874286154 -0.5113586200205136878 -1.1034432153942432819 0.50373065196370692131 -0.32065042811556998537 0.47063235922417978596 0.21583487009557425496;-0.13119280802044275269 0.22501229273353887117 0.83920959034816311473 -1.0377656598608484551 0.21642255928405401688 0.46266867258738814117 1.1696731006422833588 -0.45406129278324164344 0.34499057026778806589 -0.070736349532438638765;1.2582885788496731561 0.36524333016793958384 0.17276089720038675934 0.84246157269778765286 0.098977514099353763877 0.53315795609235872021 0.33894194704588909151 -0.49247662614303955309 0.089408508185516377686 -0.17001638439907015843;-0.011905199437271390961 0.49635172308788233497 0.76538815733182985479 -0.6957448225830162869 -0.0051978347955849851791 0.67133262026425877256 0.013554832823331801339 0.13626826829242250083 -0.77911679402054667687 0.63701844034958199359;0.53207569057092829468 -0.8541303856996824706 0.78390411267160620135 -0.56481664886313809326 0.96240516332863890181 -0.27508955833277254355 -0.19597675161218905404 0.0025833896841515966575 0.32921632833197028711 0.70315498426911104968;0.90650765320488269072 -0.53415871317904528581 -0.38543476183104286026 -0.44455592776178798342 -0.28844990980142160009 0.73800449192786998776 -0.33976912174676604517 0.88261967071491864711 -0.35949653399973591217 -0.68096039174233691238;-0.35653228598558589502 1.0933949441818637816 -0.65028273482894660695 0.89390865441532052493 -0.88972529252883070239 -0.49522228934038492465 -0.18296176434240060682 -0.52555119046973863828 -0.13406548433238604789 0.51898848609396963649;-0.37892171167253657638 0.61701398884942260104 0.17359678196349961898 -0.18301092774668145657 -0.52835312445758553235 -0.63672337423098324116 0.72500369018452659464 -0.52899184535852827871 0.17918955505044092957 -0.62978657729949538702;0.95676360460088694104 0.034586197597280397831 0.72043046466511495574 -0.55570002929334694208 -0.33305985731904141911 0.47575059616278025931 -0.05272946874205022838 0.6892072397357987823 0.76474249278596051482 -0.71487733820538401641;-0.62580339736189449784 -0.080720647048413932123 -0.62313498320712046308 -0.39671718319473592285 -0.97618981078206867874 -0.12840201094799255643 0.75414049419522222184 -0.15598736430959345145 -0.79548340776024806242 -0.58357046184539085321;-0.64614025098492644528 0.24418440230792537449 0.78346669361705933987 0.76550724642169332146 0.48399095792652913062 0.51057058839798385996 0.45772843435346710628 -0.39834269112737863416 0.75208109930077404748 -0.36518934734833019551;0.83626936610237390113 0.85092886663700495475 -0.070821705000440451916 -0.75571367115445453599 0.96496431297205642608 -0.32651438024940471205 0.39230872684168149878 0.26053871668397848849 0.65127248532722903374 -0.36358079604368653825;-0.47809558226819709459 -0.42216670096759739694 -0.42661027976791671135 -0.66906569407248450698 -1.0184965382102497689 0.42401239788770761496 0.7603807109162067368 0.16211286948217709658 -0.12186174856994877458 0.70892827149991266555;0.56284276733657323533 0.13367296420338609098 0.44451664920048583607 0.45967929340313279374 -0.53840017493742065025 -0.77584102976989677281 -0.26712538354327675094 0.95515139957042693997 0.65205357366873850644 0.83350069395155557128;0.3008296395869074491 0.54712255261132192175 0.082708258797751801894 -0.50860652556156016324 -0.73923397282047942358 0.029867963717921958838 -0.83826815636839691059 -0.84953803842611386177 -0.44353502935956962139 -0.78959423578895726603;-0.90472943412222428528 0.6479003360569037806 -0.27260850174212114538 0.011583272430556842275 0.17379511542983042127 -1.1304167132189044676 -0.58801097110615685448 0.55855895151960022194 -0.0025246563612507516572 -0.25998814981008216973;0.86111026065306273125 -0.84773499238626193186 -0.17984396197339605483 -0.38616510285508209854 -0.10147520798945783294 -0.47907905195996625114 -0.72345455989567197808 0.67105914609306061003 0.41160500459828952557 0.75185585490246897855];

% Layer 4
b4 = -0.083036225054148038449;
LW4_3 = [-0.7292011237804220114 -0.74748477002003899106 -0.75735785202690464324 -0.55433078634005883423 0.88572624873820549052 -0.82681270285484331772 0.55143946235749630169 -0.09200954682650122618 0.054908526717115567484 0.55821225909570026946 -0.73099469791084714654 -0.42434992383329334098 -0.042557711633307168664 0.37272206080208242218 0.76471359736611177471 -0.58658611726959286603 0.75604218528152522527 0.038292787819958845619 -0.084715785324757139629 -0.61982723463260613883];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
