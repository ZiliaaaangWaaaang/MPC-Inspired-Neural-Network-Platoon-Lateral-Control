function [Y,Xf,Af] = nnmove_02(X,~,~)
%NNMOVE_02 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:21.
% 
% [Y] = nnmove_02(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.2432837396787;-1.77671183213846;-0.522218457189092;-1.40024171017087];
x1_step1.gain = [2.26297255136966;0.784249478632966;2.3067315957464;0.608251520466356];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9850421408627587638;-2.6070819352792575785;2.3050918948816478959;-2.0140709286081692753;-1.7021040342528999112;-1.4037588707728654303;-0.93469022104947196983;0.38512813451279515053;0.37565588470474270411;0.14190331743700401734;0.29494828736903150324;-0.19608533716485412879;-0.85536900344457034162;0.90695963276626689886;-1.7125745211265150925;1.4864899274382237238;-1.8486631771667021429;-2.3961753374380814208;2.7238142721486360287;2.9596413052881258565];
IW1_1 = [-1.1476738314470147362 1.3316825919948578338 -1.2422215376074863258 -2.0110834386037166333;1.4598893187652781656 -1.6385335366363684706 -0.55184560615356681446 -1.9513105179552339141;-2.0335310542525082411 0.80197770934067991178 0.8792300352330202351 1.8107450349975415804;0.82714336941412369697 -2.0193625274556734617 -1.9658005174220354316 -0.13505425197813417104;0.90810820818540827215 2.2581534467877206751 1.5882877294287063297 0.41521491302132423895;2.3215274780808909938 1.6755935513642215007 -0.75491479015850726508 -0.067778465168343529634;1.6374974611516972534 1.5482068878601247253 1.0319971622354409124 -1.4973795027596614737;-0.63134841513116179978 -1.9949860517569415475 -0.48441509844424968101 1.933779390921772201;-1.2141763351871539545 2.1486537205828777353 -1.1035199135523523495 -1.1759308824453862385;1.4289046441340069737 0.25105051306268727496 2.2904195648935088414 -1.1873764872083454325;2.1720129987284177986 0.87692756841077590391 1.5923246223363587415 0.76356916700269794607;-0.49864529121879641593 -2.5801369054330325348 -1.1796143463967028175 -0.59959957484824655261;-1.4219106932445479963 -1.8805318485578079724 -1.5986136569163307275 -0.38343258432810606307;0.46450065024074027598 2.4439337134125209694 1.6152445832048123453 0.69373809904221517275;-1.1713074415250355198 -1.5835946659501252132 0.62156718429498336587 1.9524858153313939813;0.30663196380560669985 -0.882977036806660176 -2.7557154623087836143 0.7651261746866083735;-0.92771579441349849571 0.79834593708186418759 -2.3613206100865116177 -1.5286762377112552702;-0.66087428642503942555 1.8155905971058874382 1.9374862676009334539 -1.0654968433403071426;2.7631350996470356307 0.27014569548169542479 0.038145548002118154218 -0.81682937258596655106;0.049010736663437436123 1.7169972505008994634 -1.7058319130878993874 -1.6989666030315662137];

% Layer 2
b2 = [-1.5133883299018644486;-1.1056630510816245483;0.82716577784023026521;-0.52752097595462588142;0.19666793145331709636;0.14999443086497399324;-0.48304654783079997715;0.87344281955014668739;1.2527353859368433042;1.611570703812016836];
LW2_1 = [0.51590011144682934585 -0.22047241993523636339 -0.24515553163655787183 -0.32338038993889162143 0.59796002076754517507 -0.28695947483535688693 -0.3044746303134373 0.050331471889412206233 -0.098009620405601516335 0.572665526532767033 -0.44777607088795506884 -0.54497692068160286105 0.4340208296018417955 0.26146308854338584649 0.24268901398314443596 0.069303231396619494054 0.50500432405633954858 0.41027519631375958253 0.033094742773498615762 -0.11416207318154382444;0.21735412958928493343 -0.61029794045990171103 -0.17508913523252483957 -0.57816230336933582823 0.24527374289900533144 -0.33890587008788242152 0.490978827634230508 0.3450948752293739874 0.41772722815075241654 0.057440754586158569717 0.15888809175867429913 -0.031096455936651480612 -0.52999974623233625515 0.47402791019109496995 -0.28933179443390821817 0.48655758322264847093 -0.44231580633754885579 0.33933224857975707867 0.46327009362787358038 -0.10626625908374119633;-0.41921024750702406969 -0.026516433766741256267 0.30889421833461466749 -0.02092243290947811904 -0.32098602015240773611 0.56308210608143227649 -0.5507567086456521821 0.40634278118912015021 -0.61594899344783882178 -0.4129453416603420246 0.035034715594606198608 0.07205432635224934268 -0.53033072034421546714 0.055323819687683607749 -0.21713057178766387301 0.30390416576397449866 -0.60063008531673300894 0.029015667311358534636 -0.14888963994924847567 -0.24353812880274319785;0.060899916574196487351 -0.56311852139680729223 0.62439699394254699616 0.14974056317546804995 0.36475423392768319131 0.43068227473372350245 -0.074831692767678564815 0.12750353482789228421 0.44696520078524565323 0.46729890060491113823 -0.033853027903051217951 0.059485090701164880511 0.51362371087889968635 -0.61328087418042698253 -0.43423487287332446227 0.3159319952903529849 -0.25988947558913605418 -0.11453507700015716497 0.15527471239045415041 0.39571548074135404205;-0.41031527364792247381 0.26459887551305871778 -0.15246767163458990746 -0.26443711013632537066 -0.38134193430041279926 -0.14561690655960624063 0.055545952572158559246 0.07751318758314651447 0.07839011965639959556 0.53893752923277538081 -0.60359691991468278349 0.20598221514995107562 -0.061187114024334424145 0.42618382584262737289 0.10215786762410684896 -0.49210800145700600572 -0.66665668833729496701 0.34442609959550574139 0.38679575363541129907 0.067739967484025762068;0.55214562072279338434 -0.67448256615916768464 0.3273126684333871883 -0.025397923969026570123 -0.65314072733592254405 0.075646339705455811764 0.26730544731530408997 -0.18606727910312928498 -0.37683702951682362947 -0.33974387766755731466 0.17551702951211328729 0.73245189730189885768 0.44249634099541834686 -0.17823945553288214616 0.032579367218099786196 0.11632560253298361574 0.10755477904172446035 0.23704849810987646541 -0.093847124923112507089 -0.007005106526620671209;-0.033893613214490303509 0.44210604533488429002 -0.3727148310752887439 0.11909182132814627453 -0.56593446772550681789 0.041339065494867599515 -0.42400894339767075669 -0.20836048290482422907 -0.18903488694695058658 -0.58973894022614181676 0.54526037873086630192 0.46452743810870739116 0.41723298028313771102 -0.22984994770681901888 -0.1255894395689737264 0.49904722317026134482 0.42560609962565781883 0.2289928353198713018 -0.044953320325500811805 0.30942641397278958237;0.059000168026325239268 0.30371814440731481621 0.1247158127749209422 0.43608106621341308218 -0.27810176680217707501 0.010493598250493686372 0.40668418295027569664 0.15980041613307172099 0.29888159000078151628 0.10195259794903860362 0.26150295332332934573 -0.12302090669593916672 -0.32219889917490540654 -0.42409941384422783495 -0.64380383409455643751 0.21847868012313442776 -0.16252482056066727689 0.57647639230880254324 -0.40560022222250741164 -0.43471746240156561303;0.11401873711880353146 0.58036629251623295112 -0.079102343622270351875 -0.31185632967859722164 -0.27967835466382057197 -0.33302757105636299206 -0.053660347799056720697 -0.45571910395089221257 -0.42614413442701232215 0.4238298190367919549 -0.5828193528326159889 -0.5440953181747867351 -0.29725536027546284323 0.19375639892190577029 0.41185762716065410505 0.54456511307329469318 -0.10894695458728177739 -0.14030124594414192241 -0.22100537079979121202 0.20006794369087382846;0.27888146213568726361 -0.0031690345244208151937 0.30717203885923372031 -0.18013251251369361006 -0.41592647690000139615 0.61975958628664873373 -0.47910681216483874678 0.033185107305413685808 -0.35649827799456534905 -0.29317994259949758939 -0.025628596740349375571 0.32907023116412909003 -0.54618610847165616207 0.069355466214287425641 -4.4932939580643543149e-05 0.55760113803134558896 0.014345016782196734831 0.15920797994713292711 -0.44568949120020412424 -0.15612797430528599363];

% Layer 3
b3 = [1.8914284910506855564;-1.6652044240156407273;-1.4770595429070010329;1.2916396446565412415;-1.0758365550617643436;-0.87942119744985169927;0.77983291286900768835;0.48536175759336247504;0.22333975261509433907;-0.1257202175180043846;0.1009818222185295683;-0.24904315127953785547;0.46420527671458344798;0.73289007157023644545;-0.91702825106404961542;-1.1213545276551675212;1.2846393941985398968;1.5859898725238383843;-1.6835863246075351007;-1.9116077345451836234];
LW3_2 = [-0.57545790364344850953 -0.48926321837858799402 0.054027753197707646671 0.33390978439162399827 -0.08619725859734679585 1.1496467322272510003 0.2748698422678489961 0.83760065086991264405 0.86960724582043968933 -0.062199129168971988013;0.11216352734601905961 -0.54289978516109194118 0.47524815660131236594 0.4802282565914067769 0.62209787334823918314 1.0475108005844822046 0.78558782297567619768 0.38866337710971310404 0.72059119654515169096 0.3993026704395420956;0.71540176217992412777 -0.59645198226595685931 0.87302857489309348971 -0.0016546471379821463005 -0.36234197251286609509 0.30763061683826292692 -0.89400101487104755016 0.39910407183948631848 -0.65980637782821127679 -0.5713570313093103703;-0.5503819461937718982 0.5726781671337739521 0.42508782205287126699 0.66786848689754452213 0.87107198030420662782 0.37284044211182393314 -0.10654776609363397766 -0.90295530564801584905 0.73636703692167160273 0.19818362931373575964;0.31999124828854841329 -0.18013113596427304808 0.50640064734706513594 -0.85782175471834054559 -0.55247102444043116876 0.80098377306376267182 -0.87075322198320626033 -0.23123625723818702626 -0.7821705125196083408 -0.33428648733035221108;0.70880571153882365731 -0.88923562234806641236 -0.19527347047262794133 0.70565331506861828093 -0.7267656360895708989 0.25759266254614254787 0.1179221729941596214 0.67004323590646841513 0.42866618699794784009 0.68002028598901964607;-0.7779942452779065043 -0.25147581255646822562 -0.63535333321411013863 -0.91936658486911926325 0.63963141774734888489 0.18975779484682983589 0.01394744562173093165 -0.42377083941742721418 0.61604466355735498784 -0.80423583276978616308;-0.51342904361661689805 0.68719422194939960846 0.067499324334616014887 0.12016407574253001878 0.89879077611977187257 -0.27555934735452453088 0.71368010856414931808 0.21822259991952616676 0.54630120759641065398 -1.0402744403679966556;0.055817393534071925443 -0.7352524553902721749 -0.59778545359239398937 -0.22560306764542650826 0.82647154283316537349 0.2479989156043647669 -0.47173577750173784073 -0.43010043116676244246 -0.82740378903933664567 0.8703752891379186174;0.77126068446603091022 0.84450060975274099384 0.58017120586705250851 -0.9089667598483734956 -0.56288233622329042483 -0.36250960048823815951 0.12467862132862210511 -0.71963863316075216137 -0.10736573978432663312 -0.73748824618450681267;-0.0013222363211586160483 -0.5481658092703285412 0.55408058162253537304 0.90887366043042938646 1.0261206869312147205 -0.4634640956330621786 -0.21643874994316716909 -0.14065690583003562231 0.0053690379412358732111 -1.0401676014505605306;-0.59970652830484239004 -0.40667687696579152279 0.74668010822578823049 0.30934162370862050562 0.14524463913288690464 -0.28063161110835788126 0.84719060139148461008 0.85988917340303472336 0.09909207123068525247 -0.87902164473052946114;0.089170988875779622074 -0.63711879191337328354 0.593428401849402265 0.53699985488314572191 -0.079357263606754838148 0.018877220365012190723 0.41364367898775783461 0.93449912049833172567 0.72283833344060821613 -0.93473048865925834061;0.19707042014129630414 0.87042831744149895545 -0.10902771155859845853 0.17632877969885984992 0.90214014230348560375 -0.010218209867552322315 -0.48531778357740185115 1.1290653736903626392 0.59152129114679985467 -0.10529845659423339721;-0.18156427964324142743 -0.7665548068130351167 -0.25475219429013185035 0.59107213471087094447 0.68586150093037501208 0.76235507203988017721 -0.18602367914406095495 -0.79672956929476046462 0.55323423939422111673 0.32499669749397719354;-0.98153726496855198125 0.82033930276880662191 0.42153413437413322917 0.042357661927270334745 -0.73507808766586213434 -0.5400782262765808639 -0.45011920084965845179 -0.39624249966513086507 0.070517732056391196904 0.61553859144756739585;0.34719637123077617957 -0.58581077288196792274 0.83293564006082265738 0.74673778448148342424 0.3280654854698043521 -0.25381438474387296722 0.77833319312582893712 -0.4715053241791277161 0.76994666926008969998 0.51170967825217339442;-0.11031458126627491367 -0.37488312280721686198 0.47022984834807407539 0.99503015539945283141 -0.62281423840667227143 0.29111459918593218799 -0.5712972800760637293 -0.31538183201873226658 -0.94589239152380966136 0.46681052701589392795;-0.31837697741553944164 0.49534127957470380776 0.87252491705662882371 0.047258376216122312263 -0.2923169217021438504 -0.014651529501189667834 -0.88746593623585667832 1.2463667131561821932 0.11197593230158868483 -0.05668930716132248443;-0.98270980490506709693 -0.77650504567293210378 0.50287712438167808671 0.72314720458098558087 -0.45535975612309653737 -0.56675861914976499722 -0.32577992022385465765 0.068001750864246646167 -0.48980695701523874197 0.44391235937732026473];

% Layer 4
b4 = -0.64548427844491818028;
LW4_3 = [0.62696179081078218243 0.38758829136825390105 -0.12371657482717218768 0.29453889908394725872 -0.31213884178091833022 -0.32266795709251633317 -0.21085762457308371287 0.24242293968101133461 0.18829382554256987592 -0.66229774613961078789 -0.62403704830236661483 -0.23241486102880637432 0.32981257901067440041 -0.27526819776697131203 0.63131078574653964885 0.63299981702063323752 -0.25607423645389842948 -1.0705002778546834907 -0.0047747390187951209081 0.62357268701885060214];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
