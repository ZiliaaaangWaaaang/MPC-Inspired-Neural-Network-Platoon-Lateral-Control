function [Y,Xf,Af] = nnmove_09(X,~,~)
%NNMOVE_09 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:30.
% 
% [Y] = nnmove_09(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.43837835362387;-1.77671183213846;-0.522218457189092;-1.87191152625995];
x1_step1.gain = [1.67667075032433;0.567049054539722;2.07268153958104;0.53194555728415];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.1035884597976601817;-2.779036171552942136;2.5042693819736596694;-1.8797195502493559971;1.4408506964370750847;1.3294982406687614329;0.64474706352834854073;0.99575192753490737729;0.48651922797702523704;0.28309367938794927078;-0.05641228270976661463;0.56526927577178820439;0.78366616541457290168;0.8053919749235658454;1.5057136015966132714;1.8746201784039682181;-1.9537079729111279658;-2.4907079803757130598;2.6287794131087540705;2.9071622475456844192];
IW1_1 = [-1.9809773716118115328 0.18316061406791411814 -1.141780963859411635 1.7158422320157351582;1.3621943613796845263 -0.51205148517907461692 -2.0817750618428085829 -1.2828451993999756553;-1.3299485495911946842 -0.77861248589831555389 -1.4635709744685254652 1.813345063252125966;0.76075575173536813534 -2.075618891565315316 1.7893884804256303678 -0.80358518565428549429;-0.43823356030021487495 -1.7327452358441182145 -1.7379183934951951684 -1.5182680086551958443;-0.56337498314318734671 -2.3501579884779792984 -1.9026299500808809828 0.32948486881632726986;-0.30766297273810727653 2.2872367688182215772 -0.15289194378440063016 1.6492193608566525498;-2.0275145001453234173 0.14979615016138136951 -1.7426189704308310269 -1.2909037256292930085;-0.51852476172734185411 1.932967497225497544 -0.66088303702274620033 2.228226947474643449;-0.7869087660592491984 -0.45886048973972110021 -2.2845770782753791472 1.330122228816319252;-0.21382507979849241231 -0.43371453006961496746 1.253859301335376264 -2.6056318346986695467;1.6980008541027795665 0.20216829538317995785 -0.94116450338146451227 2.0775156024543419697;1.8921388277201927064 1.2249872426731225339 0.53159477422375656097 1.7331433062203485118;2.7229574131855671659 0.46237299267253623158 1.209669431139169582 0.22609557307630842593;0.49497538953170028275 1.1623692265196294837 1.5318987901270681995 -1.3505509504204535887;1.822594686250141427 -1.8274924154119496222 1.1067394732190287687 -0.63949092540652174854;-0.25910588657332100926 1.4230444390103649255 -1.1479492848522072634 -2.2465519725433642506;-1.2518402142138647104 0.98836505910779959283 -2.3894261409977528565 -0.23559736598816313768;1.3383206026001017719 -1.483099397804054087 1.4904181582592366251 1.7027596019649355874;0.62199598291362034885 -1.846677684206190051 -2.193045160244874392 0.76700290444599816819];

% Layer 2
b2 = [1.5434312108537753261;-1.3034870923087438221;0.92024595345787074674;-0.54489216971099430076;0.15479090945470447283;-0.17385265772567937148;0.51567077763135615864;0.80903534100382723526;1.1778348486092582448;1.523383748285947803];
LW2_1 = [-0.16462833807555257715 0.40363188626558771377 0.15145020045409948728 -0.17198021501103410991 -0.29107861528684647601 -0.80900166432041686893 0.12685553894533366237 0.010467383801964366685 -0.0084527120542969430561 -0.33363297408673597833 -0.06036505282220445967 -0.039993903088951357483 0.62764991217918497668 -0.33857922761837566661 0.19673032508226964699 -0.57403683047238274195 0.48480606080064547747 -0.15560928922092609472 0.34220497168874064453 -0.67956863288124824685;0.26787572899132544579 0.11702044095834346349 -0.59100961535029628013 -0.20098073241474689876 -0.20833474158837950174 -0.59095828229470337423 -0.49737865481417947722 -0.20248471085793923185 -0.50176388870977628454 -0.17449519244543093555 0.043455202521394425963 0.17667735895871150564 -0.27380304302562125107 0.29022908456140877886 -0.25941631156873340425 0.26828111100855123183 0.22505964809295114781 -0.31541179613390268877 -0.51982809521079242909 0.32212418204834125657;-0.14518700925157645987 -0.2689795045095924042 -0.037795485499448146227 -0.59435086571598139127 -0.3933891318720909025 -0.057588684325620663473 -0.13515765751140748629 -0.10000834576829173428 0.12735954171171770533 0.070999736337501326289 0.3495821586410088333 0.11893279968306064154 0.17382799623837247305 0.56613621899134713988 -0.2551862852920540603 -0.42377990213633764949 -0.58349586340113390737 -0.49387940524268730824 0.56834446521024639676 0.48833867713856915493;0.63386654338552494981 0.071263444920699206553 0.61823317949468081789 0.029458447767521198091 -0.36599013550691256169 0.33411266695315272601 0.32344945485539811081 -0.23681545948495585918 0.0083265845366035130815 0.61724314829626814038 0.62409522457952648633 -0.37480652196944352905 0.061513999896355288366 0.1960587688518167504 0.43450203562855360673 -0.054924344535478918095 0.048813807261884847866 -0.13991020262051775958 0.016709881569400723833 -0.17288510164306786221;-0.34039359091906862265 0.39471397944553365811 -0.31317665484601731052 -0.38423215551828054926 -0.81273824831400720559 0.28512286520750546037 0.38185879652044613097 0.0059698180490873262172 0.3370137124134152673 0.14450887840547282925 0.3189476981500800612 0.16374449325728504534 0.19000560357591883553 0.37426161607743380078 0.090503510618928389997 -0.55519432775189692109 0.36442567408225912118 -0.0051813454852912364107 0.46163620497162388689 -0.28755452957288563098;-0.140022001768184301 0.13002731211894053009 0.59779250999800770394 0.000492911374062748181 0.4055657146083525566 0.1894118219926436697 0.291739842919312653 -0.2906214889498652254 0.67392695302328853302 -0.45535069859383198176 0.25954728039420577046 -0.45563830819767797697 0.31216640567771236636 0.10829534773137172721 0.36582989543966176749 0.54414321665257203708 0.44673878663023053326 0.58347254775623680345 0.28477440641283113809 0.304385457047859187;0.087407028348228471559 -0.19332009174061648427 -0.36614702409784388726 0.063021274657380721429 -0.040309090101786460014 -0.56396092240001172158 0.74751186601994124015 -0.70654957120898398415 0.020131042867630330462 0.40221875061432682541 0.17037551027631070433 -0.31963997518329823055 0.06074824178630895688 -0.41916045873240265207 -0.52984646326120254933 0.4446763164242076849 0.12264594239883323812 -0.3471281479850881202 0.27076926707597714916 0.58080738877073256887;0.53506993069892627712 0.62464586711626801652 -0.16657487057566117139 0.094437369230519818686 0.68808926727058705719 0.38660566917227190409 -0.46529161579321076658 0.067976763861866740246 0.061681226300081604119 0.45247887808266823439 0.095938529582098919235 0.39460466942566013726 -0.12947941544281993398 0.091139995773919985078 -0.33369964345847952236 -0.20311704223622945031 0.47257867257611163581 0.18373810541436680355 -0.87589226243035689379 0.23315756553172861665;-0.015158290963473493307 0.17222050165747723738 -0.44904160901966300168 -0.029834131350188169973 0.27043881113385342951 -0.22943489110724274438 0.27090526125114772205 0.40438120978924818605 -0.34271583458409327072 -0.73113073522098492862 0.44734287444509363008 0.078823202429971761518 0.57065511641678645649 -0.41510577831949330152 0.26745906414556913644 0.22026177092233523158 -0.37213449457947711529 0.43987661218567619681 -0.39916314898752031093 -0.2904276567175524959;0.11738277448314393681 -0.44881908759434469003 -0.58545152602995786939 -0.13722627519417104902 -0.326215780528416599 0.026455300532599073521 -0.031530931183879395974 -0.3807605222532753908 0.49741804577810011523 -0.38871959588141569153 0.37918830649784557307 -0.085159498744622516564 0.038418138955486492991 0.66850715647978220524 0.55552138807036821611 -0.42063089361185107551 -0.55846707267240680572 -0.32874559851087042928 -0.38038652340631612381 -0.20792310159680674198];

% Layer 3
b3 = [-1.8869804917522086107;-1.7895726995446727958;-1.48721077502617538;1.3134300099674143247;-1.1539930828762112736;0.95922351725523369304;0.75439538087284596646;0.50637194683219111102;-0.25182464273361265805;0.29436899120856085954;-0.083469077058733354146;-0.34614447315751067924;-0.32383535708266042441;-0.74794578426901536794;-0.94830123135616062324;1.101747258436993393;-1.2261366994213258597;1.6586689695397813793;-1.7493153785523487542;1.9010396892622423159];
LW3_2 = [0.3570873585129253347 0.51397787914486658956 -1.0040933503663962423 0.56579977776969081482 0.99797920798154271527 -0.071958957587406710554 -0.43432767127254662265 0.50000287267327347962 -0.63329938677354535859 -0.087873576747226136985;-0.0065033540745939207028 0.81970471412817180745 -0.3458641804722375479 0.85486011786286286718 0.6225284102110379969 -0.49740032096720526722 0.36931706179706813575 0.46429215381303834409 0.84378779432196648891 -0.24218349363124763718;0.92247203313230496935 0.17484104566152619542 -0.35908350699966851138 0.46723411503105410914 -0.32326293028143304742 0.1135255796446672516 0.49855354058436085474 0.36932215387061939627 0.97263365676826762929 -0.94780258908738479473;-0.55856584027062716746 -0.9125634540174543119 -0.228518155802184042 0.0029186252946912052443 0.57337328847070467841 0.7581033009680679946 -0.10958974108659950975 -0.48358425419676276391 -0.41236198626886488849 1.0011400116109099301;0.67087176965981931698 -0.072594493483137026435 -0.68490008845291394657 -0.74896942242414310531 0.83383008540463532388 0.063181930150393014745 -0.64793778905091103937 0.18981533235921282943 0.19020520639696614218 -0.95714995926439405682;-0.24310685282753621839 0.44203993856428008824 -0.80037810840353362796 -0.60086300167790140936 0.61534292534392287521 -0.62299647411571790201 -1.0758688979724200241 0.33777952134921856997 0.12686380932484325745 0.032489611363360072771;-1.2479059106227046172 -1.2246232691195126918 0.28147360965529372168 0.10155748127344804699 -0.26592520580183748313 -0.24785039434084638055 -0.61017669195378776426 0.75846895627246935234 0.058648163973350667111 -0.25329405552532840984;-0.8295960224289522511 -0.83597699633965005805 0.18873094432075276927 -0.8036770714989900366 -0.35054871607730664351 -0.58596399066146509504 0.33616885308159244472 -0.99986022608445079829 -0.38350084433447051424 0.056637901676575744259;0.54417196047788385371 -0.51666953084729605461 -0.66784134517621995819 -0.47346833458167575381 0.27468029334006138775 -0.29479170404909332825 0.73735715376117061393 -0.56609491508999176812 -0.38733847540772420315 1.1122518741863818281;-0.22172974351156490846 0.71111876255143524617 0.95029880593598825556 0.043116347417066672176 -0.20095203687936141757 -0.45331093739501132633 0.45432190293957808169 0.78978503223298823777 -0.60628510386271639021 0.91061498291462728005;-0.16735724378553401559 -0.089527583545024935763 -0.81040939271348111372 -0.73539463582576347633 0.66506166711591285789 0.63223071291519172821 -0.49234362518866520153 0.62244612508873187195 -0.11993721713390623207 -0.93523012412376704816;-0.40831904844770899876 0.83167821074931402858 -0.72787298711106929172 -0.70792108238488127281 -0.072261284058240990436 -0.21049087618910752862 -0.84775844722735704817 0.27511384971931290844 -0.59083243637396043457 0.6411583874325216259;-0.46713466450223550819 -0.44206444305487058166 0.20244440025763943414 0.43042389538439712604 0.82898278674695247137 -1.2280680058367494656 -0.48025088710517666035 0.48879672444157323818 -0.14195293176429718551 0.01624199705727084192;-0.71366385194684145432 0.95563740019469767262 0.62235409896655424777 0.18182153700124611961 0.51272900552129974105 -0.52458469155197096079 0.50926340331996444721 0.84784843820678401638 0.39996507602668468495 -0.35325940333685407202;-0.10582352307302110572 0.12160201979210256973 -0.82507833795211393824 0.047353930002511437913 0.52716881528183823225 0.69829933636667729235 -0.94077018929167099959 -0.47948044950894358474 -0.70714318046306545718 0.63583516155769359557;0.78251619841829433977 0.63953714439274889081 0.71442061914310062143 0.79444223664553936803 0.75399408326103634082 -0.33503200413538636315 0.0052387576547989391645 0.25082685790612102572 0.51685535054781217568 0.64046790469932257661;0.20629496481728007429 -0.7050315644732747522 -0.042744553862797372845 0.31579193580154357734 0.71574607380907739884 0.55178125025756219468 0.71105583624017099087 -0.91372661129918242295 0.69848866524737263095 1.0653709908349275892;0.92416168303391954542 -0.64983972718217253295 -0.67238301207971895579 -0.28445328136663949881 0.52003940669785586604 -0.0075834182748630955817 0.67281024812812129099 0.056146858753256922991 0.6603314189557286662 -0.3994904065269646587;-1.0455581241009961335 0.48975121127582516012 0.36535546666941776106 0.009419073059964248873 -0.7231471175044916766 -0.82933931063742405421 0.29734206728613771231 0.14567414344566467777 -0.24284867368323323489 0.78391627213565728827;0.84230264333329707416 -0.32271166570725834388 -0.46784272091815815031 0.9535948239228621004 0.81387138494144906087 0.24098565146657191516 0.78763068266002056461 0.56647453219769094979 0.23860563319758026912 -0.32700865049857397171];

% Layer 4
b4 = 0.81731338957025023717;
LW4_3 = [-0.13480346246568125634 0.57739629575959949825 -0.17157845168061378049 -0.057876643336804707574 -0.72098488669286686648 0.26555975669586007193 0.26789824312322918498 -0.47870059106680634686 -0.30895116685023654712 0.24894375491348946783 1.0109424795236208183 0.25913263670424507845 -0.73191377888060227264 -0.15608763089637528454 0.11832513674243501367 0.16286807432034894338 -0.42062187627517849675 -0.23906742421323784464 0.82157479802749988629 0.61484964956480825382];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
