function [Y,Xf,Af] = nnmove_01(X,~,~)
%NNMOVE_01 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:20.
% 
% [Y] = nnmove_01(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.2432837396787;-1.77671183213846;-0.522218457189092;-1.40024171017087];
x1_step1.gain = [2.92441740584012;0.784249478632966;2.3067315957464;0.608251520466356];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.9567089068087843984;2.6451649930110114894;2.3389004709861360709;2.0316020056440997621;1.709731148870707651;-1.3468374031299359395;1.1655021295728873465;-0.74812620281694586222;0.39796947761952650158;-0.12962168360398407252;-0.045473003753766713664;0.32712330308328824158;0.73917778008537360357;-1.1922511256033250238;-1.518884065585461407;-1.7040229714926051763;-2.0725589057359026235;-2.4271385499744400072;-2.6401106244075309704;2.954518670475976716];
IW1_1 = [-1.5385762181305848717 1.1294275175098587027 2.1726950416977350855 -0.67334574141981684559;-1.8072249003132891954 2.2559349683073581794 0.56212352093637418804 -0.34683478621736585357;-1.1211718407043709256 -0.24281131240700648544 2.0107604572579194091 1.8553218866943985699;-0.78916717578443229542 2.3289773465299750121 -1.5892474304432577803 0.39717795157813734486;-0.89221815623721245636 -2.000490295842656252 1.414321659140712395 1.4174518025240061547;2.4006307022015649366 0.63085662431459410548 1.0138250551347165462 -1.2732483085168566639;-2.1602298170716571768 1.3922209463345815994 -1.251914272946735851 0.63248172184467488233;0.91653264773089548889 -2.6569460438395271495 -0.25048410689060923717 0.89280884878262989357;-1.3668105767314058241 1.7569515477101662615 -0.38452751755577418979 1.9052822626856680266;1.6627527662287757693 1.3031601385443110086 0.43535302322871000102 -2.0233431274223478979;-1.7796833358890857824 1.7706050163858606528 1.5680881454904549432 -0.067843117782835471452;0.010571499024323381677 0.46315179060181105308 -2.8255243539208425574 0.23838439490239329843;1.9142477993573003836 1.0780335263115767841 1.2085946638630182814 -1.5301105570456789984;-0.69025613598704560481 -0.91879686317188147271 1.7108355901378702324 1.9971731015767548723;-1.9616712298965142125 -1.2333105940133139988 -0.64351992575662220197 1.6281436286178490036;-2.3917064592979948578 -1.5613208067914603472 -0.59042957919560645763 -0.51520418582209570602;-0.91859019906956951296 0.7591680343688914645 0.64729551219638004067 2.5703577828538244354;-0.87963003118093363586 1.6974266902703873949 1.0243089111363192778 -1.823234827848495998;-1.8371518785616769431 -1.4204940146679450041 1.6467568270164372191 0.82179541967891289733;2.2704173198704253878 -0.50700108416652678311 1.3473993510143056351 -1.2486294403488009674];

% Layer 2
b2 = [1.5665674041403929717;-1.2433472952209114748;0.78733943682324214475;0.48193291953303235564;0.16643114690844534875;-0.11659933218540578792;0.53484887579662221402;0.87178729872799354261;-1.2565920521458664449;-1.5584566492186548992];
LW2_1 = [-0.061003703035323417203 0.25421001921832475645 0.54537525630810967936 0.49860380892916561502 0.036792210974210586005 -0.34420592665687393952 0.31915547608960392889 -0.33903135383996668706 -0.065556645414358780122 -0.06104835580610955964 0.55638866706327505529 -0.25795059795624275534 0.035892625982985516819 0.37326219092720541726 0.35376773555470353294 0.092545273091193994142 0.50854993761188305168 -0.53446397958703129039 -0.57504386401115925587 -0.0047286104988150667872;0.410120256665222227 -0.2027962810747968303 0.31643843296765888917 0.62350050832268633094 -0.35078806824622532634 -0.4552278213940031959 0.11740746820477251933 0.14185035435014875516 0.15417672736444518189 -0.33726115442444637438 -0.59177970642580990379 -0.32976691899835763877 0.17067373363785962037 0.27770314728278011618 -0.2133150831553800586 0.10304587442040179235 0.5686619929951233221 0.30743221002677767473 -0.20874250101713334726 0.12563990753992484994;-0.41520935276292647576 0.45864122410753793702 -0.069537476019174190855 0.089520882333973372802 0.56375198502648782295 -0.19610571889176162119 0.23592072249304293918 0.20206939632493636783 0.24293494124116044031 -0.63535938413283366 0.33122736610915853861 0.4109658166552504488 -0.4182685249552987039 -0.063204093847342379675 -0.31566934707490956757 -0.16218582784896135029 0.3743909644315803753 0.22096235585200940665 0.62884183375708480046 0.010847820268124549678;-0.22608092157952902612 0.61647372740736272601 0.049120631804954101307 -0.50382190092252843172 -0.059897981475144260188 -0.29201382505304712689 -0.47394252341826131891 0.10307535101406076206 0.16408969539686185657 0.3552351444380054124 -0.10016196809802929701 -0.33022898500377101394 -0.035046072627354922513 0.59026262497593096068 0.48508913630045524812 0.28827644600964263955 -0.20895049123806583302 0.45287902810223817918 -0.12479461177180951881 0.19429941032443473481;-0.051160734279997371887 0.16858832966271247722 0.42834866740530591622 -0.60486765480963144981 -0.54591027728098262539 0.12989342694535965794 0.58324548048720947779 -0.031478567193744928787 0.35379583805370712346 -0.032371877438425927798 -0.22215175861738983842 0.15035890424476811011 0.26266604915073726856 0.044583067351387568877 0.34573850732175753775 0.40077197169214356931 0.20626878705210960341 -0.20801036423472793468 -0.23495154597062828383 -0.60527752762386455299;-0.18303903379486385905 0.40264823042552788657 -0.28497962895552697571 0.17640999701059445481 0.23593907874639633016 -0.50629599326190133368 0.41109916025841136689 -0.5164146212816916881 -0.51418387325436853974 -0.33738491775097539938 0.17718155797474921531 0.1673790978629103865 0.52385788623591933444 0.45648810049611265871 -0.28377990797514796029 -0.11828200193790101846 -0.47747875264051226063 0.17606272984307622109 -0.48689844907527357609 0.090063994994334456434;0.49715633751946280983 0.026561128330832024791 -0.27176909948555716401 0.13469167227654610386 0.22998914840852752173 -0.50470252431695739048 -0.50089409240039073357 -0.10622146970696916268 -0.44199414403482450986 -0.15014910035125170196 -0.2671015515208052804 0.32675568728048087763 -0.20624834553065260478 -0.37814709092859499773 -0.31732099229103971627 -0.070166571305329494823 -0.33487981197620292351 0.14751891622195884013 0.53117685883292431459 -0.6121533572484078034;0.54063432026673130526 0.14549941712170108565 0.54618171866767528666 0.51231586961427411087 -0.49048701354158164012 -0.24165495252077259791 -0.038571362279130973205 -0.10148201509946533361 -0.046193444520832412092 -0.36693310267629952737 -0.45101879749487749915 0.40551757855124237473 -0.46139590599694096928 -0.32601542019811358131 -0.19812639085483102486 -0.037297585879591678426 -0.34293643584536698254 0.04549826452905057772 -0.404047744790827279 0.36258452181302575079;-0.39051287412460738979 0.48250623051383556561 -0.11012864747510460461 0.22741232884946155357 0.45842053461468595943 0.40884203462383972294 -0.22081525880824467989 -0.4128118108477754622 0.49311206404808677339 0.19765472717178195206 0.487466241540408185 -0.43325680923205750483 -0.3507762331173797099 0.18489805800970574023 0.26149621277828605237 -0.20765487059251316881 -0.440773850150179336 -0.13118871750378152674 -0.14856752299387301908 -0.19179492280941690119;-0.31853751038299360498 0.10516285585336535013 0.21588618467532794121 0.22842300283438043973 -0.21343222267360523192 -0.086322934061518613591 0.19001733953662380827 -0.080497210137890601311 0.39202436363997861246 -0.16687616487152784339 -0.6368703443423692212 0.42843518351536546973 0.17908681791359165603 0.53014537780461257199 0.40357918177044310726 0.21532689143337915838 0.10374477347347997591 0.60287351543766187767 0.50634593079732370668 0.4640980226767015826];

% Layer 3
b3 = [1.8964413406127687001;-1.8363358775704381465;-1.4812678323556749405;1.2096186623024951512;1.2111692399731988079;0.8904325015397255294;-0.75460517306874519416;-0.56336206330701077416;0.25008218617541344564;0.0058638990591117629014;0.14587977042645022818;-0.3125554527437395258;-0.47205212170716898124;-0.6838182881889134368;1.0218067976421258969;-1.0978615178023443111;-1.3336766481476061141;-1.4926406951895223596;-1.6477095768468186243;1.955787487542790748];
LW3_2 = [-0.46780937920676146646 0.37106312674761188219 0.75774794091674646523 0.19784091582184695768 -0.37957131413626599148 0.14711342110713404585 -0.69832008692662339566 -0.84649149764700437615 -0.87214669590656945797 0.65963432470039407018;0.069662782655458721504 0.5525792958693840351 0.53614578569762028071 -0.80337757026693801254 -0.43184743825422250429 0.11113488499282486721 0.87367758163636199953 0.34238779458971480008 0.83426206364194555043 0.35355326538658438107;1.0863058449848275178 0.39695245227928194209 -0.23043344074979937863 0.0075412699763682429499 -0.97763030240703641116 -0.68518514252654283414 0.32076559333892740167 0.58484593075875701551 0.47000116800496638536 -0.31924084473683889129;-0.9740536966730743984 0.03449965115240931357 0.79800074932349129853 0.79551806888648490812 0.23110075286924622318 -0.051259778303419378798 -0.98995376431704951159 -0.20731046038386771735 -0.47146190381706848394 -0.47140249869834038865;-0.71385213956943094349 -0.36053899974249303817 -0.3608870399222552372 0.65927957717711682673 -0.44371406627540871392 1.045592880702042482 0.68643000425246358809 -0.10571322699243027032 0.25836248056616373248 -0.64152815916986782874;-1.1643523233106898296 0.41069031218784929349 0.064264349723120797742 -0.037547078098411186542 -0.83229767418274480661 -0.022370253436181333773 0.029151457813631369287 1.15568982242364382 0.12673362117701553187 0.05659045351080605607;0.31328760357774576573 -0.74680162417652029561 0.91992366845104300843 -0.33287061409092494335 -0.96266610348456105317 0.32923531880263917637 0.091897105239934814835 -0.26424673838467954701 0.795807037713421761 -0.07607574899901714538;0.25366414560674299672 -1.0419832824190842224 -0.87744404012341892241 0.49220515960132843469 -0.69669811900351297229 -0.31015957841943181394 0.35763480519259888135 -0.2602076258534693487 0.19811977343579070809 0.84313977815201912591;-0.67135149516523084934 -0.7248672168296039775 -0.44907359842871608091 0.68936319505263743412 0.075680664548017723137 -0.78585253833539459034 0.37418757813147618396 -0.60301011539605786638 0.69328990123056499773 -0.64670916791088450815;0.67811284650918179917 0.92396410705964304722 0.80222937185209208799 -0.20505784041447977506 0.56689985660328467976 -0.25564601598793978976 0.61159863191110352965 -0.23238862988029676537 -0.25791730221058478678 0.56434971106777642724;0.26395610969012661684 0.70522797025977868035 -0.67726929083460229997 0.93521994331365509989 -0.75932343318018724609 0.56339503444228855589 -0.17037659566422191926 -0.29509452687064025023 -0.19013470179055522169 0.29305794447419475368;-0.78528666797378432474 -0.82182562063403752362 -0.29854753206593165338 -0.33575083844163688962 0.7371374533726594569 -0.33595288673813439306 -0.66575339971906477565 0.69416286614783362374 0.078327298148747795392 -0.63836447862278911103;-0.80365210619722593499 -0.069954804041037696449 0.16998802102279342296 -0.78180647831052141328 -0.71272339308949816949 -0.75790074805667240199 0.47311870555760127122 -0.46196581850923967849 -0.51582585689107673943 0.6650482193632257788;-0.7896231607225314697 0.34245463550409843689 -0.64294234641869230096 -0.44841887116106421418 0.72932265585828992549 0.035927402768843104408 -0.37858666029365678485 -0.40481754318853324648 0.94655905538625229045 -0.67267883372609238446;0.98734961747622873585 -0.63117659018320271258 0.49227221324527270507 -0.29856676205301041493 0.83403362394557523096 -0.27311552440484188065 0.92888290497393521949 -0.14577065531000293896 -0.086982543332367170952 0.19640295329255280654;-0.93762985876225324322 0.58451907932351998554 0.68050234579425150638 -0.17393332805632755189 0.95975227178303368358 0.54239903590791493926 -0.2931497526950389565 0.4721709027936787928 -0.55930735146263377278 0.10400201853644790162;-0.68394214266029540461 0.15319129928370417426 0.005523949418927379118 -0.40852786900794796354 -0.86935777063599994907 0.010020715588763761186 0.76809418907470039528 -0.91510682885618721549 -0.091313808730299039773 -0.7881105058949230413;-0.56131900768778342226 -0.11945655717278080843 0.30754150016503722931 0.33632299407298626992 0.00030668864584440340415 0.67863020488300862532 -0.70887876999743459905 0.80770670406478473069 0.37084149531674931444 -1.0762920191383855695;-0.71897151963863759061 -0.43816589983274012443 0.58076073408471984294 -0.81926728632671164121 -0.17834604569992576484 0.64942115749132889313 -0.75221722003038438142 -0.75785205218634954516 -0.21969721122158855642 0.48287331426770219167;0.82473422478316504858 0.52617402216717412688 -0.50713337385132883917 -0.23971288538153473491 -0.70871369726673205669 -0.59451478194899298746 0.72426686406182794187 -0.014801528117653197508 -0.66049295913292493942 0.49657767087078752422];

% Layer 4
b4 = 0.19574394733060537788;
LW4_3 = [0.058083095620099181589 -0.84734677741594843781 0.093457359373242662737 -0.55780206380488384088 0.40291265480230975538 0.22154130656166620694 -0.38947674711613250453 0.63205509380234548011 0.29950728528349451762 0.60871643030548938658 -0.73847145468915909028 -0.52011927299286131454 0.35903453745685126597 0.26506073289559084483 0.49489192395588676998 0.068115947120157782635 -0.14616679365889187481 0.06793443084037585622 0.59344759821085424356 0.35811174241268212137];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000001;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
