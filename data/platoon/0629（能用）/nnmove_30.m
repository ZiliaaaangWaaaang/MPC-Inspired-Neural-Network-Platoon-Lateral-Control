function [Y,Xf,Af] = nnmove_30(X,~,~)
%NNMOVE_30 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:50.
% 
% [Y] = nnmove_30(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.9001491004039645638;2.6093165783236753619;-1.9848259410981878847;2.0084140273712343117;-2.0084795448148953234;1.3703081812780559812;0.82892000096863105441;-0.79435508551500955132;0.32488908184784781596;0.20168003494748801274;-0.30718239357968701864;-0.34633496131943314333;-1.3444199869738906461;-1.6412252707951291431;-1.1197587773472763573;1.7772405526779211371;2.1315261876555902099;-2.2577114701830818255;2.9561939691259033758;-3.1154385650168374688];
IW1_1 = [0.83305198003534353113 -2.2379721746839615903 0.45435280218869300572 1.7710467652794967819;-1.8176176384589932677 1.4027303789939937761 0.66636695970007298051 1.0975963654721663243;1.4311738187376852327 -1.3855538563338700708 -0.72127493564461864217 -2.2389957343759552266;-0.94145937765258058683 0.51904724012394565236 -1.5137359515942092614 1.4571466996549524708;0.62154484666391529579 0.95721647782298213691 2.2226200111374292412 1.984528006259185684;-2.0413688611395994776 0.41309243790734995194 1.6041564747976073679 -0.83049956258563817357;-1.4232775804738400094 -0.41660064439728256014 -1.7621156771554391529 -1.8913184367293207622;-0.36890261259899492785 -2.131072458529031266 -1.4551692002789597957 0.82040958541434683138;-1.9268519364929521664 1.4377519754065157809 -1.8452608209444860687 -0.02716432450601683618;-0.8126306513587150393 -2.1723265129713484889 -0.45864393353835353206 -0.61393122980475967054;-0.99597875307113470367 -1.6273739917687675138 -0.91810919634366427999 1.5134790808069593648;-1.4034989753150357572 0.86062684890547624939 1.818075356176310331 0.96285585694014730329;-1.8338653370309891955 -0.97386001704044244942 1.9491385153329101598 -0.37594666556496336707;-1.3932777548796129174 -1.6168272483910297588 -1.8544368219313862589 0.12030291768370243721;-0.87691633303183136317 -1.2633722591114318057 1.6406913416595256816 1.6270135952874094087;1.996484505459905856 -1.2127557239785589083 -1.3855929653515548505 1.6489149910155951329;2.2370025871599019673 -1.0660293460316445646 0.6540349346353232507 0.39498267773607226294;-0.83115782294375673001 -0.91195814645907813389 -1.5741663057458858965 2.4291887568614889403;1.9373825655087779651 -1.70995468752007862 -1.3230415265217478904 0.72557662825142499319;-2.0056895025633285634 -0.83251209954940241786 -0.46127722523266273535 -1.7122468665413916877];

% Layer 2
b2 = [1.6796326262332563761;0.93845525701539000973;0.88385023102970261544;-0.49379920272586136365;-0.21983684799931235698;-0.11209497107299905283;-0.66178251681207300727;0.9420708608645556037;1.3756733138146175488;1.6847622211670307824];
LW2_1 = [-0.54306728420400618429 0.64604752372887763734 0.40404275732104161234 -0.1682268501730686816 -0.82963722740731826732 -0.028011928355941583674 0.97497066728301362559 -0.1359040657429082255 -0.19645232355630454224 0.2074423440156923093 -0.081713627125531068662 -0.42878223542838256321 0.17813372624810730471 0.043904320986894521117 -0.32173743686208255976 -0.29525144627092908545 -0.052996694608200882459 -0.29943437737764744266 -0.62782598152868762664 -0.35086829409792674728;-0.076581953971130281578 -0.040064120685380080755 -0.3207879788459420678 -0.21273291689172990626 -0.3332052147775043105 -0.29813926599460016664 -0.60076511046519198711 -0.64899301400553632835 0.27691106096250533986 -0.0027929616494785768771 -0.34250245463749245944 -0.082991951304453512317 -0.50603259469626693523 -0.11542474782979983416 0.32093240546565332538 -0.047194528191817228246 -0.52867916975537010416 0.30117831244422965664 0.25204340188033885761 0.46070782919466218841;-0.34846854319260667232 -0.073415637487715595944 0.076781319929822941517 -0.24182011390836075093 -0.71702837673529618012 -0.23245987093884251662 0.54624319525771647399 -0.74251170270367061743 0.087201419855912509771 0.018718231715231993528 -0.083999942778668221233 -0.55854603984251349758 -0.88857325604832559929 0.30281106084950398794 -0.32747118788633461373 -0.50584450842983130769 0.36964741590200034249 -0.97932746875455423119 -0.36323655846344243825 0.47993780182950224189;0.059835642245176026699 0.3124911301646356443 -0.096577365713016352644 -0.12971816599467561604 0.023402944435149466984 0.18484220689814656602 0.31390023574416020535 -0.53244241501806965911 -0.041745818642286006139 -1.0446650131765682357 0.219301111914726371 0.2425591781269585967 -0.29785504951526614592 0.11105608800953783999 0.28072841330861841858 -0.41588729212553626757 0.52951120036938936764 0.054660043248934753191 -0.20170097921779767125 -0.20319966642903833365;0.22435133226076342527 -0.21051881001391165027 0.061457405528697446606 -0.30807628238487072547 0.019252540999051694082 -0.033297183285654854967 -0.069741074746214243296 -0.52920630156167125513 0.4069325576154055879 -0.010803624601201957528 0.15636869357691335347 0.10793278855788518422 0.41584116359566852816 -1.1210313232341433398 -0.041853527922661754035 0.076210011970603674936 -0.098683637957181963296 0.14648413669774201784 -0.55635231374775473423 -0.060462621897014810768;0.21904277862448320868 -0.34277601817495734204 -0.53141814846545132323 -0.34899097451341332121 -0.65312018762416723661 -0.091687322256187225866 -0.44822363699443645846 0.28539168899903638588 -0.35545500787201911308 -0.61081351068976308394 -0.13552314631308701176 0.10766286460645174694 -0.049891033716871945047 0.41845585501071502765 -0.34974888532469139424 -0.58879265180941176006 -0.48555231459314873721 0.29132708284515351771 0.7840924204235593109 0.18765174546288471147;0.013557819092525650803 -0.14520903597358833514 0.48050917891823557992 -0.092680816503874122181 -0.40298756456763878964 -0.38604321454241741218 -0.15320237965527772062 0.61941119146138823304 -0.38559952684408471679 0.027194171359608020067 0.06510357519831877493 0.40867981555254700998 -0.35676423186399180976 0.3688555059395963176 -0.38450665530204897191 0.23793535253690095699 -0.32511988310824863069 -0.31195577477605268557 -0.17429123219469597195 0.10131880229342973831;0.34109670159761928954 -0.17875752571419217807 -0.70302440309785885209 -0.9968738003700532424 0.3060190523678424368 0.22043765309277682518 0.20094485616332263822 0.067284424945171422694 -0.7205508951008759988 -0.0043549108315440324471 -0.18081465447670791447 0.014953101913453545335 0.218541662281175747 0.098013498635577941953 -0.13760555834316057222 0.27161114510206590955 -0.40120112069512031683 0.61497271181216928149 0.14545304491881283493 -0.57429998522762615298;-0.01556148830338588418 0.39898066137254756258 -1.012320570727647695 -0.031600086244557748505 -0.33642302100990378877 0.020569187070864573819 -0.46650698938910606373 -0.40634405754231683883 -0.64116134818084091762 -0.7279250740323965907 -0.045048575809887830834 0.20034853908628022512 -0.43055295044232227974 0.4786382704692483947 0.10641395319377379425 0.32313430991939057213 -0.10410854092934210269 0.50349467609200193596 -0.85007512665971207699 -0.28509273108175725575;-0.0023191740124294335859 0.80265251549034288825 0.13523008701538249965 0.32538220225031361243 0.3546058803932387038 -0.10292818380986711035 -0.33997484187220877727 0.89032065880958910498 0.36314082868597824527 0.34914028264345092767 0.61507915058044471124 -0.15190580813028362051 -0.66044983227221132349 0.025619547496137137776 -0.39868149044560241556 -0.63038807174366340291 0.9455121832200027443 -0.4718057511202938259 -0.79965852000416381973 0.067458891557862540878];

% Layer 3
b3 = [-1.8861547991077558528;-1.6730927912838773342;-1.4923086158766185605;-1.2247643823884892811;0.8240790840467773215;0.82544602384163234809;0.60385966282732805865;-0.44069737084438947994;-0.63365315977451286411;0.12648596696084229984;0.13051548938800944244;-0.30011282863174698621;-0.6530369295722526779;-0.62134164066101726931;-0.86314582571960951629;-1.1265493743940229177;-1.0396547950703787233;1.526662435699456033;1.6881129591523595934;-1.898524873784556366];
LW3_2 = [0.866173509180218959 0.020799333728897410889 -0.88079716638969984821 -0.52715864672656442824 -0.94081090729432548248 0.43585339672367912067 0.4030957873232458577 -0.056751280539104630163 0.99492462420397520528 -0.01112499597522314046;0.87166428866072498405 -0.1470770071307569149 0.73542718582005683903 -0.64526054538400312577 0.0082849487595386371586 -0.17246967838196769485 -0.7020911676294568915 -0.79906201283989175543 -0.018978139731061445528 -0.83929320742966173619;0.23815061777039644997 -0.58836551337063669465 0.86058330654752845934 -0.52705201627382192164 0.2757298490074444608 0.32295081196352476427 -0.57746564803781341713 -0.8899411564256738405 0.17678988836083306402 -0.59361479141320205866;0.98995925672805995532 0.26977101131730230055 -0.049455881031486542687 0.66940709998097991384 -0.85643233524757078623 0.16753384397264539651 0.12974158014723857768 0.4408516826027881752 -0.076061793154113405135 0.97931425840288544027;-0.67642683328194841419 0.67058555920406204276 -0.22571054181415262097 0.63076689870048097131 -0.5308093515332676926 -0.3909922453022224853 0.3280523353206462045 -1.2593157777463457325 0.60456305271055410522 -0.80102317320869376172;-0.24296958493323722594 0.23773243963486537234 0.0080255339770602240196 0.53396990950323619529 0.4790417998778351838 0.79258275961924107289 0.66557074509001279417 0.80595060863293466191 1.2893163246932772825 0.66186521437711964833;-0.046526819062640410729 0.95731266844946938388 1.024057215768997775 -0.93592333334960853275 0.089489248097189860731 1.1304354776471303712 0.41473082517572812389 -0.32897606979231869273 -0.14092785561518939019 -0.10043475195165613156;0.041738754819938182761 0.6875033075656835635 0.33261154433533246522 -0.28688154955907918531 -0.90791199742079742308 0.94342939076034781909 0.17228290343770025217 0.49847699359245939421 0.46944960986335793063 1.0050285936733120984;-0.24213946639677139117 -0.31785750205386748002 0.81093168208765198379 -0.10264579912051133292 -0.36165292711989938113 -0.86855617055164902052 0.002632520383142194359 -0.43186045931475730564 -0.874189789472878509 0.61909137774064204596;1.1344157154605680748 0.76864904949922252531 0.28937022113460397765 0.22278492904949676046 -0.76861326094279991406 -0.16032137382170227879 0.41345259685213697765 0.26399081586945977174 0.69623759016600006433 0.78453162242613316835;0.79218399440916353882 -0.50636554761691376925 -0.63998223135997589495 0.14069764702478798624 0.70543167077761825823 -0.01502958780585174868 0.8510018005440221911 -0.4112089622058644478 -0.95178730181415438505 0.084897725795865977561;-0.77816964363883989186 -0.023066284146728552318 0.35894544976176334661 0.84508154417402292502 0.56637961704168759969 -0.58958048919294614443 0.81685481240378554624 -0.15665026828193340247 0.35057811478106309933 0.95585020711719048681;-0.79683347475974131147 -1.0474479300346499766 -0.15237888295507728831 0.53765310916790176599 0.082609199690572079899 -0.42754211226163424397 -0.65646080408495111058 0.17879566913906447256 0.054140608352166892658 0.79607381378843200537;-0.0074442848882898052243 -0.29343670580901687339 -0.77676147032137032866 -0.64261899986971460219 0.5664154210201579609 -0.61187356138940274253 -0.73465863200821091006 0.17656145367725017969 0.63458915576393659652 -0.0057845143335336010604;-0.70027619738159163632 -0.058279396083582332699 0.69363498244784493885 -0.82053193323963857786 0.1153203799270524077 -0.56880837332963696262 -1.0372282342865133398 -0.5325261011150419499 0.19867307485997229288 0.08365084623030191735;-0.7269910810890004571 0.90338831496978888591 0.78699035964463415205 0.73154508930467021521 0.20151674709066857982 -0.23466713742990419345 -0.35487308479936024996 -0.12841973450906632448 -0.016628614642991722261 -1.1001182270935547791;0.20836659685511804696 0.87658351011804536146 -0.059361215372370303156 1.141088191603489399 0.17835447847609267602 -0.63829259557412465487 0.61895614714249613808 -0.46306298488948333114 0.2480209570335038527 0.36207296436521113625;0.44522893342341918199 -0.099267516187193968746 0.43871888973307215931 -0.66403779326650880233 0.5055339690448528156 0.62967031156585751006 -0.71901707530513259137 -0.81693082389150195599 0.81080755109565372241 -0.44134027342375325986;0.35894845326074698022 0.77119052553857225796 0.74548011679059289492 -0.41629694114051402076 -0.54015337683918651646 -0.36616058020666197859 -0.29211805299612814135 0.59814457107633911548 -0.69983064242876269478 0.85148008265749852708;-0.69577628769714683354 -0.69171761524586417025 0.27441328173309320615 -0.68703853782679225048 -0.24172200693177059438 -0.48650103345212564188 0.24119089948448341199 0.85046954061740320796 0.082198710259703294811 0.87553288708361387549];

% Layer 4
b4 = -0.15900233805861649361;
LW4_3 = [1.0508486540687644872 0.019156514873520606029 -0.2607771052777290155 0.83075317621680788704 -0.47551748280393024704 -0.69819435891963388396 0.20811762652088355852 -0.33479787625496909564 0.84904655649529547912 -0.7019083943897490574 -0.2742621633927293523 0.2630048208912866281 -0.221542142394406949 0.37521959608082594562 -0.055020093702941710867 -0.87329578863201406946 0.13546249318772690673 -0.23255125790025216181 0.45186942387869211135 -0.34900704323594156087];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
