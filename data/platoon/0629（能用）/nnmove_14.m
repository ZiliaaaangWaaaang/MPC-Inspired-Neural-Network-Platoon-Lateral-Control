function [Y,Xf,Af] = nnmove_14(X,~,~)
%NNMOVE_14 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:35.
% 
% [Y] = nnmove_14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.581224840168548;-2.08798180279202;-0.533403245818273;-1.89546903030855];
x1_step1.gain = [1.49735732495204;0.473316379586819;1.97939958841911;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.0474604396645927906;-2.6480303219207734777;-2.0970427664067567974;2.0737278149969524677;1.8696872538429605282;1.5240016780382557027;0.99769950432554743713;1.2156044061410509194;-0.35604900029531022509;-0.33300310448434694566;-0.0031653721461255973635;-0.70866714218879800491;-0.88133434324709447605;1.398069978165848104;1.6573864554269170934;1.2288675110938149793;1.2921989219619414158;-2.2563067717468960893;2.7537770006010573454;2.835529924549634373];
IW1_1 = [-0.43402168306368815731 1.6521280981726107484 1.5853161919219198595 1.4923160385608638112;1.0740011926590899982 2.1629456611272224187 2.1264703921304763945 -0.2097982798125328785;0.94754007060753953073 -1.5663455708508862152 -1.5614650594103713921 -1.3105414803507091648;-0.48122962364045412942 -1.3534479081802954781 0.33371144187446522 -2.571954834337808915;-1.7339195254643047228 -1.917935041214000158 -0.64015708050640596216 -0.35957740623186368323;-1.7270943595342633792 -0.13172217718464476754 -1.3453712384694493931 -1.8533094175135165216;-0.19163265507791840681 0.37082428381961934916 -1.5964275922278663433 2.2808771308914081999;-0.61416132097963882508 1.3155931717383433366 -1.9149984167679132696 -1.5663781057222196935;1.5615396803469279163 1.5226631621750394974 -0.83291156519129405655 -1.3393100150938999082;-0.14038163936427661138 1.05702659900172935 1.7159185551151792115 -1.9883008607847636462;0.24648476509915451249 0.19087605851602509888 1.5868983126906104353 2.0660950360742305065;-1.0421656864989796709 -1.3276755981487207148 -1.8440641281063472334 0.44912940836811504619;-0.51064494849382724428 1.3076929402567967209 1.4520162723538267979 0.12763235156904481626;1.4744756442636228755 0.56768529179162408038 2.417027777997836413 -0.43933387815847291247;-0.26126517673294474831 1.5044776967530657519 -2.2638100460776038325 0.74992092492023043615;1.5900152700643763737 1.986458669921108422 -1.0300178383471454424 0.98829777322485867774;0.008067870551144586122 -1.9553287455494743341 0.63806891951033450905 -1.8980365670443761772;-0.017747773630915994469 -0.24759435328144974164 -2.2005384213251266701 -2.1590478803536150565;1.6598638422271370096 -1.1128102507156627521 -1.1861865548879368948 -1.8466383275476949688;0.40874094176410130652 1.954922887323509384 -1.1189080128172619322 2.0022619900297380369];

% Layer 2
b2 = [-1.6288505223463125571;1.0083882686499423542;-0.72633692432425356333;0.55176319738833812245;0.22762469558055137275;0.15749123484004837192;-0.40063616852252464939;-0.82358459515265225459;-1.236546776337039466;1.5275178120995369646];
LW2_1 = [0.17890005586395402171 -0.33215387290279568822 0.42427172843041227601 0.074028465337788659784 0.0094444697086266491542 0.58504429164954130371 0.2122678464108209706 -0.11803679233237691915 -0.015227337488696139622 0.18615175939001443739 0.48311173856308720076 -0.11366279570828474732 0.50761556266671103987 0.57482661922115318998 0.42015373485502599538 -0.47919731198389836635 -0.20460083246400720403 -0.53437740483480000719 0.59061384995761689876 0.59189837014973623042;-0.40846647654331452726 -0.63508873081485361922 -0.23695475846135791165 0.62423865031915592994 0.27634715578152713178 -0.52587574148955384956 0.51957722194390898451 -0.18294903363163877996 -0.48611914861180816061 0.11299760267242967005 -0.36367461549968904677 0.018030315699516640676 0.15488950452868641139 -0.33111002631925784412 -0.011064778194949543427 -0.060638046353402419442 -0.13402733568577226975 1.001876525507287008 -0.78154307045679571875 -0.42005845305345473895;0.3667207037286051019 0.22579054372605228407 -0.35980036777921481361 0.46103004895363502991 -0.94687412648390867353 0.25076231979895591273 0.22670770040123269795 0.26753235051069346184 -0.21922286263829907083 0.7597281305622181069 -0.1433965945966613198 0.28594486577336142297 0.40202666670571463037 -0.25998439683560686797 -0.34683517089219256802 0.37687129700562393975 0.20838941492107942999 -0.31562673723684597782 0.46557346055246706662 -0.0368835344244477642;-0.45338466229298246546 0.071958490955506909659 0.44009746146914896503 0.4992378473087371038 0.66831629220726795904 0.010321802190326297838 -0.46401027435205438598 0.18920240507571711719 0.24995941283690101264 0.39541041549439392977 -0.069659073183123740303 -0.0016694395269124693779 0.67138490622302282596 0.29173131765495852186 0.20203524582462314974 -0.21765751345914818859 0.4335970907375092942 0.19981380913240537334 -0.43326633439139161652 0.53621920920397381227;-0.24650301179369599192 -0.38307629946793825271 0.2040491297292296724 -0.27797100897990834056 0.23186320823911252265 0.2900092423732042457 0.05709302907570936586 -0.91442795658087416832 -0.042197940992148359751 -0.53682425582372850226 -0.40488238889097799555 -0.017969470691705968085 0.10033579189172907309 -0.38627075019038858983 0.0082398367878368170003 -0.35763184793154978447 0.43132645609986136614 -0.25153732043370330418 -0.60731879369005448144 -0.46869320270086117786;-0.1153616340424559461 0.74533429333056999688 0.51670693379336707363 0.29239150372947603218 0.58508329212280330012 0.11112832941817737953 -0.17873456632571144143 0.038731387804378472617 -0.36215666266461488121 -0.0023789956858019933872 0.028222855528964876926 0.49023635597836068278 -0.8907590978267645454 0.30114140880821688162 0.19609386055937183535 -0.41813209357534986133 0.6586936268884375778 0.10635543060203450638 -0.11730842420467697818 -0.70491886929032554487;-0.19397654546779044549 -0.52228825667892464502 0.48452405903363682249 0.17850547601464017422 -0.070740406387164361801 0.075274035663969104948 0.084194710623353458123 -0.69895849020386291439 -0.64388861652895068577 0.36675567021603566742 0.33363216495895742231 0.48404681310634994906 0.21176333093642593641 0.55670427337969308201 -0.18593427140874360659 0.60759327024183040766 0.060315777813790549811 0.42886192120108823644 0.18456393794487260807 -0.42031400605664925862;-0.1765006668223280395 -0.041297865310552947515 0.7876663164188270061 -0.41095997941993067659 -0.20808306784079586005 0.54991962085867196475 -0.097472765478986131416 0.22399722798104362842 0.13803906668349580356 -0.051757020530855485374 -0.56320724433292301825 0.50014984605484769098 -0.09414724333122312383 0.25619164352941664609 -0.59646695755136891481 0.38093458328161711179 0.18729416692628333974 -0.14146369300221392495 0.48822063066977233747 -0.38242196113901344434;-0.1496677040182384788 -0.34095759518718760095 -0.13849820045865493534 0.10174967737283749369 0.32739703369619860274 0.26660329825364892375 0.040165919234200465893 -0.27355533671580040123 -0.25711249714981937453 0.11875779731965291353 -0.088616119399333143081 0.45231556993402161071 0.098566781289262300758 -0.37157468427270951006 -0.2043047394860386945 -0.69411214260437059664 0.73113307480934530691 -0.30703947103451945111 0.59599484284460324535 0.097216890085830551249;0.022019562797225500361 0.042628500432496239936 0.39749091730544638956 -0.29139332842525617062 0.40768860321448840978 -0.39810616704587781234 0.033101539815303844538 -0.1531249030029718794 0.43171682558697532794 0.58239473660175877789 -0.090208691106208063748 -0.17771074573338113689 -0.61630192212228052107 -0.19283608559662518411 -0.46918635652148621418 -0.079313339074517819061 -0.40542778631746806406 -0.22019364864691773342 -0.1973948568171493001 -0.57679315970741318331];

% Layer 3
b3 = [-1.8473156475530778664;1.6455039819165488968;1.571528329300582838;-1.2989428182989932736;-0.96522094068360830832;1.075565338012689498;-0.70913244464113800447;-0.67709120357999563744;0.071228913061917281668;0.15730557231368394455;-0.11117909918933430169;-0.29810528966897242853;0.6700352549606458652;-0.55584936787651972878;1.0308382567939684549;-0.93164477548175861354;-1.279649790839379131;-1.3508812806372012538;1.6902506694548866673;1.7329787760758494919];
LW3_2 = [0.54543472183744179382 -0.56679670590774067218 0.93153854038654260172 -1.0183359726857337257 0.032553750233461700714 -0.03697803978791146251 0.81666926142708273773 0.33727416292491951832 0.90978286605362101991 -0.3119051051554598275;-0.21665676022196991846 0.52299389713002253366 0.19789939804693315595 0.78937141580908809502 -0.61369506327544665059 -0.75991894705603846294 -0.71809655618122003595 0.32781205211769920416 -0.79550026756667424621 -0.86194003015096909426;-0.12940661848759363317 -1.0640105196331592907 0.46191179490190004131 -0.69556089420715272453 0.093463335317285012316 -0.62204416695383701885 -0.5485062566875322787 -0.54125205030348477742 -0.46041928042540830601 -0.69615265533833026179;0.39705304698470972324 -0.51877554217848598217 0.6072063275561689899 0.49556087947399168891 0.82322377655898071325 -0.24926446751477621122 0.81042200904890204782 0.68327662952437351329 0.8059143471655380031 -0.11077998436569488905;0.73641225791239184328 0.71283568806995722955 -0.70374111469704869748 -0.59998914218505450258 -0.66892433131256767709 -0.70132100691339593901 0.61466267685277875543 0.32132899603581926984 0.66621299003476053269 -0.40540860376575871271;-0.43953535769556584256 0.49503870302729430231 0.56352504988715856893 0.13353871774336772971 -0.44050737126833361401 0.82998784782013712569 -0.064821220257936934539 0.61123827500854521766 -0.59050762346828467031 -0.8235858219103067146;0.60913000480333179265 -0.63433158821155888329 0.3886020992916819905 0.39067755714845875392 -0.53488336793655244517 0.85654826673889095101 -0.90190390665417319305 0.29602032920583165598 -0.30754439575399888929 -0.36283383382348227686;0.39759368042342990712 0.64550038177697066644 -0.042112110307154705657 -0.20049666627810405761 -0.82973128847698829347 0.39975968602902184346 -0.015151472427491392142 -0.3853264650916988221 -0.92587915292711109316 -0.35817629484261404027;-0.72193406188247410959 -0.12144268971172543503 -0.15984771923595769705 0.21166369126768705411 0.14302828127323954921 0.79657571367802160189 0.11599105217218705355 -0.83504670787290802281 0.2789263157834295237 0.73765699049101907114;-0.92052887671522809487 -0.059637416717653941867 -0.6448930692764102135 0.86460670208713152896 0.84941788478401925033 0.08153086905584389088 -0.8520210323622706694 0.60342853162972653891 -0.20980418278482096395 -0.31481142523632715813;-0.72462672229497560039 0.37729501223386463504 0.69456405650961050569 -0.5300245326354151576 0.54471999466601594975 -0.51898274347446071708 0.91658580182975013528 0.56928793090084583994 -0.77004402938605021056 0.65220613388763304386;-0.81851088327292498281 0.46936587141077257268 -0.3204297239322288493 0.21058261485242535382 -0.75697383483873215138 -1.0054087400181519474 0.383873890389170358 0.47552712273806230225 -0.29248690614195060888 -0.080993778591182674642;0.65880461846270244042 1.0098573468942646514 0.90977860272503585648 0.86352959927328531986 0.058142873913809026143 0.458756334389125775 0.18306042637900396541 -0.6868792823481040255 -0.56108428820302813644 -0.30474440265847241305;-0.75150132522753410047 0.078556711821209601609 0.23381747747846748364 0.81451015579586016901 0.085488439343338967769 -0.30059029784000845797 0.77700546835315498218 -0.49074597231303446199 -1.0321153937434497383 -0.60509183876278771486;0.87427225094517535542 0.17836807667337054029 -0.34264307801489890526 0.19931479374337107702 -0.36659897374023581174 -0.71577221489994224957 -0.68664263012617221538 0.71975064683793821274 -0.55556927158868407712 -0.58442553703425936806;-0.62865462865850063601 -0.37101928903936548521 -0.6007386705828050566 0.78753245465679155846 -1.0191332607471441651 0.33304532669189956806 0.29723255473762660861 0.13515152688799023095 0.020165684469080607383 -0.81803372411089925187;-0.33895298157040387732 0.90359423245333669872 -0.81854848130215807078 -0.91662163880395763904 0.45133529055384496997 -0.5501579553506388276 -0.086363949339269885375 0.68770420765829420873 0.1470208074907149165 0.62391318072859536237;-0.61267307494886702468 0.62302195320884623531 0.16254812238838672878 -0.82745877938731071666 0.34446454846608898226 -0.63419102131284543766 -0.8232190643504683214 -0.48280872303497140985 0.83798627965806871121 -0.43206362271881870729;0.13366496660514790018 -0.85037801654984734867 -0.4369472660815827969 0.17145793630505026806 -0.24769071928740066246 0.9262617380682127699 0.29290444639080526201 0.72362310352211567377 0.27675261189143507412 -0.94840197727374331294;0.1874748801062084691 0.55891268408738126183 0.27606831090904693227 -0.55102969539920265696 -0.1186399292999355537 1.1118402078098861274 -0.45470755006929264308 1.1922114175451277163 -0.15421666662312485951 -0.47245185731332550727];

% Layer 4
b4 = 0.40091545204965362004;
LW4_3 = [0.60134406709903065469 -0.44351291093198563775 -0.00098990173810637772933 -0.22661955120107782347 0.039029901343749340281 0.52791643416447731063 -0.23226817791202497565 0.54828526152973577901 0.86707898308504827156 0.24790341180623065576 -1.0995190943678623263 -0.39549154768842320617 -0.68586517364803090135 -0.25942736771530594542 0.26573634680516644568 0.46015556352726366685 0.41477508704755006175 0.19512944827395650726 -0.16035998079092941837 -0.17618601144046053264];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
