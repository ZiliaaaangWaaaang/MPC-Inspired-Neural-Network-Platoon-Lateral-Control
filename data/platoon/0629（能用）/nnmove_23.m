function [Y,Xf,Af] = nnmove_23(X,~,~)
%NNMOVE_23 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:44.
% 
% [Y] = nnmove_23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.9087509502010777673;3.2178979496424240381;3.0169253678686231979;-2.6302579709801947594;-1.3569739118742951689;1.5410891919287761365;0.9916465102327012282;-1.3613377095668834915;0.43487648327397238068;0.031539275567713145887;-0.4945928729234611021;0.093512466886155554135;0.88659047739573948466;1.2183306407579916897;1.7020751741127690959;2.0872994494302474777;-2.2380241054279785828;2.3011512136239007376;-2.7905467418786851219;-2.741781284348545622];
IW1_1 = [1.4067921634949265286 -1.7091572225324291878 0.077863948908279245753 2.0018574447494739132;-1.7564652693228992586 1.4452700727705118933 0.22185062461750462703 0.92565995213981167034;-1.4477067180942901903 -0.34992670803479725139 1.2769194745481877717 1.8294708883651049636;1.3745911740211662622 1.9030923124256635681 0.37779850322241942395 -1.4369554350820195054;1.5723760144347656009 1.3665982018845794776 -1.866637120150562712 -0.90857341341062081153;-2.0200345576969715999 -0.58979566200666222464 1.380290649756523047 1.737738876966210988;-0.53398176247830098085 1.1043108298339114892 1.4006304888017957477 -2.1414340500866639871;0.34680783862286812536 0.89363901890745178758 0.72468525388415783173 -2.2876421508217572587;-0.85044936606232712784 1.8116234542373967908 -0.63596910034601294992 1.7758990581051934399;-0.16431599085292070139 2.3869095303897416294 -0.89204542883494641892 -1.2368232187706724723;-0.99959258969564790398 1.1162882423772138019 0.50674893226358597165 2.0921200853688244337;-0.9399278549937700733 -2.636066693101602354 -1.4658684899162071069 -0.62298412702260341778;0.5566126753404095906 2.1135236694645427313 1.7353990416494495808 -0.592780900726682769;1.4859554218220718536 1.9098494809922137438 -0.83609659062116781225 -1.1811953875791028068;1.4966657094946236306 0.87399914018680235905 0.3227375759216215001 2.0721236579925133015;1.1555064332243840663 1.6768121087465641672 1.7168143524258474564 1.4063112789912046718;-1.5875447033536425057 0.88064060933899435124 -1.4430149994526486612 -1.7580560220956815698;0.54450683675880950929 2.1807309048821368336 0.72698391676210616374 -1.9890209517680388362;-1.4267248793020608222 -1.9095699015628435635 1.3277341745592661226 0.5985045414420553378;-0.14928249262013668086 1.0435769478553709178 3.3092201539471681748 -0.85879440421284614082];

% Layer 2
b2 = [-1.3448562019312788607;1.2115319811597731192;-0.82460456577538099321;0.5335677209270021093;-0.10948179524613524394;0.3246677813206774732;0.63206291041282225418;-0.98631500450448672535;-1.4725612636773823816;1.6461208404074312295];
LW2_1 = [-0.04513422363551102684 0.52715636546115740568 0.23991215085112441163 0.4257863772834825089 -0.078763216560877785666 0.172612780538416416 0.35650664379210950106 0.0024879667909024905104 -0.160987727717607082 -0.64281489637609368071 0.2208576644777671405 0.92386917349288122381 -0.56989337476744339472 0.51993783990406861051 -0.095957734907366337707 0.34640105435334000994 -0.66776439259906639201 0.50152502704534263067 -0.46243684790559685949 0.60882649385637799266;-0.58029155465401693892 0.43400738305989960963 0.49341914631454592 -0.4116493385974760999 -0.41345760061187275536 -0.42340652331273215259 0.056903392096309075854 -0.36645189026514179975 -0.093585979840515448602 0.11366201448388300876 -0.11084413792680830602 -0.39498779825877983196 -0.0013076430028863465869 -0.078225348030388094922 -0.29505795796393374797 0.33341452403841514984 -0.41544143085111984171 0.45053133703718278857 -0.39131895445098524577 0.29592641579704803689;0.47896469327995538912 -0.23688106088891897061 -0.6181069584754892432 -0.94345389530061019023 0.23503739587904839969 0.073440605141284365232 0.060679900307932153891 0.34238172765494145899 0.3500989510126099602 0.064071272088225050823 -0.35906352038787492376 0.69847249968440794365 0.34106749042701067776 -0.27555473487053810944 -0.091818258756853496361 0.23106353653074607202 -0.14643242901187678018 0.38089163369246414881 0.087979907847662797149 -0.8725935573201571982;-0.55325275809201435173 0.11195859052304349412 0.77715825901930468689 -0.92333566203866490607 -0.22770811749607125507 0.18777701132041979548 0.0068464373330970884624 0.55345133466785279008 0.40543100796236680727 0.088881140734962837957 -0.35559534630241185216 0.91975071946437181314 -0.084530758885002457714 -0.77791112162172904032 -0.3897829980031040642 0.071473350377430855396 -0.39882153076575871387 -0.16557724683684421629 0.00051167681289501082409 0.51343077746166398967;-0.10046651446072643599 -0.74933662365696129815 -0.017149169474059536983 -0.64515310521023627732 0.15245468158214625642 0.29170718187597366455 -0.45474778124210024632 -0.20503942860980756135 -0.180703672241575658 -0.57810358149315499432 0.13331853038714058801 -0.30350810133432082338 -0.32083441665679646171 -0.68382473245771024928 0.24085448830790734398 -0.58785386490364166523 0.51474067610497442615 0.45077337823943913753 0.084124955179253738113 0.41499084555728593671;0.50705446749151805719 0.82653807142167634581 0.80012451642640125549 0.89961403963037678277 -0.048520928680065390781 -0.39804162619304345183 -0.26266078179284485516 -0.075897207910168518197 -0.28441028977008520062 -0.23918945402178448667 -0.13920101523848199543 0.58366174094067135858 -0.51101852750785081714 0.040110661932698327137 -0.024704434938934930616 -0.72717616827637665544 -0.18935599273365211204 -0.16885500073689269085 0.32424698127126461156 -0.87794701590563950511;0.33891086063463354838 0.23603824751933599746 0.29961316420782763137 -0.52560070839224515282 -0.36100802282399702126 0.42309061940008513281 -0.04888246208878806176 -0.3636174517319134547 -0.58981841913609855954 -0.5409345905770096552 -0.10017641954714302799 -0.95051311056185472381 -0.38779699697881309106 -0.034065860116215151976 0.29845608233577280988 0.073389127529205816503 -0.27049032844994941316 0.14976886171679434923 0.091095207020768453887 -0.044459778656850114376;0.010508411969192731766 -0.13096058071321017846 0.58154367599646894504 0.27613756210846318595 -0.25364161318146610791 0.70219720244366556905 -0.4245155340366194574 0.46158321599353224762 0.83506656069375906348 0.25917005451989555409 0.42017150546797243926 0.62651856096765823345 -0.25876663615850797884 0.22002881220339071122 -0.090599337172895505477 -0.3714576132109006501 0.60058877639329688591 -0.55686380968056492513 0.36402824642188003068 0.05652093346922970607;0.10250532989689556396 -0.10498174049206653036 -0.13367562866998172755 1.1471643846896277807 0.19528705503958065925 0.23477877361751681162 0.35082538205455848779 0.23838697089926336181 -0.39450279283631095595 0.2179513946651694678 -0.061108482310352409128 0.11969465126016931578 -0.22604332321860806654 -0.029763651841957075583 -0.2693138710005198444 -0.29378778452871490146 0.68406626027505745835 -0.1817665960452388707 -0.28228899706091103994 0.78607494408933553665;0.028948480786854243613 -0.51158074652370955082 0.030423584685889938639 0.1423188973778517219 -0.7279134084354739187 -0.070288442182699709115 0.4890943727266485741 0.18145929468556001862 0.33666598839605033078 0.33828668272917994386 0.3472809036974091601 0.067902489604711097071 -0.22436230222968370218 0.44512198270126202004 0.13670849479163674212 0.55911298176715384933 -0.4136243153268779893 0.55471832930619480173 -0.18945849188620222936 0.10220726460193249596];

% Layer 3
b3 = [1.9725454349223212613;1.6902500292053603825;1.5344062066345192097;1.1370933369342868247;1.0982789869606008892;0.89418966532471122477;0.53303707564852509382;0.50991789561343514592;-0.31951967148309917688;-0.24990580421354999241;0.084777430583483706639;-0.26147491665418692852;0.42921960728264385576;-0.58556396697756696312;-0.9731721303980293003;-1.1781718804348579877;1.5471455744515152375;1.3894597595097584186;1.6754473226143604681;-1.8455198191568169541];
LW3_2 = [-0.33394775113137031841 -0.92123247774009975331 0.39132766509089594864 -0.0074154963904166986896 -0.47338545917132685004 -0.37876648614070096421 0.0050532180250575202407 -0.54902959538405204931 -0.77772711474165612255 -1.0753417589008571476;-0.29844756328719523886 0.18606678814932101074 -0.67677502832303382263 0.4248035940732194371 -0.27646591535201614498 -0.5062836668896077974 1.0152082216804139136 1.1428081603674202782 -0.36447058670278403847 0.10536263913109189527;-0.94477026491758697713 -0.41327361519001609702 1.07810302429613869 0.029359700347221184824 -0.65379641245691644258 -0.60201668786965945035 -1.0210691184692071154 0.098796405112138996341 -0.92289934877396384572 0.29491488062709547702;-0.46637851048012174404 -0.55352686036621623344 0.43608020495157534535 0.42556714071632417706 0.54599813673342334486 0.88200493847896488386 1.0888826080576978761 0.87006253355625962076 0.76282659636568894701 -0.3904111615194366669;-0.19712535967317704189 0.043065306696609545467 0.50254380846871482547 1.1878942274907395849 -0.24423311044949602699 -0.63865944073367930667 0.89918871862147153884 0.60333992064239017061 0.44307874427996246647 -0.079054146124045140964;-0.59665227468847714665 -0.36664767107696843995 0.62561370823759843152 0.89874878073784103538 0.013914403919005280397 -0.99539608513603228257 0.55863140091950114208 0.048469273042332769452 0.16718058463952559234 0.7314242168355327145;-0.075298512621394489419 0.29426809633160772028 -0.26613387717756309403 0.86495512221742165693 0.69072131508191814131 -0.38728691423278105432 0.62121927492429918072 1.0546506027464943589 -0.42785784354993861012 -0.77754409735914065127;-0.21869862830160646805 0.5368408722515005671 -0.9680510462255623727 -0.67670144895373829375 -0.11744228769747082353 -0.35669084945448137347 -0.6107165149347936195 -0.88203381768223998449 0.17118579506061601392 -0.82955876377084758477;1.0523898695928872726 -0.51503113395433386401 0.065094705133105709716 -0.72919830994628287435 -0.16324741321059357824 0.53520610788454858753 -0.29122283895092671013 -0.87370717533626296447 0.038235710899562645737 0.64256563839522062853;0.52867822339878112192 -0.47900473888472566708 0.6521142185804295055 -0.38978652803313168507 -0.26099538616556272608 1.21079590921196667 0.70009850523154182333 1.0198627067894174836 -0.36540338458077642469 -0.78982039057200270626;0.06467804024144765962 -0.47423265193516456195 0.62091035869292177107 -0.94765564403310309505 0.73125829633981420663 -0.29135644792223452937 -0.53570954485338295736 -0.80569761905428494142 -0.67994371664638919572 -0.55520915823229322061;-0.99579267506997970472 0.010377578741715222377 -0.23792553427542631472 0.14631601858171511266 1.3537850262897610509 -0.60765936546379661909 1.0515853305454900823 0.28249160752345997549 0.013985864788710593992 -0.35904605428997465877;0.07271633223727963502 -0.17461361781761985945 -1.1628911649701052511 -0.94152155699394912691 -0.24385688083250156577 -0.43280648521313830335 -0.24604908261128030644 -0.015315332853086076684 -0.39841682361508551358 -1.1555739280599250929;-0.77868992302188555499 0.94292842084204597786 0.018678640458904723076 0.81344942824887389587 0.41665857112959836517 0.77841157099182167745 -0.38396981015703490758 -0.2094290177853199153 -0.86884066819670535686 -0.13671648603756519913;-1.1405870237734507811 0.52443957799710849699 0.75598759078115540522 -0.093121974120548123288 0.76159145669720373917 0.42528945628526193534 0.25797423793404544723 -0.065204748464630965521 -0.96685667266050701052 0.58160318130319299534;-0.27082643327679173373 0.21715731751007821826 1.1132948815297756262 -1.0931340265859710303 -0.28772422857786739137 -0.012715269579194322241 0.38438425580928842207 0.32969133994694999057 -0.82981050077272189291 0.52588260383189866509;0.17165275414566513734 0.2062632364264164464 -0.93164761995814793227 0.55625804128453315567 0.099679793087414189645 1.2879164594013605694 0.044377949359012631991 0.41968786777161987134 0.097020798205779135159 -0.087255779156392904161;0.68379635000199046058 -0.50681478435641891256 1.0550329772048485655 -0.97063998893932257328 -0.74206719307293544929 0.24105842328015134046 0.17817741659705560453 -0.76215548622440620896 0.16653181968178165651 0.60172431748683408159;0.132395242646670519 0.81597908584414191591 0.47777510750945612061 0.55348119793994399185 -0.45270861402232909221 -0.97381065386625531577 0.8032412918408906588 -0.045865883153052379451 0.77288144918357082336 -0.045965689657420330527;0.26909873750184692964 0.49460361883269243766 -0.80782864462150305584 -0.59499743551104178341 -0.6777471473000366009 0.24236698046564680853 0.36918291257844670916 -1.047025607278073922 -0.64821771555166518564 -0.58324948446994961948];

% Layer 4
b4 = -0.4240640252852654335;
LW4_3 = [0.70609245988378444014 -0.085317645412015571948 -0.95567107753183400121 -0.52299145873126418049 0.17553901358563012147 -0.1660680187988062273 -0.34523398040915326268 0.42335133643248901159 0.22703210843171678368 0.76938508742845779231 -0.38504289922775747357 -0.53711812043103623893 -0.82312087338556128024 0.6546876359893663011 -0.46676745943857406163 0.49967582267774807159 0.67372519848640277651 -0.63158450462016568761 -0.25517164486676829904 -0.81853810516099612116];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
