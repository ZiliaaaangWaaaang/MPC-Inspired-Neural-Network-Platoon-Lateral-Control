function [Y,Xf,Af] = nnmove_29(X,~,~)
%NNMOVE_29 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:50.
% 
% [Y] = nnmove_29(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.9170808826246124035;-2.6887523496852643312;-2.0747414908402652678;2.0480043068843110099;-1.8063837175331858287;-1.8403514862645475869;-1.5187668381492027692;-0.28979971784842734062;0.61848297976639610152;0.64365147750916196223;0.50849221297801006081;0.50356146805762180829;0.33956711542271766913;-1.6500691748653251167;1.4964034735639846208;-1.6197613510809347748;1.863571079802623931;-2.584553746620774195;-2.5953908235297986629;2.9519645895769732746];
IW1_1 = [1.7311659080230783481 1.2838599221696909147 0.046351691400061692527 2.0668424156710032413;-0.12687397695591756674 -2.2642764414923974847 -0.13151520013435230583 1.8858088027326058711;1.6784742620987695982 1.7588182025403651387 -1.815665587187232477 -0.76097886212627552371;0.024060929754617280119 -0.076536814357671387188 -1.9716948249691343964 2.1984075841042809429;1.8523469319737861927 1.7399659835389231777 -1.5517029747967869824 0.060015946409641314496;0.84858188823354585573 -0.12546135197895769142 -0.71293582519080311855 -2.8945414329465193326;0.38380172233530274184 2.855346682678160608 1.6325567665067635126 0.2263694345589895851;2.2648837516445032847 -0.95865652491559649739 0.45894241477732689027 1.575892464506199131;-1.4226842135377011367 -1.9053642182062640043 1.60864780089651771 -0.96186147291506940427;-0.12382715397553271941 2.5063698808740242363 2.1611345406827675575 0.3076077568555192765;0.10074911188691360042 -0.38492405883367653008 -2.570633967770311834 1.621894624714623534;1.4131605366179409433 1.5166517566764772251 -0.76109773913020495328 -2.0161407464617830954;0.89060837814832483073 -1.2052253106556096718 -1.4893959743312155108 -1.6539580884330038479;-0.97670696891908448389 -2.3069928059677260457 0.87884695364549392238 0.49191740585906812422;1.8530047288570372643 -1.3119353379567133544 1.2491421819436663299 1.8351484345595059366;-1.7291493954479077999 -1.0907781609562259284 -2.3626939966528563986 -0.16915061884984367024;1.8207086598373700692 -1.8815073605879217844 0.68211557118321752835 -0.36354194540547762893;-0.66487699192557225825 -1.0630883978315255334 1.6379201195212571562 2.440341459748951447;-0.97986109466856263772 2.0836734283065045936 1.9415207340789060186 1.1554680439317230878;1.2375998702787496253 -2.1202106946153698175 -0.327609094374419485 -1.8318236986029565738];

% Layer 2
b2 = [-1.3232084947827720267;1.1564825066901098793;1.2068307980324006756;0.45832052197954731287;0.045637877080388820905;0.30968546302048460817;-0.45194702005056436311;0.65480387778934401322;-1.4458713115150114703;1.491130628763052357];
LW2_1 = [0.18049320699313944893 -0.32816295380960969208 0.37945825136467081773 -0.31638457623633930993 0.39977307957585361819 0.46889089409907369621 0.71676138198554661951 -0.16050755170352346002 0.31475188273489496105 0.19631323318691645818 -0.13261771496758656408 -0.22559382499754909723 -0.39872772015627511166 -0.70904358409610668268 0.38554362943030817679 -0.16586578744858720968 0.14142793064002157077 -0.099536221956713230585 -0.49473776645760098036 0.3401935432799407244;-0.42596850915833434081 -0.15132385255422453607 -0.13181575833472322645 -0.38230567389274699996 -0.19859441045214679122 0.24645905920121061183 0.25085327217284947299 -0.38047839854306314544 0.09201748544965876464 0.53975285112560411616 0.25676297483795751386 -0.48739862435249869943 -0.18392754999222163392 0.2821048357769083692 -0.24793186190843219396 0.51464618330628042475 -0.56760038249355460049 0.47825886340050249856 -0.14331667986041776719 0.47865647859641241579;-0.53113772637343803495 -0.38038470288535736197 -0.21159171856629935271 -0.076338338762082000311 -0.05803586054065292682 0.33292684495790697552 0.35394431297998280028 -0.15822006300770843912 -0.26069686692882354517 0.68121813553959409404 0.047983819295110537173 -0.16213807644020111765 0.043668853409402796917 0.29096028472373652862 -0.090187175258435253733 0.61391569365275000525 0.85808205409704496613 0.57294203312507074877 -0.19818364540138835861 -0.36097271368911876266;-0.067918272729420317568 -0.30682502900914360167 -0.33665351761865214275 0.36990754581476292806 0.30762527538592293608 -0.80378499462619035221 -0.22111937682258908655 -0.46849075306456117174 0.53905823746289371901 0.42066153578551246373 0.084285931473084635401 0.12126011263434191556 0.24886716323199772893 -0.09557129177609853532 0.68285990427400722336 0.052570707852749073985 0.054153547400143289825 0.58651757544586569093 -0.21929311056278541492 -0.11109112102920000453;-0.67195185629709885955 -0.28536515123425604257 -0.10024842731330116385 0.64875522099628557537 -0.57369975134773698588 0.12995343944782355994 0.88568660320222902804 -0.35368927107249459318 0.51862452903060229925 -0.37830222534997320905 0.26413194357015468139 -0.064732017783063075522 -0.054771806724508910469 0.050842563651557488857 -1.0913243628366970928 -0.69926510077142955968 0.036430152025238013436 -0.52299689985054675923 0.11994285052644942935 -0.10688012349210972152;0.33673764221304508526 -0.90925421539676354321 0.75818838622084527845 0.33926290301386469173 0.61204166139554816439 0.5600625565550573226 0.43239044157268397006 -0.17539432227725282321 0.61746899068060845384 0.13064836457840958706 0.341671956978616298 -0.54096123952756947073 -0.35053724909375044705 -0.31964869028609399493 -0.96363828016863317671 -0.5603671259203352184 0.49476296427984151061 0.61796406516386270802 0.27845491081796552857 0.23177699520129316224;-0.35589076945670572449 0.24753512499678567704 -0.59858558252850957437 -0.78188626309822040206 -0.59771005576472013843 0.12596295896872924946 -0.54612914355795771915 -0.058446283304814806991 0.40717324156543976965 -0.1175972482806794811 0.22493469105341959424 0.064730206084560787394 -0.55703875146821646425 0.016527343662934512736 -0.2089176167899017833 -0.054987612373742320027 0.76520853628587981454 0.23704573783773960627 0.47970612807015367007 -0.3647556929049741159;0.70062480706837992894 0.42810354460033789303 0.099214898927875452839 -0.34805222196942159352 0.066901961177714963647 -0.24209947552825741846 0.34489282034515922337 0.43258368358990423319 0.17580755338306228164 1.0643315134489006457 0.71365943902819395372 0.080132704435799090303 -0.49006055195999015384 -0.25215247175022648118 -0.53034842937049819778 -0.82062886954223479563 -0.13237519011922582735 -0.45941819325221427972 0.18048806189572041969 0.43181015717715615088;-0.27234497961525677701 -0.43340798103564176502 0.7557277575298549932 -0.11676680744834773418 0.70253212168467182863 0.11893182171881232223 -0.57511272446577654804 -0.42491694624907738742 0.40346575358226499652 -0.34463820739452100117 -0.38229163753271117043 -0.74482451498899793219 -0.25460653494680990372 -0.32361697949080642234 -0.103640922682696493 -0.1888518905528298597 0.27360450688490767224 -0.37811368037006248821 -0.93497662548526083715 0.40896425824110876901;-0.01564225208394624117 0.37304515733194365534 0.65350159367365090457 -0.27869212325044628864 -0.21552857842484779427 0.21132376362400498437 -0.28876416087206596695 -0.033147696437320059437 0.29051131492040277449 -1.3001220887403150961 0.14311737598479817857 0.15344130366398192611 -0.13796432854670681589 0.32234692596133213138 0.38212031835133214441 0.69510126929092130865 0.017493077828337942614 -0.83681561975334095571 -0.63399641478804769079 0.22744966354178139389];

% Layer 3
b3 = [2.1473875508800492895;1.4887776254965499056;1.5329713911053368669;-1.5037081174572584086;-1.1115508631718395982;0.90359356210089980532;-0.59037144786383888295;0.51641910408671709565;-0.36289336553586148959;-0.1313269733504614234;0.25630000886563036877;-0.25084323053939916459;-0.4194411626198237264;-0.49012821614948642868;0.99977885435250202217;-1.2614789855669905627;1.2979790508277744276;-1.3757899400548974089;-1.9926552761202727115;-1.9169029434743982687];
LW3_2 = [-0.67069753415200450419 0.3018828558273688456 0.87068953582899666355 -0.087068608376876896471 -0.54021724502091816866 -0.10144921937074434515 -0.38326175404380824485 0.73029654131503518588 -0.54753242041676386531 -0.092413408620171971775;-0.098465253753815942805 -0.4500074300495803814 -1.1065872942195091877 -0.49159097347458652338 -0.58218492103772023771 -0.96100648396658994166 -0.68317298396327386101 -0.57844096426479363338 -0.28586739060070365248 0.60602091652829592761;-0.39970297579408331501 0.7677096809172982983 0.080087085714201186604 0.44664487448719814022 0.72000469549924872581 0.91164194061170811256 -0.91109062568704246576 0.23576219419154192947 -0.26893678520135622101 0.45500004820049061438;0.44902282822879846513 0.65389299845486270613 0.092415382769268361596 -1.1288269644151021076 -0.38414149010290016273 -0.70277554785729778875 0.32443664969729341108 -0.39110582430562257361 -0.36479369628653396385 -0.64850044985894739202;1.0159230669014562842 0.49924089496881979278 0.5949531402624469445 -0.15238183584825717998 -0.66403123877184833113 -0.66080143707643090867 0.6760275214264657162 0.22707001340287039093 0.18233686242467772587 -0.55175990303447841612;0.48553145065222991228 0.48001387937186629218 0.39015796906197885985 -0.36265519036180154933 0.17717278603367345169 0.068994180918233324884 -0.98861369780681807029 0.4413735544514570952 0.040924035424939837757 -1.3948074523308084949;-0.020296364216767719124 0.27487611774835984946 0.98338392155589826604 0.57024536223209909558 0.33031166347097051794 -0.99663508564520530975 -1.0073632602584026152 0.04776484430976995349 -0.37966375640885374754 -0.64427071511267774984;-0.59072856265475692794 -0.039426940234009992536 1.0323720249337018373 -0.025190221801466315676 1.1781197882269414112 -1.0015856184786893213 -0.053596455753899013841 -1.1173885929678086804 -0.79710145893581929588 -0.64053223874421294504;0.98614601808635493629 -0.024565703910919233638 0.32508126925384589478 -0.32915390348438833268 0.27959637133082843041 -0.91202275668834820177 0.075191592539563589792 1.0610543831500753864 -0.24857092116970963547 0.75655105038283043672;-0.1185122134053348264 -0.24557573201895180337 0.74730024780405768237 0.22300740775759045342 -0.057224412368717524069 0.63860878520704988937 0.76775670512092042408 0.038272857919544434058 -1.0744590682629742151 -0.94375228007162415;0.53423803335453134977 -0.17196837026882197397 0.46862315868563592103 -0.49853992738249042205 -0.7381875397109084469 0.65117174043256309535 -0.63009257916577288139 -0.57735437050221050104 -0.21074759905909140612 0.32512462769630273707;-0.25621608875657048143 -0.71350215924307902604 -0.94673070190652275357 -0.27959628725487878365 -0.99245130811204973487 0.54027233603687796482 -0.59660044544301071845 -0.1553975550898896163 0.13164449831712060623 0.67472888128547636732;-0.94810234943276427977 -0.63964404306985167548 -0.51290780105170774572 -0.022934859519511165138 -0.75315467379029532591 -0.072897322942230294296 0.94421671161969078501 -0.58002500217216856893 -0.70828999817297966235 -0.5103289005255383648;0.28462717802779863296 -0.98444691368525039099 -0.67820700027989211378 0.75848374402313267773 0.51242800776015551278 0.38016418813012203826 0.84453681293514859529 -0.80347350474908196816 0.50798777557332097654 0.14656331028008479089;0.73426324915488649925 0.83306367005428327843 -1.1755928425648818347 -0.28925435756551376443 0.53087539278235063023 -0.67751076570479495942 0.17192176653372681638 -0.21964317206708566799 -0.48797330796019533494 0.22825073312129906533;-0.5776337162689342275 -0.55361798712776222331 -0.67901438716557660502 0.85813001681800415987 -0.03502458181356309791 0.41520192962395791048 -0.24081116070234756532 0.38762476705008569455 1.0402176798512252631 0.51770545817404023392;0.85133169464057656395 -1.0327262138620993959 0.37557845982889953573 -0.26642234668652992058 0.23023904770679301524 1.0778535515682847734 0.44186927349449395264 0.44983648674516379939 0.88577811199468092784 0.20613714877974478878;-0.42259917544171288206 0.72974459904377209085 0.34072773061646371984 -0.78612825520474449714 -0.46375158663110366275 0.30348460736342275368 -0.25858869442556142726 0.81522783146789667974 0.92821430947321026395 -0.48601997523113188437;-0.34296412914559931684 -0.7666760286547098513 0.071838233689606539878 -0.46369748043054981324 0.99899418710353482531 -0.24789181352526376556 0.13387568599791632717 -0.81360714940703271481 0.85567197293817720549 0.84296503872282779746;-0.98606665554865979839 0.49280329363594149727 0.56604231745753741389 0.24580297894881653065 0.12366927551749298808 -0.0075676787722090818264 -0.80716298864429314452 -0.19418964807842634124 -0.5528390785965789922 0.81240390201805956494];

% Layer 4
b4 = -0.67732917487057187067;
LW4_3 = [-0.53291030543196959979 -0.12743997460599820748 0.21346126692526615209 -0.63930475807324893545 0.0054656009910898934595 -0.45285314501471957138 -0.14307824464355728411 0.72407549732877241055 -0.22820952177916872805 0.2475345523443146234 0.77925770941184635543 -0.63282188770098024566 -0.47994966079880790888 0.83298837447522944277 0.46605973636768927015 1.2902809975932498787 -0.82685336938614328872 -0.25616374410471048906 -0.7521593394136828481 0.088405512531391422515];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
