function [Y,Xf,Af] = nnmove_19(X,~,~)
%NNMOVE_19 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:39.
% 
% [Y] = nnmove_19(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.581224840168548;-2.08798180279202;-0.533403245818273;-1.89546903030855];
x1_step1.gain = [1.49735732495204;0.473316379586819;1.97939958841911;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.131640309441686032;-2.3161454158384113811;-2.4792325509975774445;1.9697459340165976993;-1.6996534773720464173;1.8045845792866039847;-1.1470989077569970771;0.96108583841805361736;-0.35515669731699045508;-0.097766501852490861335;-0.31632518412090260274;-0.058264876682396701812;-0.73273649800781981423;1.379334293083560592;1.6871440307998537556;1.6899085988550044402;2.1209685880552817672;2.2767086956046407309;2.6840708824470769223;2.7284430406151001236];
IW1_1 = [-0.89098775497694548964 0.63878299926896364713 2.6074517028673191987 0.79727497056415708165;0.63797325685605754675 0.85127991892555254783 -1.9188286125754829836 -2.533740156239427499;1.70489345659877789 -1.4560804108570881699 1.4155209029776589791 -1.3142185717483167995;-0.47451829022132197 0.13985462438285559128 -2.6916102791505744918 -1.4778178605340122065;0.81607924226928463263 1.9211899957465348177 -0.1463959145265965045 -2.0259591131293333;-0.015004873515149057261 1.7152853464559798535 1.6216861804148341442 -1.3537581828995046695;1.9075310918149563921 1.7399865711928508283 0.0044168926280179062957 -1.3452714575255944052;-1.1926712705820559091 0.71388257151875533779 0.58992845891617395893 2.1036819604982293086;0.72936171559503970574 2.1693069134376008478 0.57283191015408962965 1.7018150827899121147;-1.3351431773615087817 -2.1097639308099118693 0.91732493550637461688 -0.82634496887576736057;-0.92164973403690153564 0.43766094775853764398 1.8099357371826187979 0.87536274372165012725;-0.18803910941395016176 -1.8404015330025109698 -0.96190500682365898122 0.73209575803245519054;-0.13021523779813554134 -1.4432762618309522562 1.5867176279280168494 1.6765872555387448806;1.0866276194902393382 -0.9394321120385461521 2.0741251502025224163 1.7656736202207710118;1.1553478835761563648 -1.2136469572040706755 -1.6498260213605346891 -1.5632990917287141741;1.775035814099916065 -0.94592474605296250623 0.53983946344706823517 1.9703716813148566267;1.8296662842278745842 -0.59300558362498945186 0.98729406851772294473 -1.707968543823875418;1.0760007044953601163 0.95093909898531792102 2.0698484039884768038 -1.8336547421158384541;1.2553151305142185024 -0.88475969084205063897 -2.2556975311493632219 1.6048861288948601533;0.98212960387773529103 -0.11958841076750761911 2.2004531924205656956 2.0130757539478509877];

% Layer 2
b2 = [1.621756440246034936;-1.2656409185590824507;1.0338691834338749054;-0.42205815734554513741;0.19947497058886010102;0.44970518100505302295;0.60796735129690682164;-0.8997027145735152498;1.3496097238309123778;-1.7696426779731289081];
LW2_1 = [-0.24253648484142725783 -0.49374770795776767862 0.05278081805249638242 -0.32334478542365280296 -0.52537404512096153031 0.58303514635412878597 0.10260520377773367506 -0.5641238418801884924 -0.078632937306114536469 0.076886582255913174522 0.1720807006309711118 0.8291194284179181917 0.68747854525074791887 -0.29086502008326853286 -0.015373368629611578254 0.19058136835686456667 -0.14736461794007166271 -0.39627841158271498445 -0.006099649768469315482 -0.34590345251252785364;0.2752734374375334081 0.41412259147824120875 -0.50088961218273253539 0.16579024532404010306 -0.035677009010991148075 -1.1295408330061464941 -0.03477533726542937631 -0.32976538960403728451 -1.0437729088532416988 0.63531652287127649004 -0.41049658936738697701 0.71251948012139354471 -0.19997317678108161854 -0.28820272139755426233 -0.18867968565605222619 0.0063756787387126527544 -0.077873179598651504074 0.52173338388385248621 -0.0043144846458771091147 0.13347099235860648836;-0.4375163312092590906 -0.36290652948196810978 0.84093721072389338023 0.16016542258476523797 0.081022817543532202333 0.53996599858037763742 0.31185101040915763626 0.30526467139776730653 0.25425343937685485063 -0.52736389370350067463 0.539015769044695503 0.7078561219917478553 0.20285850416433001686 -0.16874345115344643875 -0.50662904625365667854 -0.84102656840641432101 0.29429685107440134439 -0.1621911969493601835 -0.51310722707616340799 -0.17478001250532920752;0.38274361944933632529 -0.49130925025460586708 0.38740119137438339125 0.93168208471268842974 -0.41873282574212161711 -0.058389696197082674445 0.53099573122657539592 0.022791053427626037364 -0.39783248393464165638 0.54775080940473896973 -0.43572266329752185055 0.099404536413290764396 -0.67441382945444217079 -0.17871319258111620365 -0.35792542130571125547 0.47453850464487973282 0.39304079088838334011 0.22270555525589674772 -0.0043271066541249233323 0.26940182658739869614;-0.76064532515941185586 -0.39434077110045129277 -0.87957170148270502619 -0.21998544103604766864 -0.46948703468326158372 -0.83667102673423476844 -0.31333147266139427245 -0.64065813535586202399 -0.62473987257849372678 -0.0034179061780775826969 0.27297789826293467064 -0.27249729337657974115 0.50695852848981626249 0.46814824772234153727 0.39011372385898535065 0.1898317976674074592 0.052842498977865630383 -0.52013724541237893462 0.11389000391198342288 -0.34373250485590095549;0.23524002042287181502 0.30077186843860942433 -0.19032166464199912204 -0.35569356415075054079 -0.17781270022369502493 -0.87434042161928149373 -0.076792007424056063503 -0.05855209136220334426 -0.44666528081994427701 -0.2882897477703992295 0.27107716005697940487 0.24939680937444647091 0.056827874020584194514 0.74411613848814506245 -0.11885043867680147867 -0.17282278989530694413 -0.15079914288876289374 0.126730664612631716 -0.14845660540293928453 0.20007396405385990956;0.24718329480650857999 -0.41680549115328691112 0.13095257298313020544 0.085936201344803286872 -0.37181746737936827163 -0.36774011437903236788 0.18048035746778803845 0.49842443604148939373 0.0044314459008081095309 0.41554688558407359977 -0.73341601858903493483 0.075171782372233389435 -0.19107640823823121567 1.0474464587966958451 -0.21326633233753550245 -0.35694456098855942283 0.43502483918619611059 -0.24267588615539587016 -0.39053312599187506304 0.38742542867184820432;-0.13518823745201791198 -0.34158802490184830836 0.45636071156181329256 -0.16355206213205780719 -0.15482739414141394318 0.22824219741332035793 0.3972467019169138025 0.38151746274928266534 -0.13496333328892801129 0.061399870697204983472 0.20754759555616134059 -0.18179556880621813852 0.24027249668292319229 0.054788614490047037042 -0.21488204432817301082 -0.42066176857627191055 -0.035068563294417876008 0.58081399738938954691 0.19925115765000711576 -0.21429704974316524102;0.40291734311282312309 0.56880208113744701315 0.095500584050532952296 0.080621454267233050306 0.6412728434661058019 0.24812564288626318132 0.051648735538602823236 0.24353266289255104393 0.76571823775357905628 -0.2288841926655842407 0.060596432297225735764 0.24911662175726467794 -0.35939398813753559159 -0.19790358745804983998 -0.4092762034296552609 0.2858947979078201862 -0.15255140896758973001 0.40956586216569274006 -0.69045815262070486806 -0.19983634110986120414;0.26052604084589892075 -0.44184917586299521375 -0.15343255949993137022 0.066166764061596564095 -0.42243399930965785938 -0.16664321525229564003 0.10008782967811455378 -0.24047994921848539485 -0.26099293982481808207 0.0070303674264696079318 -0.61575320839425895514 -0.49334456404841042776 -0.34979441914434739047 0.79870971711250549063 0.31659159178606749441 0.3171432731725015719 -0.2954560351422703679 -0.27721691472479492724 -0.048925080952831281889 0.31417562190619269247];

% Layer 3
b3 = [-2.0073779369365354341;-1.701099339671510835;1.4762630820568951595;1.0363732234886495753;-0.78639393209496322168;-0.90226120927585196085;0.94778555737462655273;-0.30821561769411842668;-0.4326496619497337548;-0.073457425788691604884;0.07401524621858963926;-0.38844316045515048241;0.28118558197815607391;-0.89388968380661937285;-1.1202629335733171878;1.0384899545264030252;1.1717271429062641186;-1.5170911583161033054;-1.6864308657723068308;-2.0076373408055245839];
LW3_2 = [0.52315591931589022767 1.126569982318378127 0.61166800861631132058 0.65698069268483250127 -0.86334785528379154318 -0.54520454676253837789 -0.82583430935175439203 -1.0478317767254352599 0.63696463617576060123 0.45316865786923110626;0.18601378187280645515 -0.84470836756098111042 0.83001340858355943109 -0.11528968987230878152 0.11097411972630683019 -0.86828776666072005064 0.20640253645730005649 0.33092788231032255197 -0.73815390459878882368 -0.7058491098215545767;-0.75312780550463198637 0.51851521323326610347 -0.89575999628634517258 -0.43764507698716065276 0.32330911110777538209 -0.68319720077491874477 -1.0700345218293134675 0.68024688860067172858 -0.13487333506935661465 -0.053009919159243940046;-0.31332313404739953189 0.30327014234573596019 -0.24554750380312564961 -0.83881024771289913744 -0.28114918965574958731 0.72469757871609863376 0.66150356052311609645 0.60025330719527325574 -1.0599557780505628468 0.74600618939539686814;0.10055410297008793297 0.82343934138643726239 -0.79057037950108688396 1.0980456577916077876 -0.69795849561943368311 0.81588271794899303035 -0.25508199582620283419 -0.789369113853791049 -0.78818850844614607443 -0.5260635554040585804;0.6614952250317612803 0.70574251975731960851 -0.29461499361162152288 0.56073220112055022213 -0.6388088470173883815 -0.29031601078620933309 -0.62050286657480446806 0.54599065646156053067 -0.69628323662388746929 0.55555298885897519412;-0.61149258150682517243 -0.86006139115176105658 -0.26980263665681630814 0.74876886723444546767 -1.1920220389777382852 0.10942852733762060968 -0.23699566151365245026 0.6446867708343904102 -0.12576883371670438683 0.2085679222440126046;0.61664248777227714804 0.095399586590882254344 0.54740586499987209379 -1.1726431992738488574 0.13639877956672130654 0.38280455380935185516 0.74325310717957260298 -0.45745616665466931616 1.0194409720860988511 0.1460103032317583982;0.63416105566358782486 -0.37875921046161986627 0.064065402408716165539 -0.45983516400143858993 -0.87140610967192821956 0.74352054552557211853 -0.19618662577580225914 0.57682237864533802973 -0.78172650388952813483 0.49166891273988472255;0.82281944058481704118 0.76289707798714767595 0.36927723347512853014 -0.31950532083343324841 0.32145350144706152928 0.89680224464571411946 0.85199092700075051976 0.49317841077124924265 -0.5169644786968814465 -0.49487061093412904045;0.83509007649348776514 -1.1199353724732270532 -0.098950627148283121226 -0.59246242780909941228 -0.47726542041671149441 -0.6862153386009763878 -0.58017035653288984154 0.35809123205549214797 0.78713099004427666827 0.42977288754648673708;-0.29376618061755888078 0.45638284244487115071 0.29807029420717523482 0.96521290389072611493 -0.29250082415051276152 -1.0120377485161460296 0.072694388570732432209 0.50388238474925306498 -0.16814288452120362827 0.96877298345469231577;0.87043446079781627844 -0.68764970060027263976 -0.64099881900551380909 -0.54158527118772059605 -0.48026125139160058541 0.25771561016719035653 -0.24671143047854424135 1.1278646120788684559 0.58265613903132185136 0.26893952044435848192;-0.22572595880511631128 -0.29487724817464983085 0.52235220265461002054 -0.80289437155142517888 -0.30850538786554676518 -0.95216100616283760871 1.0516164831806420477 0.0086515535840907611953 -0.33929972656233853279 0.37087743832347314088;-1.1657049601661793048 0.52230067441136818207 -0.33324076195141311141 -0.31874478169339631739 -0.1807089542211099964 -0.62018588186912781968 0.65598001328119659448 0.56806206705360251519 0.32371684217522816995 0.26813374673854478702;1.112985028327562631 0.46615413489182166984 0.28380459199539059822 -0.30285299800465720343 1.0754912187510483612 -0.083327644557969260397 0.22996865792036041976 0.8683447897566898277 0.32739112349748766828 -0.22366635281832253357;0.2111606176411526814 -0.40220179266017225261 0.73018913694724896235 0.028746870339915679693 0.50172056657212293906 0.73884547560724012083 -0.28844096290410631278 -1.099524705116768919 -1.0014571352513306213 -0.1000381335388424997;-0.14852634374255652139 0.32912795380003129209 0.65513464844335234094 0.0039321921003670629036 0.52065039257848078069 -0.76794481084820265249 0.69148959196179848874 -0.73613676752959311678 -1.0854464046653633513 -0.55978953440584267032;-0.17772899134650627095 0.041221593694158072119 0.26520926795572674628 -1.0096933840618806943 0.80216447498468568256 -0.26472185217604604635 0.12535636421816015451 -1.1089067523481195288 0.69696246203289036192 0.047365780642705322678;-0.57979458941650818815 -0.2947830686812121237 -0.73683702353976165966 -0.16167549676360620792 0.6388372128262346239 -0.10036145438039459354 -0.47280400944680311959 1.0755578521651230073 -0.79392336200455893014 0.082304245131535558322];

% Layer 4
b4 = 0.05138787411843852293;
LW4_3 = [0.9904408101472376158 0.26460266163544005069 -0.6146222552611682044 0.59879886868114906573 1.0935880461233553618 -0.015295255996952894159 0.38397843088961769453 0.51104665166167972945 -0.14726847188990940807 0.31726020673065402633 0.54050129435603022632 0.11743390827476186955 -0.93234000535609207194 -0.24953789762395420238 -0.76311276841982478292 -0.16171284042599620712 -0.78891534670816221286 0.32578009313906619582 0.42384563892611049063 -0.65618172110093930804];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
