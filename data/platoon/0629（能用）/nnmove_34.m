function [Y,Xf,Af] = nnmove_34(X,~,~)
%NNMOVE_34 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:54.
% 
% [Y] = nnmove_34(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4203173692940551653;-2.6366216062462117797;-2.577666082393965663;1.6813635913529307864;2.2637255268081695192;2.2953670796516836283;1.4295676705900590697;-0.22637701931393663934;0.43814656217637193425;-0.038587085192959308388;0.0092553806038204074202;0.34021002981260700659;-0.92166523711972692112;0.97172061105986839991;-1.451031799320843696;2.0454173079409891933;2.0816086806366196349;-1.8930317849099065342;2.8738414352205468028;-2.9304959865709938605];
IW1_1 = [-1.2514999662023662541 2.0399601118892234375 0.76094146682580299235 -0.53379471297194280854;0.44317365869669628209 1.9125966460864538554 2.2933236730953039384 0.88694026644943335658;1.1497446776424999904 -0.50935294602227332295 -1.5070652373426534076 1.6004156132680413815;-1.6465067598950662298 -1.0098132321462534033 -0.72635003746504422928 -1.8828061889791565253;-1.3529169780321383953 1.5014507407056874033 1.4051339098934292338 1.1225986552979885236;0.052975441630629310774 -2.8828823686961957407 -1.5442273407171620558 -0.95942057961544957578;-1.104192660182623964 1.7747004612446148908 1.7432210582869087645 1.6918223953525950431;1.6785940991524082033 -0.3907107228554215772 2.0529537055269320156 0.86635814840445168894;-0.91902888061103937822 -1.7431261967764684062 -0.72279386346217877612 1.7715982490018271633;0.4338441553711952503 -1.8003901026512632022 -1.3981259270275117057 0.48806210192244958712;-1.235584100413022135 -2.7892280611075475072 -0.85452920563579715107 -0.851570762178633478;1.8166264212995364424 -1.7405302994617892764 2.1454361375000527978 -0.82132301617102065894;-1.271068741762251042 -0.91079211660362846548 -2.397022167441606566 -1.2677072648704341695;0.72010640262413239121 -2.5081895377606469033 -0.63948622076310257523 -1.6775289672251196826;-1.7851345311575861352 -1.6643168266726666715 1.1433335594082598696 -0.64514429353164148839;1.8012036985537451805 1.5715788490294206881 -0.58834702837385066676 -1.59369074165117941;0.36105313297663993444 2.5171794461442416058 -1.178931972072765344 0.61443538762124461083;-1.2417084793620527527 -0.65123732957225444196 1.3428354670381403846 -2.2482037664078835526;0.82267415477140515279 1.8170483448600311949 1.6642495962390773112 0.88217697503936687298;-1.9050382701832009325 0.94663665231744142936 1.3532586843345497662 -1.2852981904492299936];

% Layer 2
b2 = [-1.6528486879672548149;-1.2729987322218017098;0.68887654086031946399;-0.31178065782823005669;0.09847653952482603168;0.28835612359205958777;0.61875649399096377401;-1.0370934339281709935;-1.1712610993802221593;-1.6691207764801054836];
LW2_1 = [0.066878407587824012515 0.24151978900628043312 0.31541539036886984126 -0.053550608316226017136 0.074953465124756826765 -0.43033880034636307066 0.87973971697997033203 -0.24935673228938617929 0.26388599925858041706 1.0098916075725765662 0.89878037700993906878 0.048354325294533193058 -0.31812604283559309248 0.12891399429938543708 0.41671764320556137218 -0.016085157459941327313 0.19617153765695632961 0.45126510711195344516 0.056799452407147947575 -0.075453918881505571692;0.021562386264108460154 -0.46122577453380148027 -0.12827880856318527036 0.72066168810736042083 0.1106920874478246053 -0.41825378487168701769 0.15403515350003241235 -0.52658703490367886335 0.92971674258014280756 -0.51407814789655970067 -0.6594705835231515767 0.28648547176593930352 0.53210489834943996978 -0.067430402316740245539 -0.1768020108160588133 -0.4792298475076972597 -0.4779773179721689691 -0.11987825416219062558 -0.15462486830602373278 0.18072199618076248417;-0.21715263396895262415 0.2400797025092312742 -0.31700920884986394377 0.39836546386260052177 0.51045410450030248573 -0.86155726962652179335 -0.21542164409258779401 0.10071104841553342457 0.31365644837088363373 0.42430774219806932646 1.1018274486037886728 0.029508668764777670063 -0.22437621478374289441 0.053806049680661396928 -0.46166032385784777636 0.5772403905898371157 -0.1839945379035577977 0.12797368049620558295 -0.037034208222407286049 -0.12226260224192536663;0.50002381480560353921 -0.48832260350286693651 -0.33674065662677915567 -0.19984831597412394677 -0.54829974094589029043 0.014977843012200392839 -0.3333384042849953377 0.13707789619885515919 0.11921827965396909754 -0.021214981650594856577 0.2962679913405076304 0.80245283509759057772 0.06572160820083131072 -0.5287729360297347414 0.25887282385259779982 -1.0920827990638282134 0.54964704096969063674 0.35452339907228674898 -0.48903942315248943862 -0.68812292307342692865;-0.51278642970886922914 -0.10177223122376093112 0.49949458181780914678 0.073195252176547237477 -0.24121535288094231309 0.34092360374898328379 -0.21494492436740106345 0.26240916164202482408 -0.13206326635986062601 0.60407219196254735571 0.50833131198615544299 0.25852936853274116613 0.66694951059470830579 0.4123156730531590819 -0.099070439572221044577 0.10875411617969495126 0.32008916424916650234 0.84396267019830850664 -0.12348614893918391511 0.31057938220022451858;0.30935880950364957886 -0.26690576439522939456 -0.15336901503123628876 -0.68515410356187367302 0.071153701482126061051 0.51861792444385867995 -0.11878745007450729199 -0.27488894590972412502 -0.67389449326542572027 0.18513097586549134843 0.015469093743960625476 -0.20303234412000933928 0.20342296254975994474 0.24775429018035236006 0.22835607688063117027 -0.38290864564746296406 -0.66630141201859161004 -0.27918296078722937281 0.097781953049501213471 0.14839006546745539539;0.25987033179343177469 -0.06866889860048550065 -0.09719482881434385324 -0.048645444487874528461 -0.23046464496847965386 -0.70109016937501866806 0.030354884516308071329 0.052151008755870607858 -0.28926191591654659696 0.11667866819258486399 -0.57005113998588441415 -0.19412774929873696794 0.44230971757829795621 0.015833694901302822894 -0.44484170169060871514 -0.10996957923201783336 0.094967861985701770844 -0.38281515815781635981 -0.11010397690265290305 0.53761808511052844306;-0.48227899113555544597 0.44416859267057468008 -0.18005320630913698721 -0.58081806099478328065 -0.3125884628312662894 -0.49557743084142757972 -0.045035318656060037423 -0.16827235158967043804 0.19409498457762769386 0.54963412184506077462 -0.17694847741662356189 0.49669821018554582981 -0.16054646552952386851 -0.33384228814564104182 0.59404904648646084109 -0.053359819991346570112 -0.71051093345627680531 -0.040467222553839478361 -0.074525592345567492902 -0.23058072884111735501;-0.33186256997109636613 -0.69323940734049505075 -0.42169879696051232321 0.74155837482967934537 -0.63986375869304901176 -0.12267491456265670891 -0.88420821886808265155 0.22182119960125648572 -0.22034351369185226077 -1.0277115268581040741 -0.035073570792766267656 0.73904788415586220029 0.63189812403706890898 -0.05765143281165995004 0.19521688667031614206 -0.19085129522580698835 -0.15584027400186420409 0.1932582596920062179 -0.24000237369844787394 -0.45682392747859190685;-0.12711169337811697999 -0.73063046764337147287 -0.12121083274051687451 0.39488463247466487616 -0.61259064585394318314 0.40563765144636049209 0.7403109477817064743 -0.047791588522738369382 -0.14376453811037895325 -0.77279502889531737075 -0.038875690390262951368 0.013341757881809921185 -0.23573251561876443216 -0.038020178075702473763 -0.18658866206167984414 -0.12515687802836902853 -0.63480830899683260427 0.16085667578262285993 -0.056040136004564540528 0.16863916607253240376];

% Layer 3
b3 = [2.1423446765938520819;1.7797159567543676673;1.4367505577081391976;1.3638081262808487981;-1.2630000876266793686;1.0605880888801118012;0.63741391337527164573;0.62071610829072598747;0.15703807693443769256;-0.15341187438251946418;-0.0054962806133682321624;-0.18146504988244063772;-0.48196465345283873161;-0.67912659792752294585;-0.9128055029877631954;-0.87497366597445069836;1.3745891934711700344;1.4792625748052630197;1.8241189339128496272;1.9214992035767768375];
LW3_2 = [-0.99313567526739365832 0.15393254134313408277 0.2810090829997299311 -0.38385490176676534402 -1.1594723702449920566 -0.073797264235644866037 0.82427603050204589774 0.25669819050408182459 -0.068600745713496849576 -0.10891014874396839907;0.59056815794619432758 0.26024854884039949621 -0.86011968873115329792 -0.82777680498069805548 1.3069683662995561502 -0.041198052903242805833 0.46069700731318996567 0.31951959264761820023 -0.37656706461051625556 0.080281694378497914233;-0.84848202704726616297 0.90007462328690979181 -0.72021325028805371904 0.28386151505718981713 -1.0601926865556479118 -0.2131687867147494253 -0.66278517073628662182 -0.43781841033228080518 -0.58152755502561093159 -0.13653131861245629275;0.75915918856365249834 0.54206897305556200894 -0.10830349065695436817 -0.31186437285974905054 1.2752864987319536549 -0.36913857994461291012 -0.50909160712573919838 0.15628153076940282107 0.053914763974565536875 -0.78218490510733784671;0.54089110050105271288 0.73052229651121380893 0.75136867672592100309 0.94360247455175294551 -0.24107966914995360153 -0.66791335271141394347 -0.65028065596670980852 0.84020675310185855 -0.28094101812857030787 0.048359289773565294901;-0.92168177735940726159 -0.24950336510874493445 0.40332200606661083864 -0.26985472880217165059 -0.10744494708805163441 0.77697793264652581513 0.84682420997710106114 0.32196066931819905532 0.37835275616878910609 -0.65079677729729223934;-0.10160951790209675483 -0.97837122845116586412 -0.42667744824598091702 -0.85217706934466774804 -0.04019883656721180698 0.83510825461989035556 0.35943025994273519741 0.42339870970949872175 -1.174392839836967406 -0.022775247378030660794;0.23175461170097877428 0.3763715226896944821 -0.54514080551028953892 0.25150656353559741607 0.94356816814141597494 -0.064356557592419497138 -0.91209967401035463297 -0.5983674716073273947 -0.73131346070934755144 0.63019251118858266025;-0.75867124086328319166 0.3703610051436674877 0.62937500967352355552 -0.46616112472427356783 0.63639685046389460332 -1.0994865057314286982 0.3050778000560327996 -0.63287015540623958731 0.31544742577687068241 -0.10571883930529321627;0.36600601215799055677 -0.76786144676695711198 -0.54102289522344526596 0.18974670962180145706 0.87554810561879192754 0.55893256050828865611 0.45431274813509853194 0.24892425842990709151 0.54028832590836384231 1.1034547246342507609;-0.60781095423930431298 -1.0932361063532423096 0.37813443569527416255 -0.49246481454906670949 -0.49139489367046917945 -0.59862423798047459389 0.98875691525717102071 -0.47821952717730864535 0.45408633923229024809 0.65235554095887926529;-0.64731089000783781362 0.21292208284839880816 0.99463283293193194279 0.57798577333428557967 0.62182079888244479182 -0.85723262327747251632 0.42743298807865098832 0.61198925562162220793 0.41486884835899973112 0.65033935608932502692;-0.41263992746798400235 -0.80966908238474455395 0.15836719624878681234 -0.89986170230009498994 -0.27216539256838256922 -0.5699667285323207766 -0.71228515879807963174 -0.059096491115536872729 -0.9739350123990903052 0.14760232167437875583;-0.45320319492150928919 0.46762053502550549045 -0.88444496782472381557 -0.26922684508658517588 0.40840110716492350473 0.75461719798997173303 0.98511437177458416325 -0.32306201057148381528 1.2995796469122933292 -0.67098785354821666171;-0.15855986938279059695 0.41930929256970589369 0.14864684031833630407 -1.1714054547768000258 -0.26733929599048505965 -0.37762493805062319341 0.12822928787788570593 -0.24263108103450561903 -0.57402025053112337716 1.1242453860250773978;-0.96499175237258627558 0.25606270455383733919 -0.09572739801565430251 0.97517518108929390763 -0.037964577645254286853 -0.75797868272086033059 0.078328446237077284375 0.22211497710393920957 0.97435144819192387455 -0.64792284878717876229;0.32537444079633720539 -0.15689987533197924385 -1.0100479515979912115 -0.16472073646123028268 1.1991338051440905144 0.55627066921463108606 -0.69006236057170500242 -0.65763856525965791455 -0.53971999218963262468 -0.52053138878069771245;0.2364021933324919611 0.48515279458943094681 1.2043860213598882591 -0.90770649154377924805 -0.14558066115994278134 -0.48070726723926027191 0.5551490253368718264 1.2237164073406792131 -0.45064622721399427707 -0.075850212339018646679;0.35656936705111752506 -0.4121964570461812416 0.96356183602442402325 0.40301880710975074296 1.1020020627206557062 0.79573275848077684724 0.30527292123498322995 0.42836705204632236077 -0.22671632565882549049 0.60014729779457876013;0.11560419890016519762 0.68068308958204182257 -0.76791977014277157387 0.15278388027680039896 0.7350171409924235455 -0.70495336723832979775 -0.35334533618183877612 -0.81390567093512478092 0.75470090854359384025 0.0015057503630931633187];

% Layer 4
b4 = -0.66043258456766051889;
LW4_3 = [-0.51636931751139536484 -0.5248767891030294841 0.71513475555876193646 1.0379281329303000625 0.57101404629635721388 0.0081439174114877020683 -0.79304231877236275317 -0.67464388118875751044 0.20902094740397897388 -0.20218632994740987074 -0.36752479337338173071 0.56976841946011314022 0.34873258040860893869 0.71018719595963131219 0.34823400759160461071 -0.5478559357549633857 0.94021252631285867629 0.94065382602764879838 0.99713694275946829215 0.16155077344196114297];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
