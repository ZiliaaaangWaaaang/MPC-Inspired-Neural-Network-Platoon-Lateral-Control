function [Y,Xf,Af] = nnmove_28(X,~,~)
%NNMOVE_28 neural network simulation function.
%
% Auto-generated by MATLAB, 29-Jun-2024 12:53:48.
% 
% [Y] = nnmove_28(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 4xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.644786415382709;-2.24855099234896;-0.581789816284725;-1.89546903030855];
x1_step1.gain = [1.42933908693485;0.45598879896227;1.88894161457496;0.499777584457468];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.5522712890110677009;-2.626053816159370502;2.2783127632811015495;2.0137029256574554559;1.0359084512674991974;-1.1399163719392633176;-1.0175229050092922112;0.65059186261188683975;-0.91032094729703727509;-0.92253344707342654907;-0.16879234776174087407;-0.53446235879761117005;0.89027736546138325213;1.0889190692182060261;1.5234904894220662186;-1.6415961655623556581;-1.5653568730056417468;2.2670811066758553842;-2.6450455962564305423;-2.7529401184762383181];
IW1_1 = [-1.9840840072135528249 -2.04980156287333104 -1.0743699365744747709 0.53756831244115876878;0.72789167859845516073 -1.4042804393488310666 0.28105986872033861257 2.5478090446953718384;-1.1069782109075445575 -2.2973847005775849262 1.3086346171695562024 -0.5967606778134271206;-0.26036295304199963407 2.0610012503316390564 -0.63649729140052280218 2.0831434039724068263;-0.66714631989600714501 -2.2386886163050041532 -1.8697756263698048773 -1.0152995842358218948;1.2353324338763527201 2.3257698196525371515 -0.35598087301039021968 1.9561974613419961244;1.0939266697815408502 2.159274246391050589 -1.8468885652393143282 -0.53426231772957089028;-1.59948457051838 0.82828608522938695913 -0.79333030188741160416 -2.0484161197908035135;1.1632896264889613924 0.40422001469451285249 -1.6430718079414314836 0.93159601270676073437;-0.54842864991505213546 -0.33387509820029998009 -1.8369707020325245495 -1.5873107051573267512;0.91707164212584635354 -1.8167111849545163338 1.2215898921887626827 1.7963334336833134408;-1.0079629996516386026 -2.208369275138810206 0.29805684781102204095 0.58763903460336497364;2.0825445089975787027 -0.35640766226110104364 1.1299321156565012014 -1.4775737154229702242;-0.18462523338756101077 -0.10419086966713649034 -0.48219835385192805211 -2.7356191733927466281;2.2343968731839809472 0.22576182947260337031 -1.3388584616853405063 1.1902871136513104577;-2.1955297064038790111 1.6473147350526964328 -1.2919651402941842999 -0.059895897615526917657;-1.2852625741277619031 0.23234041183774212236 2.1486792560728535939 -1.1370300338437429044;1.2689472359161166892 0.87551507868483147146 -2.6119622885306501558 -0.66361436011343699626;-0.01944215644454185335 2.5881016703233834519 -1.101336228887748625 -1.0355771497985939433;0.32293439802947793149 -2.0234105826118549132 -1.8051718769139684095 -1.114856772608256108];

% Layer 2
b2 = [-1.4901580648905121684;1.2562247702628956958;-0.61588249763684144167;0.58812854563762073656;0.25955486655338316782;-0.24282348424947253207;-0.58513967339888228736;-0.7645046795100881587;1.0782990477950740171;1.5748881113097989992];
LW2_1 = [0.33978169799020613295 -0.30745576751950232097 -0.1000759437300490079 0.47907511630696564264 0.11124846265312418603 -0.61464653889749154558 -0.31693765703568077541 0.092174091919579440035 -0.35155604833106363083 -0.45177721910012991202 -0.35629104274619827208 -0.091119359662825624713 0.36655504620622542111 0.11187398737486994871 -0.32468479773719777226 0.56114354471928251655 0.7046917424096332816 -0.66446598981517213112 -0.085591213724300341248 -0.27403166497972580862;-0.67499781504872025106 0.52071602311015430242 0.59021340535996724697 0.1076943799416435199 -1.0644746999252130415 0.8990928089299978776 0.45757633568768757426 0.047185638427745806023 -0.49803248235064673244 0.53373674977643736916 -0.30708152348745726412 0.074932927510903801771 -0.053224016742309115946 -0.26693902452030110473 -0.015014783650481967198 0.54422187452727532886 0.087259890846740989501 0.32585032659127588506 0.22287543966586773059 -0.35889737599398280343;0.5104639322310158267 -0.15813831364323049922 0.37430609677194842666 0.1990144872632651496 -0.17247811877089119781 -0.38253030362293605204 -0.037248095198512555515 0.85713843552085267063 0.53190390142518428895 0.44147483486719363288 0.44014498062840862191 -0.13425424726725110336 -0.14374659692160829394 -0.051540352051541137024 -0.44156005074855919634 -0.62598346853717412586 -0.33162126805942720997 0.0071291468748374449416 0.41779348698170604148 -0.097932431827502622324;-0.40174758804908944354 0.36979537461396144726 0.52236904548007023763 -0.21079917800070954725 0.37005681004795726308 0.60080180121348369937 -0.40674584831784310612 0.29458213420256346149 -0.19065452087953077553 -0.41306873305629127069 -0.45295185352741984541 -0.59121176442486833569 0.054581434923973840001 0.79813412261188154684 0.16593422009460059852 -0.7370173171456604333 -0.098878129555051236244 0.5017381793108806054 -0.48875709793062288577 0.19754737721277218498;-0.82302439439543817468 0.070581865270974666893 -0.064345095466874668855 0.67415734858361786586 -0.56670578214854538945 0.27951879209357688438 0.09079126967443873486 0.038195292652498727404 -0.59200740762562142905 -0.84718694365471125529 -0.13154723139749330274 -0.45262765576788460686 0.061189082430791151557 0.25719334902719065417 0.23497242601321119415 -0.18319764612253064406 0.35109841941866881676 -0.377105669643553576 -0.1502802999271883877 -0.60752713434650740254;-0.021229428947732820881 0.69903877711578199516 0.17231343818664032752 -0.11708131679905517397 1.025038057029664218 -0.87693584731604301563 -0.52934060381159087072 0.1680898961444872719 0.36177169834521916147 0.089946178239649662856 0.021688510764317204399 0.36182861855152714803 -0.060776618040110995389 0.33322838734901516489 0.4230879525395372931 0.52432646251121928227 0.090296624152157917154 -0.07905093575485325208 0.45649847064622850468 0.52839217957458439745;-0.049595398976072450903 0.17374690083937938123 -0.14874836662577650692 -0.53825318443209846375 -0.20154812436242192097 0.69435305316577189405 0.23669265602803202242 -0.37875532030887232304 -0.56963665997172885369 -0.04588154723063726792 0.22129128775808390439 -0.16348345033169928153 -0.16761059357394175739 0.55012625405738280193 -0.31276292452825682489 0.028404524062695432618 0.27677669005957894477 -0.40226161624988837628 -0.52280089607678925656 0.40641014265785091464;-0.76241014730071787753 -0.19190026809030971688 -0.10835861263411110389 0.35839502461387118259 -0.67841013988736631468 0.62668610349294839867 -0.36320722392932575096 -0.15979210656636075316 0.1899680101024965595 0.012708416492123821018 0.46261816647821574211 -0.42488634119964657776 -0.17586017701266934421 0.51007437931510268836 -0.106478791835769665 0.32956910286824647738 -0.34959142285224981128 -0.14221387316020489555 0.021881908765491508984 -0.099698187379260005958;0.37371970985364572071 0.39192788507637277284 0.13839031570579868324 0.50469883248161440115 0.30660479478934643538 0.10476035464910743444 0.34273182770726356994 -0.008306564756193068888 -0.21775534902183044106 0.30439300770029509291 0.4035216160979169242 -0.31793133147701918562 0.47697756416915371158 0.073337314801247749374 -0.34645024292507647923 -0.33352651769655494718 0.46002459828881497872 -0.20954776507449010547 0.58113911912637639112 0.19798933933559756393;0.0060467818040292331538 -0.10806684584565412477 0.64704448866261321527 0.37751813453042154523 -0.25480362596795036456 0.18531141730142372537 -0.21338071626404497838 -0.028832895051704124367 -0.019000449463854419269 -0.45914761255208264012 0.40014359082912276389 -0.5563062359478815333 -0.29055609586329061989 0.28384653556844136046 0.068449858092693688372 -0.2336658100402828897 -0.55724588071255576338 0.33199072819313341087 0.43873961717595222343 -0.45115860780784045048];

% Layer 3
b3 = [-1.975340902717684477;1.8104515974075017226;-1.4891187565135830528;1.2769994498107588576;-1.0811751374234952472;0.85242973507961417035;-0.68128066349462157447;0.50865401548047761704;0.31412156132877505632;-0.30562057666565572989;0.27737095133656308743;0.15487600529585382469;-0.4132944731996366361;-0.79969118741986378041;-0.72274491184349065609;1.1718926696050278036;1.2023459314039308676;-1.6469462447026552709;1.6262715138293213357;-1.821675055240169705];
LW3_2 = [0.91662482129238587181 -0.73929945083222448066 0.11343201767088971488 0.38718027269127258672 -0.30611783766719596889 -0.10152869344479774349 -0.10389479121870807965 -0.84574427918148953331 0.02115017984492739353 -0.99385719834946006923;-0.84365303762928767206 0.12966749161806803703 -0.39569396265832779136 1.0067469177967716121 0.092558371180698428837 0.582571753109237922 0.51906384235727520693 0.64988754591480046852 0.20892190110160133165 0.24560719857637255958;0.95951527848100015561 0.012767021161766579224 0.38719857301015014883 -0.56633181639152674336 -0.86767456746949467306 -0.89115367460897476626 0.045351202975967043474 0.69511133349928955205 -0.3732437068224623844 0.077170872540917423432;-0.79355373503684378811 1.0047860324022048761 -0.6523423590975108155 -0.25678829496018851231 0.16124943394964366683 0.42810069439628145593 -0.72482112574288626305 0.045912890939030240323 0.82434368457411788533 0.16943544659333856228;0.76880141255577194581 0.49772875113274989145 -0.11770841548373681129 0.67416901638120052542 0.78364368119448568617 -1.0207582207297798416 -0.77158732042723265909 -0.6323411461316937876 -0.73000501931153638502 -0.56240018425304949545;-0.31123488465884718845 0.65606476116602197024 0.7689918299400031465 -0.20510447674809934027 -0.46994488725081889902 -0.73615532351763579566 -0.28681894603631857832 1.0207155073532230283 0.086258575886746985395 0.4948129281227491294;0.41496088256773344671 0.37799721628228161174 -0.77861078197379385291 -0.30994876801054149773 -0.16783111265401717827 0.49421495318917146866 -0.29427915963248080233 -0.81283819006236956994 -0.56406679191020969721 0.53621192977621257025;-0.26034410259715518032 -0.47020767151895859204 0.3002516448159296969 0.96391834483824856417 0.36197270817945875754 -1.1260834977045672822 -0.31173208119321382803 0.4633898022600387856 0.74641645291394542738 0.16184586882904800076;-0.72919789278340396699 0.50634916806318841509 0.92758407215128579892 0.54923291296994136701 -0.80879544797031077685 0.35150694079822930593 -0.25599058570615990105 -0.22160844138433502537 -0.48599090945489009652 0.74482173191059031225;0.47203780363928227182 0.039708713904153626617 -0.42510069050627657949 -1.0278104387509510165 0.89084239878061810547 -0.94252538275488384478 0.26680321965994147071 -0.70013774101711667708 -0.028605015201676298187 -0.80583622182685932245;0.66483110319385696485 0.82156897035892040293 0.70332996231334032888 -0.31300425532440034893 0.52871648577816998671 -0.020690666670507704833 0.69718864111195177902 -0.12166151795202430341 -0.9450780912580654114 0.027756590856220602487;0.5819788786579148665 -0.50035007045618606902 -0.56933606089024513253 0.41209385238090834314 0.31806416677537135973 0.8013340636290429142 -0.60406801785528463355 -0.22238782716621238733 -0.7112578983533249799 -0.76923718431887466718;-0.57736707908169837555 0.28458973460338449213 0.52984768166832008074 -1.01837756971570359 0.57699832566329822825 -0.54289673671694371748 -0.0011874776586419653369 0.88156726118488004662 -0.4575009639991231003 0.47855833387174162574;-0.92424970666619143955 -0.55342042612367003951 -0.56383370136800348149 0.52580040845974029828 -0.087959121539232590359 0.49918030177976402406 0.14843680470691425488 0.57615381527058862066 0.14320914198175732635 0.65627425480441858863;-0.24427239263339475817 -1.1776323741346013119 -0.66842714964626481766 0.41527527432624317116 -0.99876663856757086357 0.33169998526892946478 -0.40589235713749988177 -1.0114121982071644368 0.33416116979687443544 -0.48887252971042566285;0.85956695890756751322 -0.070383286601716651965 -0.53876431213521169816 0.32454007561629100165 -0.62648582965606658401 0.46356673290178684876 -1.1549477969330534943 -0.87871505731276766671 0.031235321138596599394 -0.048328333457211915258;0.38763589694021072241 0.33837947052612221688 0.44177194353705945273 -0.58739945402720106227 -0.84284621966895312273 -0.2988176629554400443 0.97532049158946765299 0.24597823772397614528 -0.68250481327841128198 0.80241081315958306952;-0.037338404897532206927 -0.096065545869393129119 1.0013332907378589276 0.62216612510669722091 0.021921434366833476848 -0.17636336686949791175 1.2338313959882627469 0.37070065779406391471 -0.57406902908058221602 0.0094669213869439487741;0.020954343767241829372 -0.45311982684268731214 -0.65333223487289171505 -0.34554961261409367079 -0.37480152975315184083 0.83935929830720668043 0.61714197727013675454 0.75136123491633599603 -1.2329846152588108676 -0.0074447459240872555092;-0.47505234841376364763 0.93949815852050377885 -0.70009572024445410054 0.9655996910701298841 -0.12785886582185368443 -0.81896643494911458561 -0.20309364282278533076 -0.52148394633472849868 -0.57674123548099354153 0.54188583639305887285];

% Layer 4
b4 = 0.62096415764088686018;
LW4_3 = [0.35315207754510513638 -0.43553090401269073384 -0.014473648091722643785 0.16758619274692596046 -0.85864417252246372225 -0.42494946449003412337 -0.65178340991886973832 -0.26539699016997725378 0.12365004338438818909 -0.64311582298360114862 0.47786331352943012263 -0.031497289051074177368 0.33006884227747723681 -0.51218639543786026458 0.58016077218567063678 0.94474605386617516167 -0.069319823725093321354 0.59203163908915801272 0.23115461992201580266 0.28189163838420439046];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1.25;
y1_step1.xoffset = -0.800000000000002;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);
    
    % Layer 4
    a4 = repmat(b4,1,Q) + LW4_3*a3;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a4,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(4,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
